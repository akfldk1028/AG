{"version":3,"file":"b82788f2cde183498e3bd32c4ca2ee816d96851b-b5c41026b952d20b23e9.js","mappings":"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","sources":["webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/acyclic.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/greedy-fas.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/util.js","webpack://autogentstudio/./node_modules/@heroicons/react/24/outline/esm/Cog6ToothIcon.js","webpack://autogentstudio/./node_modules/@heroicons/react/24/outline/esm/PaperAirplaneIcon.js","webpack://autogentstudio/./node_modules/antd/es/notification/style/placement.js","webpack://autogentstudio/./node_modules/antd/es/notification/interface.js","webpack://autogentstudio/./node_modules/antd/es/notification/style/stack.js","webpack://autogentstudio/./node_modules/antd/es/notification/style/index.js","webpack://autogentstudio/./node_modules/antd/es/notification/style/pure-panel.js","webpack://autogentstudio/./node_modules/antd/es/notification/PurePanel.js","webpack://autogentstudio/./node_modules/antd/es/notification/useNotification.js","webpack://autogentstudio/./node_modules/antd/es/notification/util.js","webpack://autogentstudio/./node_modules/antd/es/notification/index.js","webpack://autogentstudio/./src/components/views/playground/chat/chatinput.tsx","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/circle-stop.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/pause.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/panel-right-open.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/panel-right-close.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/circle-user.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/flag.js","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/agentnode.tsx","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/arrow-down.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/message-square-off.js","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/toolbar.tsx","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/drafting-compass.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/bug.js","webpack://autogentstudio/./src/components/views/playground/chat/logrenderer.tsx","webpack://autogentstudio/./src/components/views/playground/chat/rendermessage.tsx","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/edgemessagemodal.tsx","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/types.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/sequential-pattern.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/selector-pattern.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/handoff-pattern.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/pattern-loader.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/pattern-templates.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/pattern-schema.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/layout-generator.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/index.ts","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/agentflow.tsx","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/edge.tsx","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/send-horizontal.js","webpack://autogentstudio/./src/components/views/playground/chat/types.ts","webpack://autogentstudio/./src/components/views/playground/chat/inputrequest.tsx","webpack://autogentstudio/./src/components/views/playground/chat/runview.tsx","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/circle.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/shuffle.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/git-branch.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/square-split-horizontal.js","webpack://autogentstudio/./src/components/views/playground/chat/sessiondropdown.tsx","webpack://autogentstudio/./src/components/views/playground/chat/team-runtime/team-factory.ts","webpack://autogentstudio/./src/components/views/playground/chat/team-runtime/pattern-runtime.ts","webpack://autogentstudio/./src/components/views/playground/chat/chat.tsx","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/barycenter.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js","webpack://autogentstudio/./src/components/views/playground/api.ts","webpack://autogentstudio/./src/components/views/settings/api.ts","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/sort-subgraph.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/refresh-ccw.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/version.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/prim.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/map.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/version.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/history.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/normalize.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/grid-3x3.js","webpack://autogentstudio/./node_modules/@heroicons/react/24/outline/esm/ExclamationTriangleIcon.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/clock.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/index.js","webpack://autogentstudio/./src/images/landing/welcome.svg","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/debug.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/json.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/tarjan.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/index.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/parent-dummy-chains.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/data/priority-queue.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/nesting-graph.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/text-search.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/sort.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/position/index.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/cross-count.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/add-border-segments.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/rank/network-simplex.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/build-layer-graph.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/components.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/graph.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/init-order.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/position/bk.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/dfs.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/ellipsis.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/data/list.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/index.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/postorder.js","webpack://autogentstudio/./src/components/views/settings/store.tsx","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/resolve-conflicts.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/coordinate-system.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/preorder.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/layout.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/order/add-subgraph-constraints.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/rank/util.js","webpack://autogentstudio/./node_modules/@dagrejs/dagre/lib/rank/index.js","webpack://autogentstudio/./node_modules/lucide-react/dist/esm/icons/minimize-2.js","webpack://autogentstudio/./src/components/views/playground/chat/agentflow/patterns/data/ sync nonrecursive ^\\.\\/(0[1-9]%7C[1-9][0-9])_[a-z_]+\\.json$","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/index.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/index.js","webpack://autogentstudio/./node_modules/@dagrejs/graphlib/lib/alg/topsort.js"],"sourcesContent":["\"use strict\";\n\nlet greedyFAS = require(\"./greedy-fas\");\nlet uniqueId = require(\"./util\").uniqueId;\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  let fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  fas.forEach(e => {\n    let label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return e => {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  let fas = [];\n  let stack = {};\n  let visited = {};\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    g.outEdges(v).forEach(e => {\n      if (Object.hasOwn(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  g.nodes().forEach(dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  g.edges().forEach(e => {\n    let label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      let forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet List = require(\"./data/list\");\n\n/*\n * A greedy heuristic for finding a feedback arc set for a graph. A feedback\n * arc set is a set of edges that can be removed to make a graph acyclic.\n * The algorithm comes from: P. Eades, X. Lin, and W. F. Smyth, \"A fast and\n * effective heuristic for the feedback arc set problem.\" This implementation\n * adjusts that from the paper to allow for weighted edges.\n */\nmodule.exports = greedyFAS;\n\nlet DEFAULT_WEIGHT_FN = () => 1;\n\nfunction greedyFAS(g, weightFn) {\n  if (g.nodeCount() <= 1) {\n    return [];\n  }\n  let state = buildState(g, weightFn || DEFAULT_WEIGHT_FN);\n  let results = doGreedyFAS(state.graph, state.buckets, state.zeroIdx);\n\n  // Expand multi-edges\n  return results.flatMap(e => g.outEdges(e.v, e.w));\n}\n\nfunction doGreedyFAS(g, buckets, zeroIdx) {\n  let results = [];\n  let sources = buckets[buckets.length - 1];\n  let sinks = buckets[0];\n\n  let entry;\n  while (g.nodeCount()) {\n    while ((entry = sinks.dequeue()))   { removeNode(g, buckets, zeroIdx, entry); }\n    while ((entry = sources.dequeue())) { removeNode(g, buckets, zeroIdx, entry); }\n    if (g.nodeCount()) {\n      for (let i = buckets.length - 2; i > 0; --i) {\n        entry = buckets[i].dequeue();\n        if (entry) {\n          results = results.concat(removeNode(g, buckets, zeroIdx, entry, true));\n          break;\n        }\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction removeNode(g, buckets, zeroIdx, entry, collectPredecessors) {\n  let results = collectPredecessors ? [] : undefined;\n\n  g.inEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let uEntry = g.node(edge.v);\n\n    if (collectPredecessors) {\n      results.push({ v: edge.v, w: edge.w });\n    }\n\n    uEntry.out -= weight;\n    assignBucket(buckets, zeroIdx, uEntry);\n  });\n\n  g.outEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let w = edge.w;\n    let wEntry = g.node(w);\n    wEntry[\"in\"] -= weight;\n    assignBucket(buckets, zeroIdx, wEntry);\n  });\n\n  g.removeNode(entry.v);\n\n  return results;\n}\n\nfunction buildState(g, weightFn) {\n  let fasGraph = new Graph();\n  let maxIn = 0;\n  let maxOut = 0;\n\n  g.nodes().forEach(v => {\n    fasGraph.setNode(v, { v: v, \"in\": 0, out: 0 });\n  });\n\n  // Aggregate weights on nodes, but also sum the weights across multi-edges\n  // into a single edge for the fasGraph.\n  g.edges().forEach(e => {\n    let prevWeight = fasGraph.edge(e.v, e.w) || 0;\n    let weight = weightFn(e);\n    let edgeWeight = prevWeight + weight;\n    fasGraph.setEdge(e.v, e.w, edgeWeight);\n    maxOut = Math.max(maxOut, fasGraph.node(e.v).out += weight);\n    maxIn  = Math.max(maxIn,  fasGraph.node(e.w)[\"in\"]  += weight);\n  });\n\n  let buckets = range(maxOut + maxIn + 3).map(() => new List());\n  let zeroIdx = maxIn + 1;\n\n  fasGraph.nodes().forEach(v => {\n    assignBucket(buckets, zeroIdx, fasGraph.node(v));\n  });\n\n  return { graph: fasGraph, buckets: buckets, zeroIdx: zeroIdx };\n}\n\nfunction assignBucket(buckets, zeroIdx, entry) {\n  if (!entry.out) {\n    buckets[0].enqueue(entry);\n  } else if (!entry[\"in\"]) {\n    buckets[buckets.length - 1].enqueue(entry);\n  } else {\n    buckets[entry.out - entry[\"in\"] + zeroIdx].enqueue(entry);\n  }\n}\n\nfunction range(limit) {\n  const range = [];\n  for (let i = 0; i < limit; i++) {\n    range.push(i);\n  }\n\n  return range;\n}\n","/* eslint \"no-console\": off */\n\n\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  addBorderNode,\n  addDummyNode,\n  applyWithChunking,\n  asNonCompoundGraph,\n  buildLayerMatrix,\n  intersectRect,\n  mapValues,\n  maxRank,\n  normalizeRanks,\n  notime,\n  partition,\n  pick,\n  predecessorWeights,\n  range,\n  removeEmptyRanks,\n  simplify,\n  successorWeights,\n  time,\n  uniqueId,\n  zipObject,\n};\n\n/*\n * Adds a dummy node to the graph and return v.\n */\nfunction addDummyNode(g, type, attrs, name) {\n  let v;\n  do {\n    v = uniqueId(name);\n  } while (g.hasNode(v));\n\n  attrs.dummy = type;\n  g.setNode(v, attrs);\n  return v;\n}\n\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nfunction simplify(g) {\n  let simplified = new Graph().setGraph(g.graph());\n  g.nodes().forEach(v => simplified.setNode(v, g.node(v)));\n  g.edges().forEach(e => {\n    let simpleLabel = simplified.edge(e.v, e.w) || { weight: 0, minlen: 1 };\n    let label = g.edge(e);\n    simplified.setEdge(e.v, e.w, {\n      weight: simpleLabel.weight + label.weight,\n      minlen: Math.max(simpleLabel.minlen, label.minlen)\n    });\n  });\n  return simplified;\n}\n\nfunction asNonCompoundGraph(g) {\n  let simplified = new Graph({ multigraph: g.isMultigraph() }).setGraph(g.graph());\n  g.nodes().forEach(v => {\n    if (!g.children(v).length) {\n      simplified.setNode(v, g.node(v));\n    }\n  });\n  g.edges().forEach(e => {\n    simplified.setEdge(e, g.edge(e));\n  });\n  return simplified;\n}\n\nfunction successorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let sucs = {};\n    g.outEdges(v).forEach(e => {\n      sucs[e.w] = (sucs[e.w] || 0) + g.edge(e).weight;\n    });\n    return sucs;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\nfunction predecessorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let preds = {};\n    g.inEdges(v).forEach(e => {\n      preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n    });\n    return preds;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nfunction intersectRect(rect, point) {\n  let x = rect.x;\n  let y = rect.y;\n\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  let dx = point.x - x;\n  let dy = point.y - y;\n  let w = rect.width / 2;\n  let h = rect.height / 2;\n\n  if (!dx && !dy) {\n    throw new Error(\"Not possible to find intersection inside of the rectangle\");\n  }\n\n  let sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = h * dx / dy;\n    sy = h;\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = w * dy / dx;\n  }\n\n  return { x: x + sx, y: y + sy };\n}\n\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * function will produce a matrix with the ids of each node.\n */\nfunction buildLayerMatrix(g) {\n  let layering = range(maxRank(g) + 1).map(() => []);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    let rank = node.rank;\n    if (rank !== undefined) {\n      layering[rank][node.order] = v;\n    }\n  });\n  return layering;\n}\n\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nfunction normalizeRanks(g) {\n  let nodeRanks = g.nodes().map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MAX_VALUE;\n    }\n\n    return rank;\n  });\n  let min = applyWithChunking(Math.min, nodeRanks);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (Object.hasOwn(node, \"rank\")) {\n      node.rank -= min;\n    }\n  });\n}\n\nfunction removeEmptyRanks(g) {\n  // Ranks may not start at 0, so we need to offset them\n  let nodeRanks = g.nodes().map(v => g.node(v).rank);\n  let offset = applyWithChunking(Math.min, nodeRanks);\n\n  let layers = [];\n  g.nodes().forEach(v => {\n    let rank = g.node(v).rank - offset;\n    if (!layers[rank]) {\n      layers[rank] = [];\n    }\n    layers[rank].push(v);\n  });\n\n  let delta = 0;\n  let nodeRankFactor = g.graph().nodeRankFactor;\n  Array.from(layers).forEach((vs, i) => {\n    if (vs === undefined && i % nodeRankFactor !== 0) {\n      --delta;\n    } else if (vs !== undefined && delta) {\n      vs.forEach(v => g.node(v).rank += delta);\n    }\n  });\n}\n\nfunction addBorderNode(g, prefix, rank, order) {\n  let node = {\n    width: 0,\n    height: 0\n  };\n  if (arguments.length >= 4) {\n    node.rank = rank;\n    node.order = order;\n  }\n  return addDummyNode(g, \"border\", node, prefix);\n}\n\nfunction splitToChunks(array, chunkSize = CHUNKING_THRESHOLD) {\n  const chunks = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    const chunk = array.slice(i, i + chunkSize);\n    chunks.push(chunk);\n  }\n  return chunks;\n}\n\nconst CHUNKING_THRESHOLD = 65535;\n\nfunction applyWithChunking(fn, argsArray) {\n  if(argsArray.length > CHUNKING_THRESHOLD) {\n    const chunks = splitToChunks(argsArray);\n    return fn.apply(null, chunks.map(chunk => fn.apply(null, chunk)));\n  } else {\n    return fn.apply(null, argsArray);\n  }\n}\n\nfunction maxRank(g) {\n  const nodes = g.nodes();\n  const nodeRanks = nodes.map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MIN_VALUE;\n    }\n    return rank;\n  });\n\n  return applyWithChunking(Math.max, nodeRanks);\n}\n\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * function returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nfunction partition(collection, fn) {\n  let result = { lhs: [], rhs: [] };\n  collection.forEach(value => {\n    if (fn(value)) {\n      result.lhs.push(value);\n    } else {\n      result.rhs.push(value);\n    }\n  });\n  return result;\n}\n\n/*\n * Returns a new function that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nfunction time(name, fn) {\n  let start = Date.now();\n  try {\n    return fn();\n  } finally {\n    console.log(name + \" time: \" + (Date.now() - start) + \"ms\");\n  }\n}\n\nfunction notime(name, fn) {\n  return fn();\n}\n\nlet idCounter = 0;\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nfunction range(start, limit, step = 1) {\n  if (limit == null) {\n    limit = start;\n    start = 0;\n  }\n\n  let endCon = (i) => i < limit;\n  if (step < 0) {\n    endCon = (i) => limit < i;\n  }\n\n  const range = [];\n  for (let i = start; endCon(i); i += step) {\n    range.push(i);\n  }\n\n  return range;\n}\n\nfunction pick(source, keys) {\n  const dest = {};\n  for (const key of keys) {\n    if (source[key] !== undefined) {\n      dest[key] = source[key];\n    }\n  }\n\n  return dest;\n}\n\nfunction mapValues(obj, funcOrProp) {\n  let func = funcOrProp;\n  if (typeof funcOrProp === 'string') {\n    func = (val) => val[funcOrProp];\n  }\n\n  return Object.entries(obj).reduce((acc, [k, v]) => {\n    acc[k] = func(v, k);\n    return acc;\n  }, {});\n}\n\nfunction zipObject(props, values) {\n  return props.reduce((acc, key, i) => {\n    acc[key] = values[i];\n    return acc;\n  }, {});\n}\n","import * as React from \"react\";\nfunction Cog6ToothIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Cog6ToothIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PaperAirplaneIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PaperAirplaneIcon);\nexport default ForwardRef;","import { Keyframes } from '@ant-design/cssinjs';\nconst genNotificationPlacementStyle = token => {\n  const {\n    componentCls,\n    notificationMarginEdge,\n    animationMaxHeight\n  } = token;\n  const noticeCls = `${componentCls}-notice`;\n  const rightFadeIn = new Keyframes('antNotificationFadeIn', {\n    '0%': {\n      transform: `translate3d(100%, 0, 0)`,\n      opacity: 0\n    },\n    '100%': {\n      transform: `translate3d(0, 0, 0)`,\n      opacity: 1\n    }\n  });\n  const topFadeIn = new Keyframes('antNotificationTopFadeIn', {\n    '0%': {\n      top: -animationMaxHeight,\n      opacity: 0\n    },\n    '100%': {\n      top: 0,\n      opacity: 1\n    }\n  });\n  const bottomFadeIn = new Keyframes('antNotificationBottomFadeIn', {\n    '0%': {\n      bottom: token.calc(animationMaxHeight).mul(-1).equal(),\n      opacity: 0\n    },\n    '100%': {\n      bottom: 0,\n      opacity: 1\n    }\n  });\n  const leftFadeIn = new Keyframes('antNotificationLeftFadeIn', {\n    '0%': {\n      transform: `translate3d(-100%, 0, 0)`,\n      opacity: 0\n    },\n    '100%': {\n      transform: `translate3d(0, 0, 0)`,\n      opacity: 1\n    }\n  });\n  return {\n    [componentCls]: {\n      [`&${componentCls}-top, &${componentCls}-bottom`]: {\n        marginInline: 0,\n        [noticeCls]: {\n          marginInline: 'auto auto'\n        }\n      },\n      [`&${componentCls}-top`]: {\n        [`${componentCls}-fade-enter${componentCls}-fade-enter-active, ${componentCls}-fade-appear${componentCls}-fade-appear-active`]: {\n          animationName: topFadeIn\n        }\n      },\n      [`&${componentCls}-bottom`]: {\n        [`${componentCls}-fade-enter${componentCls}-fade-enter-active, ${componentCls}-fade-appear${componentCls}-fade-appear-active`]: {\n          animationName: bottomFadeIn\n        }\n      },\n      [`&${componentCls}-topRight, &${componentCls}-bottomRight`]: {\n        [`${componentCls}-fade-enter${componentCls}-fade-enter-active, ${componentCls}-fade-appear${componentCls}-fade-appear-active`]: {\n          animationName: rightFadeIn\n        }\n      },\n      [`&${componentCls}-topLeft, &${componentCls}-bottomLeft`]: {\n        marginRight: {\n          value: 0,\n          _skip_check_: true\n        },\n        marginLeft: {\n          value: notificationMarginEdge,\n          _skip_check_: true\n        },\n        [noticeCls]: {\n          marginInlineEnd: 'auto',\n          marginInlineStart: 0\n        },\n        [`${componentCls}-fade-enter${componentCls}-fade-enter-active, ${componentCls}-fade-appear${componentCls}-fade-appear-active`]: {\n          animationName: leftFadeIn\n        }\n      }\n    }\n  };\n};\nexport default genNotificationPlacementStyle;","export const NotificationPlacements = ['top', 'topLeft', 'topRight', 'bottom', 'bottomLeft', 'bottomRight'];","import { NotificationPlacements } from '../interface';\nconst placementAlignProperty = {\n  topLeft: 'left',\n  topRight: 'right',\n  bottomLeft: 'left',\n  bottomRight: 'right',\n  top: 'left',\n  bottom: 'left'\n};\nconst genPlacementStackStyle = (token, placement) => {\n  const {\n    componentCls\n  } = token;\n  return {\n    [`${componentCls}-${placement}`]: {\n      [`&${componentCls}-stack > ${componentCls}-notice-wrapper`]: {\n        [placement.startsWith('top') ? 'top' : 'bottom']: 0,\n        [placementAlignProperty[placement]]: {\n          value: 0,\n          _skip_check_: true\n        }\n      }\n    }\n  };\n};\nconst genStackChildrenStyle = token => {\n  const childrenStyle = {};\n  for (let i = 1; i < token.notificationStackLayer; i++) {\n    childrenStyle[`&:nth-last-child(${i + 1})`] = {\n      overflow: 'hidden',\n      [`& > ${token.componentCls}-notice`]: {\n        opacity: 0,\n        transition: `opacity ${token.motionDurationMid}`\n      }\n    };\n  }\n  return Object.assign({\n    [`&:not(:nth-last-child(-n+${token.notificationStackLayer}))`]: {\n      opacity: 0,\n      overflow: 'hidden',\n      color: 'transparent',\n      pointerEvents: 'none'\n    }\n  }, childrenStyle);\n};\nconst genStackedNoticeStyle = token => {\n  const childrenStyle = {};\n  for (let i = 1; i < token.notificationStackLayer; i++) {\n    childrenStyle[`&:nth-last-child(${i + 1})`] = {\n      background: token.colorBgBlur,\n      backdropFilter: 'blur(10px)',\n      '-webkit-backdrop-filter': 'blur(10px)'\n    };\n  }\n  return Object.assign({}, childrenStyle);\n};\nconst genStackStyle = token => {\n  const {\n    componentCls\n  } = token;\n  return Object.assign({\n    [`${componentCls}-stack`]: {\n      [`& > ${componentCls}-notice-wrapper`]: Object.assign({\n        transition: `transform ${token.motionDurationSlow}, backdrop-filter 0s`,\n        willChange: 'transform, opacity',\n        position: 'absolute'\n      }, genStackChildrenStyle(token))\n    },\n    [`${componentCls}-stack:not(${componentCls}-stack-expanded)`]: {\n      [`& > ${componentCls}-notice-wrapper`]: Object.assign({}, genStackedNoticeStyle(token))\n    },\n    [`${componentCls}-stack${componentCls}-stack-expanded`]: {\n      [`& > ${componentCls}-notice-wrapper`]: {\n        '&:not(:nth-last-child(-n + 1))': {\n          opacity: 1,\n          overflow: 'unset',\n          color: 'inherit',\n          pointerEvents: 'auto',\n          [`& > ${token.componentCls}-notice`]: {\n            opacity: 1\n          }\n        },\n        '&:after': {\n          content: '\"\"',\n          position: 'absolute',\n          height: token.margin,\n          width: '100%',\n          insetInline: 0,\n          bottom: token.calc(token.margin).mul(-1).equal(),\n          background: 'transparent',\n          pointerEvents: 'auto'\n        }\n      }\n    }\n  }, NotificationPlacements.map(placement => genPlacementStackStyle(token, placement)).reduce((acc, cur) => Object.assign(Object.assign({}, acc), cur), {}));\n};\nexport default genStackStyle;","import { Keyframes, unit } from '@ant-design/cssinjs';\nimport { CONTAINER_MAX_OFFSET } from '../../_util/hooks/useZIndex';\nimport { genFocusStyle, resetComponent } from '../../style';\nimport { genStyleHooks, mergeToken } from '../../theme/internal';\nimport genNotificationPlacementStyle from './placement';\nimport genStackStyle from './stack';\nexport const genNoticeStyle = token => {\n  const {\n    iconCls,\n    componentCls,\n    // .ant-notification\n    boxShadow,\n    fontSizeLG,\n    notificationMarginBottom,\n    borderRadiusLG,\n    colorSuccess,\n    colorInfo,\n    colorWarning,\n    colorError,\n    colorTextHeading,\n    notificationBg,\n    notificationPadding,\n    notificationMarginEdge,\n    notificationProgressBg,\n    notificationProgressHeight,\n    fontSize,\n    lineHeight,\n    width,\n    notificationIconSize,\n    colorText\n  } = token;\n  const noticeCls = `${componentCls}-notice`;\n  return {\n    position: 'relative',\n    marginBottom: notificationMarginBottom,\n    marginInlineStart: 'auto',\n    background: notificationBg,\n    borderRadius: borderRadiusLG,\n    boxShadow,\n    [noticeCls]: {\n      padding: notificationPadding,\n      width,\n      maxWidth: `calc(100vw - ${unit(token.calc(notificationMarginEdge).mul(2).equal())})`,\n      overflow: 'hidden',\n      lineHeight,\n      wordWrap: 'break-word'\n    },\n    [`${noticeCls}-message`]: {\n      marginBottom: token.marginXS,\n      color: colorTextHeading,\n      fontSize: fontSizeLG,\n      lineHeight: token.lineHeightLG\n    },\n    [`${noticeCls}-description`]: {\n      fontSize,\n      color: colorText\n    },\n    [`${noticeCls}-closable ${noticeCls}-message`]: {\n      paddingInlineEnd: token.paddingLG\n    },\n    [`${noticeCls}-with-icon ${noticeCls}-message`]: {\n      marginBottom: token.marginXS,\n      marginInlineStart: token.calc(token.marginSM).add(notificationIconSize).equal(),\n      fontSize: fontSizeLG\n    },\n    [`${noticeCls}-with-icon ${noticeCls}-description`]: {\n      marginInlineStart: token.calc(token.marginSM).add(notificationIconSize).equal(),\n      fontSize\n    },\n    // Icon & color style in different selector level\n    // https://github.com/ant-design/ant-design/issues/16503\n    // https://github.com/ant-design/ant-design/issues/15512\n    [`${noticeCls}-icon`]: {\n      position: 'absolute',\n      fontSize: notificationIconSize,\n      lineHeight: 1,\n      // icon-font\n      [`&-success${iconCls}`]: {\n        color: colorSuccess\n      },\n      [`&-info${iconCls}`]: {\n        color: colorInfo\n      },\n      [`&-warning${iconCls}`]: {\n        color: colorWarning\n      },\n      [`&-error${iconCls}`]: {\n        color: colorError\n      }\n    },\n    [`${noticeCls}-close`]: Object.assign({\n      position: 'absolute',\n      top: token.notificationPaddingVertical,\n      insetInlineEnd: token.notificationPaddingHorizontal,\n      color: token.colorIcon,\n      outline: 'none',\n      width: token.notificationCloseButtonSize,\n      height: token.notificationCloseButtonSize,\n      borderRadius: token.borderRadiusSM,\n      transition: `background-color ${token.motionDurationMid}, color ${token.motionDurationMid}`,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: 'none',\n      border: 'none',\n      '&:hover': {\n        color: token.colorIconHover,\n        backgroundColor: token.colorBgTextHover\n      },\n      '&:active': {\n        backgroundColor: token.colorBgTextActive\n      }\n    }, genFocusStyle(token)),\n    [`${noticeCls}-progress`]: {\n      position: 'absolute',\n      display: 'block',\n      appearance: 'none',\n      inlineSize: `calc(100% - ${unit(borderRadiusLG)} * 2)`,\n      left: {\n        _skip_check_: true,\n        value: borderRadiusLG\n      },\n      right: {\n        _skip_check_: true,\n        value: borderRadiusLG\n      },\n      bottom: 0,\n      blockSize: notificationProgressHeight,\n      border: 0,\n      '&, &::-webkit-progress-bar': {\n        borderRadius: borderRadiusLG,\n        backgroundColor: `rgba(0, 0, 0, 0.04)`\n      },\n      '&::-moz-progress-bar': {\n        background: notificationProgressBg\n      },\n      '&::-webkit-progress-value': {\n        borderRadius: borderRadiusLG,\n        background: notificationProgressBg\n      }\n    },\n    [`${noticeCls}-actions`]: {\n      float: 'right',\n      marginTop: token.marginSM\n    }\n  };\n};\nconst genNotificationStyle = token => {\n  const {\n    componentCls,\n    // .ant-notification\n    notificationMarginBottom,\n    notificationMarginEdge,\n    motionDurationMid,\n    motionEaseInOut\n  } = token;\n  const noticeCls = `${componentCls}-notice`;\n  const fadeOut = new Keyframes('antNotificationFadeOut', {\n    '0%': {\n      maxHeight: token.animationMaxHeight,\n      marginBottom: notificationMarginBottom\n    },\n    '100%': {\n      maxHeight: 0,\n      marginBottom: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      opacity: 0\n    }\n  });\n  return [\n  // ============================ Holder ============================\n  {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      position: 'fixed',\n      zIndex: token.zIndexPopup,\n      marginRight: {\n        value: notificationMarginEdge,\n        _skip_check_: true\n      },\n      [`${componentCls}-hook-holder`]: {\n        position: 'relative'\n      },\n      //  animation\n      [`${componentCls}-fade-appear-prepare`]: {\n        opacity: '0 !important'\n      },\n      [`${componentCls}-fade-enter, ${componentCls}-fade-appear`]: {\n        animationDuration: token.motionDurationMid,\n        animationTimingFunction: motionEaseInOut,\n        animationFillMode: 'both',\n        opacity: 0,\n        animationPlayState: 'paused'\n      },\n      [`${componentCls}-fade-leave`]: {\n        animationTimingFunction: motionEaseInOut,\n        animationFillMode: 'both',\n        animationDuration: motionDurationMid,\n        animationPlayState: 'paused'\n      },\n      [`${componentCls}-fade-enter${componentCls}-fade-enter-active, ${componentCls}-fade-appear${componentCls}-fade-appear-active`]: {\n        animationPlayState: 'running'\n      },\n      [`${componentCls}-fade-leave${componentCls}-fade-leave-active`]: {\n        animationName: fadeOut,\n        animationPlayState: 'running'\n      },\n      // RTL\n      '&-rtl': {\n        direction: 'rtl',\n        [`${noticeCls}-actions`]: {\n          float: 'left'\n        }\n      }\n    })\n  },\n  // ============================ Notice ============================\n  {\n    [componentCls]: {\n      [`${noticeCls}-wrapper`]: Object.assign({}, genNoticeStyle(token))\n    }\n  }];\n};\n// ============================== Export ==============================\nexport const prepareComponentToken = token => ({\n  zIndexPopup: token.zIndexPopupBase + CONTAINER_MAX_OFFSET + 50,\n  width: 384\n});\nexport const prepareNotificationToken = token => {\n  const notificationPaddingVertical = token.paddingMD;\n  const notificationPaddingHorizontal = token.paddingLG;\n  const notificationToken = mergeToken(token, {\n    notificationBg: token.colorBgElevated,\n    notificationPaddingVertical,\n    notificationPaddingHorizontal,\n    notificationIconSize: token.calc(token.fontSizeLG).mul(token.lineHeightLG).equal(),\n    notificationCloseButtonSize: token.calc(token.controlHeightLG).mul(0.55).equal(),\n    notificationMarginBottom: token.margin,\n    notificationPadding: `${unit(token.paddingMD)} ${unit(token.paddingContentHorizontalLG)}`,\n    notificationMarginEdge: token.marginLG,\n    animationMaxHeight: 150,\n    notificationStackLayer: 3,\n    notificationProgressHeight: 2,\n    notificationProgressBg: `linear-gradient(90deg, ${token.colorPrimaryBorderHover}, ${token.colorPrimary})`\n  });\n  return notificationToken;\n};\nexport default genStyleHooks('Notification', token => {\n  const notificationToken = prepareNotificationToken(token);\n  return [genNotificationStyle(notificationToken), genNotificationPlacementStyle(notificationToken), genStackStyle(notificationToken)];\n}, prepareComponentToken);","import { unit } from '@ant-design/cssinjs';\nimport { genNoticeStyle, prepareComponentToken, prepareNotificationToken } from '.';\nimport { genSubStyleComponent } from '../../theme/internal';\nexport default genSubStyleComponent(['Notification', 'PurePanel'], token => {\n  const noticeCls = `${token.componentCls}-notice`;\n  const notificationToken = prepareNotificationToken(token);\n  return {\n    [`${noticeCls}-pure-panel`]: Object.assign(Object.assign({}, genNoticeStyle(notificationToken)), {\n      width: notificationToken.width,\n      maxWidth: `calc(100vw - ${unit(token.calc(notificationToken.notificationMarginEdge).mul(2).equal())})`,\n      margin: 0\n    })\n  };\n}, prepareComponentToken);","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport InfoCircleFilled from \"@ant-design/icons/es/icons/InfoCircleFilled\";\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport classNames from 'classnames';\nimport { Notice } from 'rc-notification';\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport useCSSVarCls from '../config-provider/hooks/useCSSVarCls';\nimport useStyle from './style';\nimport PurePanelStyle from './style/pure-panel';\nexport const TypeIcon = {\n  info: /*#__PURE__*/React.createElement(InfoCircleFilled, null),\n  success: /*#__PURE__*/React.createElement(CheckCircleFilled, null),\n  error: /*#__PURE__*/React.createElement(CloseCircleFilled, null),\n  warning: /*#__PURE__*/React.createElement(ExclamationCircleFilled, null),\n  loading: /*#__PURE__*/React.createElement(LoadingOutlined, null)\n};\nexport function getCloseIcon(prefixCls, closeIcon) {\n  if (closeIcon === null || closeIcon === false) {\n    return null;\n  }\n  return closeIcon || /*#__PURE__*/React.createElement(CloseOutlined, {\n    className: `${prefixCls}-close-icon`\n  });\n}\nconst typeToIcon = {\n  success: CheckCircleFilled,\n  info: InfoCircleFilled,\n  error: CloseCircleFilled,\n  warning: ExclamationCircleFilled\n};\nexport const PureContent = props => {\n  const {\n    prefixCls,\n    icon,\n    type,\n    message,\n    description,\n    actions,\n    role = 'alert'\n  } = props;\n  let iconNode = null;\n  if (icon) {\n    iconNode = /*#__PURE__*/React.createElement(\"span\", {\n      className: `${prefixCls}-icon`\n    }, icon);\n  } else if (type) {\n    iconNode = /*#__PURE__*/React.createElement(typeToIcon[type] || null, {\n      className: classNames(`${prefixCls}-icon`, `${prefixCls}-icon-${type}`)\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames({\n      [`${prefixCls}-with-icon`]: iconNode\n    }),\n    role: role\n  }, iconNode, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-message`\n  }, message), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-description`\n  }, description), actions && /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefixCls}-actions`\n  }, actions));\n};\n/** @private Internal Component. Do not use in your production. */\nconst PurePanel = props => {\n  const {\n      prefixCls: staticPrefixCls,\n      className,\n      icon,\n      type,\n      message,\n      description,\n      btn,\n      actions,\n      closable = true,\n      closeIcon,\n      className: notificationClassName\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"className\", \"icon\", \"type\", \"message\", \"description\", \"btn\", \"actions\", \"closable\", \"closeIcon\", \"className\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const mergedActions = actions !== null && actions !== void 0 ? actions : btn;\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Notification');\n    warning.deprecated(!btn, 'btn', 'actions');\n  }\n  const prefixCls = staticPrefixCls || getPrefixCls('notification');\n  const noticePrefixCls = `${prefixCls}-notice`;\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(`${noticePrefixCls}-pure-panel`, hashId, className, cssVarCls, rootCls)\n  }, /*#__PURE__*/React.createElement(PurePanelStyle, {\n    prefixCls: prefixCls\n  }), /*#__PURE__*/React.createElement(Notice, Object.assign({}, restProps, {\n    prefixCls: prefixCls,\n    eventKey: \"pure\",\n    duration: null,\n    closable: closable,\n    className: classNames({\n      notificationClassName\n    }),\n    closeIcon: getCloseIcon(prefixCls, closeIcon),\n    content: /*#__PURE__*/React.createElement(PureContent, {\n      prefixCls: noticePrefixCls,\n      icon: icon,\n      type: type,\n      message: message,\n      description: description,\n      actions: mergedActions\n    })\n  }))));\n};\nexport default PurePanel;","\"use client\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport { NotificationProvider, useNotification as useRcNotification } from 'rc-notification';\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport useCSSVarCls from '../config-provider/hooks/useCSSVarCls';\nimport { useToken } from '../theme/internal';\nimport { getCloseIcon, PureContent } from './PurePanel';\nimport useStyle from './style';\nimport { getMotion, getPlacementStyle, getCloseIconConfig } from './util';\nconst DEFAULT_OFFSET = 24;\nconst DEFAULT_DURATION = 4.5;\nconst DEFAULT_PLACEMENT = 'topRight';\nconst Wrapper = ({\n  children,\n  prefixCls\n}) => {\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  return wrapCSSVar(/*#__PURE__*/React.createElement(NotificationProvider, {\n    classNames: {\n      list: classNames(hashId, cssVarCls, rootCls)\n    }\n  }, children));\n};\nconst renderNotifications = (node, {\n  prefixCls,\n  key\n}) => (/*#__PURE__*/React.createElement(Wrapper, {\n  prefixCls: prefixCls,\n  key: key\n}, node));\nconst Holder = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    top,\n    bottom,\n    prefixCls: staticPrefixCls,\n    getContainer: staticGetContainer,\n    maxCount,\n    rtl,\n    onAllRemoved,\n    stack,\n    duration,\n    pauseOnHover = true,\n    showProgress\n  } = props;\n  const {\n    getPrefixCls,\n    getPopupContainer,\n    notification,\n    direction\n  } = useContext(ConfigContext);\n  const [, token] = useToken();\n  const prefixCls = staticPrefixCls || getPrefixCls('notification');\n  // =============================== Style ===============================\n  const getStyle = placement => getPlacementStyle(placement, top !== null && top !== void 0 ? top : DEFAULT_OFFSET, bottom !== null && bottom !== void 0 ? bottom : DEFAULT_OFFSET);\n  const getClassName = () => classNames({\n    [`${prefixCls}-rtl`]: rtl !== null && rtl !== void 0 ? rtl : direction === 'rtl'\n  });\n  // ============================== Motion ===============================\n  const getNotificationMotion = () => getMotion(prefixCls);\n  // ============================== Origin ===============================\n  const [api, holder] = useRcNotification({\n    prefixCls,\n    style: getStyle,\n    className: getClassName,\n    motion: getNotificationMotion,\n    closable: true,\n    closeIcon: getCloseIcon(prefixCls),\n    duration: duration !== null && duration !== void 0 ? duration : DEFAULT_DURATION,\n    getContainer: () => (staticGetContainer === null || staticGetContainer === void 0 ? void 0 : staticGetContainer()) || (getPopupContainer === null || getPopupContainer === void 0 ? void 0 : getPopupContainer()) || document.body,\n    maxCount,\n    pauseOnHover,\n    showProgress,\n    onAllRemoved,\n    renderNotifications,\n    stack: stack === false ? false : {\n      threshold: typeof stack === 'object' ? stack === null || stack === void 0 ? void 0 : stack.threshold : undefined,\n      offset: 8,\n      gap: token.margin\n    }\n  });\n  // ================================ Ref ================================\n  React.useImperativeHandle(ref, () => Object.assign(Object.assign({}, api), {\n    prefixCls,\n    notification\n  }));\n  return holder;\n});\n// ==============================================================================\n// ==                                   Hook                                   ==\n// ==============================================================================\nexport function useInternalNotification(notificationConfig) {\n  const holderRef = React.useRef(null);\n  const warning = devUseWarning('Notification');\n  // ================================ API ================================\n  const wrapAPI = React.useMemo(() => {\n    // Wrap with notification content\n    // >>> Open\n    const open = config => {\n      var _a;\n      if (!holderRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'usage', 'You are calling notice in render which will break in React 18 concurrent mode. Please trigger in effect instead.') : void 0;\n        return;\n      }\n      const {\n        open: originOpen,\n        prefixCls,\n        notification\n      } = holderRef.current;\n      const noticePrefixCls = `${prefixCls}-notice`;\n      const {\n          message,\n          description,\n          icon,\n          type,\n          btn,\n          actions,\n          className,\n          style,\n          role = 'alert',\n          closeIcon,\n          closable\n        } = config,\n        restConfig = __rest(config, [\"message\", \"description\", \"icon\", \"type\", \"btn\", \"actions\", \"className\", \"style\", \"role\", \"closeIcon\", \"closable\"]);\n      if (process.env.NODE_ENV !== 'production') {\n        warning.deprecated(!btn, 'btn', 'actions');\n      }\n      const mergedActions = actions !== null && actions !== void 0 ? actions : btn;\n      const realCloseIcon = getCloseIcon(noticePrefixCls, getCloseIconConfig(closeIcon, notificationConfig, notification));\n      return originOpen(Object.assign(Object.assign({\n        // use placement from props instead of hard-coding \"topRight\"\n        placement: (_a = notificationConfig === null || notificationConfig === void 0 ? void 0 : notificationConfig.placement) !== null && _a !== void 0 ? _a : DEFAULT_PLACEMENT\n      }, restConfig), {\n        content: (/*#__PURE__*/React.createElement(PureContent, {\n          prefixCls: noticePrefixCls,\n          icon: icon,\n          type: type,\n          message: message,\n          description: description,\n          actions: mergedActions,\n          role: role\n        })),\n        className: classNames(type && `${noticePrefixCls}-${type}`, className, notification === null || notification === void 0 ? void 0 : notification.className),\n        style: Object.assign(Object.assign({}, notification === null || notification === void 0 ? void 0 : notification.style), style),\n        closeIcon: realCloseIcon,\n        closable: closable !== null && closable !== void 0 ? closable : !!realCloseIcon\n      }));\n    };\n    // >>> destroy\n    const destroy = key => {\n      var _a, _b;\n      if (key !== undefined) {\n        (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.close(key);\n      } else {\n        (_b = holderRef.current) === null || _b === void 0 ? void 0 : _b.destroy();\n      }\n    };\n    const clone = {\n      open,\n      destroy\n    };\n    const keys = ['success', 'info', 'warning', 'error'];\n    keys.forEach(type => {\n      clone[type] = config => open(Object.assign(Object.assign({}, config), {\n        type\n      }));\n    });\n    return clone;\n  }, []);\n  // ============================== Return ===============================\n  return [wrapAPI, /*#__PURE__*/React.createElement(Holder, Object.assign({\n    key: \"notification-holder\"\n  }, notificationConfig, {\n    ref: holderRef\n  }))];\n}\nexport default function useNotification(notificationConfig) {\n  return useInternalNotification(notificationConfig);\n}","export function getPlacementStyle(placement, top, bottom) {\n  let style;\n  switch (placement) {\n    case 'top':\n      style = {\n        left: '50%',\n        transform: 'translateX(-50%)',\n        right: 'auto',\n        top,\n        bottom: 'auto'\n      };\n      break;\n    case 'topLeft':\n      style = {\n        left: 0,\n        top,\n        bottom: 'auto'\n      };\n      break;\n    case 'topRight':\n      style = {\n        right: 0,\n        top,\n        bottom: 'auto'\n      };\n      break;\n    case 'bottom':\n      style = {\n        left: '50%',\n        transform: 'translateX(-50%)',\n        right: 'auto',\n        top: 'auto',\n        bottom\n      };\n      break;\n    case 'bottomLeft':\n      style = {\n        left: 0,\n        top: 'auto',\n        bottom\n      };\n      break;\n    default:\n      style = {\n        right: 0,\n        top: 'auto',\n        bottom\n      };\n      break;\n  }\n  return style;\n}\nexport function getMotion(prefixCls) {\n  return {\n    motionName: `${prefixCls}-fade`\n  };\n}\nexport function getCloseIconConfig(closeIcon, notificationConfig, notification) {\n  if (typeof closeIcon !== 'undefined') {\n    return closeIcon;\n  }\n  if (typeof (notificationConfig === null || notificationConfig === void 0 ? void 0 : notificationConfig.closeIcon) !== 'undefined') {\n    return notificationConfig.closeIcon;\n  }\n  return notification === null || notification === void 0 ? void 0 : notification.closeIcon;\n}","\"use client\";\n\nimport React, { useContext } from 'react';\nimport { AppConfigContext } from '../app/context';\nimport ConfigProvider, { ConfigContext, globalConfig, warnContext } from '../config-provider';\nimport { unstableSetRender } from '../config-provider/UnstableContext';\nimport PurePanel from './PurePanel';\nimport useNotification, { useInternalNotification } from './useNotification';\nlet notification = null;\nlet act = callback => callback();\nlet taskQueue = [];\nlet defaultGlobalConfig = {};\nfunction getGlobalContext() {\n  const {\n    getContainer,\n    rtl,\n    maxCount,\n    top,\n    bottom,\n    showProgress,\n    pauseOnHover\n  } = defaultGlobalConfig;\n  const mergedContainer = (getContainer === null || getContainer === void 0 ? void 0 : getContainer()) || document.body;\n  return {\n    getContainer: () => mergedContainer,\n    rtl,\n    maxCount,\n    top,\n    bottom,\n    showProgress,\n    pauseOnHover\n  };\n}\nconst GlobalHolder = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    notificationConfig,\n    sync\n  } = props;\n  const {\n    getPrefixCls\n  } = useContext(ConfigContext);\n  const prefixCls = defaultGlobalConfig.prefixCls || getPrefixCls('notification');\n  const appConfig = useContext(AppConfigContext);\n  const [api, holder] = useInternalNotification(Object.assign(Object.assign(Object.assign({}, notificationConfig), {\n    prefixCls\n  }), appConfig.notification));\n  React.useEffect(sync, []);\n  React.useImperativeHandle(ref, () => {\n    const instance = Object.assign({}, api);\n    Object.keys(instance).forEach(method => {\n      instance[method] = (...args) => {\n        sync();\n        return api[method].apply(api, args);\n      };\n    });\n    return {\n      instance,\n      sync\n    };\n  });\n  return holder;\n});\nconst GlobalHolderWrapper = /*#__PURE__*/React.forwardRef((_, ref) => {\n  const [notificationConfig, setNotificationConfig] = React.useState(getGlobalContext);\n  const sync = () => {\n    setNotificationConfig(getGlobalContext);\n  };\n  React.useEffect(sync, []);\n  const global = globalConfig();\n  const rootPrefixCls = global.getRootPrefixCls();\n  const rootIconPrefixCls = global.getIconPrefixCls();\n  const theme = global.getTheme();\n  const dom = /*#__PURE__*/React.createElement(GlobalHolder, {\n    ref: ref,\n    sync: sync,\n    notificationConfig: notificationConfig\n  });\n  return /*#__PURE__*/React.createElement(ConfigProvider, {\n    prefixCls: rootPrefixCls,\n    iconPrefixCls: rootIconPrefixCls,\n    theme: theme\n  }, global.holderRender ? global.holderRender(dom) : dom);\n});\nfunction flushNotice() {\n  if (!notification) {\n    const holderFragment = document.createDocumentFragment();\n    const newNotification = {\n      fragment: holderFragment\n    };\n    notification = newNotification;\n    // Delay render to avoid sync issue\n    act(() => {\n      const reactRender = unstableSetRender();\n      reactRender(/*#__PURE__*/React.createElement(GlobalHolderWrapper, {\n        ref: node => {\n          const {\n            instance,\n            sync\n          } = node || {};\n          Promise.resolve().then(() => {\n            if (!newNotification.instance && instance) {\n              newNotification.instance = instance;\n              newNotification.sync = sync;\n              flushNotice();\n            }\n          });\n        }\n      }), holderFragment);\n    });\n    return;\n  }\n  // Notification not ready\n  if (!notification.instance) {\n    return;\n  }\n  // >>> Execute task\n  taskQueue.forEach(task => {\n    switch (task.type) {\n      case 'open':\n        {\n          act(() => {\n            notification.instance.open(Object.assign(Object.assign({}, defaultGlobalConfig), task.config));\n          });\n          break;\n        }\n      case 'destroy':\n        act(() => {\n          notification === null || notification === void 0 ? void 0 : notification.instance.destroy(task.key);\n        });\n        break;\n    }\n  });\n  // Clean up\n  taskQueue = [];\n}\n// ==============================================================================\n// ==                                  Export                                  ==\n// ==============================================================================\nfunction setNotificationGlobalConfig(config) {\n  defaultGlobalConfig = Object.assign(Object.assign({}, defaultGlobalConfig), config);\n  // Trigger sync for it\n  act(() => {\n    var _a;\n    (_a = notification === null || notification === void 0 ? void 0 : notification.sync) === null || _a === void 0 ? void 0 : _a.call(notification);\n  });\n}\nfunction open(config) {\n  const global = globalConfig();\n  if (process.env.NODE_ENV !== 'production' && !global.holderRender) {\n    warnContext('notification');\n  }\n  taskQueue.push({\n    type: 'open',\n    config\n  });\n  flushNotice();\n}\nconst destroy = key => {\n  taskQueue.push({\n    type: 'destroy',\n    key\n  });\n  flushNotice();\n};\nconst methods = ['success', 'info', 'warning', 'error'];\nconst baseStaticMethods = {\n  open,\n  destroy,\n  config: setNotificationGlobalConfig,\n  useNotification,\n  _InternalPanelDoNotUseOrYouWillBeFired: PurePanel\n};\nconst staticMethods = baseStaticMethods;\nmethods.forEach(type => {\n  staticMethods[type] = config => open(Object.assign(Object.assign({}, config), {\n    type\n  }));\n});\n// ==============================================================================\n// ==                                   Test                                   ==\n// ==============================================================================\nconst noop = () => {};\n/** @internal Only Work in test env */\nexport let actWrapper = noop;\nif (process.env.NODE_ENV === 'test') {\n  actWrapper = wrapper => {\n    act = wrapper;\n  };\n}\n/** @internal Only Work in test env */\nexport let actDestroy = noop;\nif (process.env.NODE_ENV === 'test') {\n  actDestroy = () => {\n    notification = null;\n  };\n}\nexport default staticMethods;","import {\r\n  PaperAirplaneIcon,\r\n  Cog6ToothIcon,\r\n  ExclamationTriangleIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport * as React from \"react\";\r\nimport { IStatus } from \"../../../types/app\";\r\nimport { Upload, message, Button, Tooltip, notification } from \"antd\";\r\nimport type { UploadFile, UploadProps, RcFile } from \"antd/es/upload/interface\";\r\nimport {\r\n  FileTextIcon,\r\n  ImageIcon,\r\n  Paperclip,\r\n  UploadIcon,\r\n  XIcon,\r\n} from \"lucide-react\";\r\nimport { truncateText } from \"../../../utils/utils\";\r\n\r\n// Maximum file size in bytes (5MB)\r\nconst MAX_FILE_SIZE = 5 * 1024 * 1024;\r\n// Allowed file types\r\nconst ALLOWED_FILE_TYPES = [\r\n  \"text/plain\",\r\n  \"image/jpeg\",\r\n  \"image/png\",\r\n  \"image/gif\",\r\n  \"image/svg+xml\",\r\n];\r\n\r\n// Threshold for large text files (in characters)\r\nconst LARGE_TEXT_THRESHOLD = 1500;\r\n\r\ninterface ChatInputProps {\r\n  onSubmit: (text: string, files: RcFile[]) => void;\r\n  loading: boolean;\r\n  error: IStatus | null;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport default function ChatInput({\r\n  onSubmit,\r\n  loading,\r\n  error,\r\n  disabled = false,\r\n}: ChatInputProps) {\r\n  const textAreaRef = React.useRef<HTMLTextAreaElement>(null);\r\n  const [previousLoading, setPreviousLoading] = React.useState(loading);\r\n  const [text, setText] = React.useState(\"What is the capital of France?\");\r\n  const [fileList, setFileList] = React.useState<UploadFile[]>([]);\r\n  const [dragOver, setDragOver] = React.useState(false);\r\n  const [notificationApi, notificationContextHolder] =\r\n    notification.useNotification();\r\n\r\n  const textAreaDefaultHeight = \"64px\";\r\n  const isInputDisabled = disabled || loading;\r\n\r\n  // Handle textarea auto-resize\r\n  React.useEffect(() => {\r\n    if (textAreaRef.current) {\r\n      // Temporarily set height to auto to get proper scrollHeight\r\n      textAreaRef.current.style.height = \"auto\";\r\n      // Then set to the scroll height\r\n      const scrollHeight = textAreaRef.current.scrollHeight;\r\n      textAreaRef.current.style.height = `${scrollHeight}px`;\r\n    }\r\n  }, [text]);\r\n\r\n  // Clear input when loading changes from true to false (meaning the response is complete)\r\n  React.useEffect(() => {\r\n    if (previousLoading && !loading && !error) {\r\n      resetInput();\r\n    }\r\n    setPreviousLoading(loading);\r\n  }, [loading, error, previousLoading]);\r\n\r\n  // Add paste event listener\r\n  React.useEffect(() => {\r\n    const handlePaste = (e: ClipboardEvent) => {\r\n      if (isInputDisabled) return;\r\n\r\n      // Handle image paste\r\n      if (e.clipboardData?.items) {\r\n        let hasImageItem = false;\r\n\r\n        for (let i = 0; i < e.clipboardData.items.length; i++) {\r\n          const item = e.clipboardData.items[i];\r\n\r\n          // Handle image items\r\n          if (item.type.indexOf(\"image/\") === 0) {\r\n            hasImageItem = true;\r\n            const file = item.getAsFile();\r\n\r\n            if (file && file.size <= MAX_FILE_SIZE) {\r\n              // Prevent the default paste behavior for images\r\n              e.preventDefault();\r\n\r\n              // Create a unique file name\r\n              const fileName = `pasted-image-${new Date().getTime()}.png`;\r\n\r\n              // Create a new File with a proper name\r\n              const namedFile = new File([file], fileName, { type: file.type });\r\n\r\n              // Convert to the expected UploadFile format\r\n              const uploadFile: UploadFile = {\r\n                uid: `paste-${Date.now()}`,\r\n                name: fileName,\r\n                status: \"done\",\r\n                size: namedFile.size,\r\n                type: namedFile.type,\r\n                originFileObj: namedFile as RcFile,\r\n              };\r\n\r\n              // Add to file list\r\n              setFileList((prev) => [...prev, uploadFile]);\r\n\r\n              // Show successful paste notification\r\n              message.success(`Image pasted successfully`);\r\n            } else if (file && file.size > MAX_FILE_SIZE) {\r\n              message.error(`Pasted image is too large. Maximum size is 5MB.`);\r\n            }\r\n          }\r\n\r\n          // Handle text items - only if there's a large amount of text\r\n          if (item.type === \"text/plain\" && !hasImageItem) {\r\n            item.getAsString((text) => {\r\n              // Only process for large text\r\n              if (text.length > LARGE_TEXT_THRESHOLD) {\r\n                // We need to prevent the default paste behavior\r\n                // But since we're in an async callback, we need to\r\n                // manually clear the textarea's selection value\r\n                setTimeout(() => {\r\n                  if (textAreaRef.current) {\r\n                    const currentValue = textAreaRef.current.value;\r\n                    const selectionStart =\r\n                      textAreaRef.current.selectionStart || 0;\r\n                    const selectionEnd = textAreaRef.current.selectionEnd || 0;\r\n\r\n                    // Remove the pasted text from the textarea\r\n                    const newValue =\r\n                      currentValue.substring(0, selectionStart - text.length) +\r\n                      currentValue.substring(selectionEnd);\r\n\r\n                    // Update the textarea\r\n                    textAreaRef.current.value = newValue;\r\n                    // Trigger the onChange event manually\r\n                    setText(newValue);\r\n                  }\r\n                }, 0);\r\n\r\n                // Prevent default paste for large text\r\n                e.preventDefault();\r\n\r\n                // Create a text file from the pasted content\r\n                const blob = new Blob([text], { type: \"text/plain\" });\r\n                const file = new File(\r\n                  [blob],\r\n                  `pasted-text-${new Date().getTime()}.txt`,\r\n                  { type: \"text/plain\" }\r\n                );\r\n\r\n                // Add to file list\r\n                const uploadFile: UploadFile = {\r\n                  uid: `paste-${Date.now()}`,\r\n                  name: file.name,\r\n                  status: \"done\",\r\n                  size: file.size,\r\n                  type: file.type,\r\n                  originFileObj: file as RcFile,\r\n                };\r\n\r\n                setFileList((prev) => [...prev, uploadFile]);\r\n\r\n                // Notify user about the conversion\r\n                notificationApi.info({\r\n                  message: (\r\n                    <span className=\"text-sm\">\r\n                      Large Text Converted to File\r\n                    </span>\r\n                  ),\r\n                  description: (\r\n                    <span className=\"text-sm text-secondary\">\r\n                      Your pasted text has been attached as a file.\r\n                    </span>\r\n                  ),\r\n                  duration: 3,\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Add the paste event listener to the document\r\n    document.addEventListener(\"paste\", handlePaste);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      document.removeEventListener(\"paste\", handlePaste);\r\n    };\r\n  }, [isInputDisabled, notificationApi]);\r\n\r\n  const resetInput = () => {\r\n    if (textAreaRef.current) {\r\n      textAreaRef.current.value = \"\";\r\n      textAreaRef.current.style.height = textAreaDefaultHeight;\r\n      setText(\"\");\r\n      setFileList([]);\r\n    }\r\n  };\r\n\r\n  const handleTextChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setText(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (\r\n      (textAreaRef.current?.value || fileList.length > 0) &&\r\n      !isInputDisabled\r\n    ) {\r\n      const query = textAreaRef.current?.value || \"\";\r\n\r\n      // Get all valid RcFile objects\r\n      const files = fileList\r\n        .filter((file) => file.originFileObj)\r\n        .map((file) => file.originFileObj as RcFile);\r\n\r\n      onSubmit(query, files);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n    if (event.key === \"Enter\" && !event.shiftKey) {\r\n      event.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  const uploadProps: UploadProps = {\r\n    name: \"file\",\r\n    multiple: true,\r\n    fileList,\r\n    beforeUpload: (file) => {\r\n      // Check file size\r\n      if (file.size > MAX_FILE_SIZE) {\r\n        message.error(`${file.name} is too large. Maximum size is 5MB.`);\r\n        return Upload.LIST_IGNORE;\r\n      }\r\n\r\n      // Check file type\r\n      if (!ALLOWED_FILE_TYPES.includes(file.type)) {\r\n        notificationApi.warning({\r\n          message: <span className=\"text-sm\">Unsupported File Type</span>,\r\n          description: (\r\n            <span className=\"text-sm text-secondary\">\r\n              Please upload only text (.txt) or images (.jpg, .png, .gif, .svg)\r\n              files.\r\n            </span>\r\n          ),\r\n          showProgress: true,\r\n          duration: 8.5,\r\n        });\r\n        return Upload.LIST_IGNORE;\r\n      }\r\n\r\n      // Correctly set the uploadFile with originFileObj property\r\n      const uploadFile: UploadFile = {\r\n        uid: file.uid,\r\n        name: file.name,\r\n        status: \"done\",\r\n        size: file.size,\r\n        type: file.type,\r\n        originFileObj: file,\r\n      };\r\n\r\n      setFileList((prev) => [...prev, uploadFile]);\r\n      return false; // Prevent automatic upload\r\n    },\r\n    onRemove: (file) => {\r\n      setFileList(fileList.filter((item) => item.uid !== file.uid));\r\n    },\r\n    showUploadList: false, // We'll handle our own custom file preview\r\n    customRequest: ({ onSuccess }) => {\r\n      // Mock successful upload since we're not actually uploading anywhere yet\r\n      if (onSuccess) onSuccess(\"ok\");\r\n    },\r\n  };\r\n\r\n  const getFileIcon = (file: UploadFile) => {\r\n    const fileType = file.type || \"\";\r\n    if (fileType.startsWith(\"image/\")) {\r\n      return <ImageIcon className=\"w-4 h-4\" />;\r\n    }\r\n    return <FileTextIcon className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  // Add these new event handler functions to the component\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (!isInputDisabled) {\r\n      setDragOver(true);\r\n    }\r\n  };\r\n\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragOver(false);\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragOver(false);\r\n\r\n    if (isInputDisabled) return;\r\n\r\n    const droppedFiles = Array.from(e.dataTransfer.files);\r\n\r\n    droppedFiles.forEach((file) => {\r\n      // Check file size\r\n      if (file.size > MAX_FILE_SIZE) {\r\n        message.error(`${file.name} is too large. Maximum size is 5MB.`);\r\n        return;\r\n      }\r\n\r\n      // Check file type\r\n      if (!ALLOWED_FILE_TYPES.includes(file.type)) {\r\n        notificationApi.warning({\r\n          message: <span className=\"text-sm\">Unsupported File Type</span>,\r\n          description: (\r\n            <span className=\"text-sm text-secondary\">\r\n              Please upload only text (.txt) or images (.jpg, .png, .gif, .svg)\r\n              files.\r\n            </span>\r\n          ),\r\n          showProgress: true,\r\n          duration: 8.5,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Add to file list\r\n      const uploadFile: UploadFile = {\r\n        uid: `file-${Date.now()}-${file.name}`,\r\n        name: file.name,\r\n        status: \"done\",\r\n        size: file.size,\r\n        type: file.type,\r\n        originFileObj: file as RcFile,\r\n      };\r\n\r\n      setFileList((prev) => [...prev, uploadFile]);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-2 w-full\">\r\n      {notificationContextHolder}\r\n      {/* File previews */}\r\n      {fileList.length > 0 && (\r\n        <div className=\"-mb-2 mx-1 bg-tertiary rounded-t border-b-0 p-2 flex bodrder flex-wrap gap-2\">\r\n          {fileList.map((file) => (\r\n            <div\r\n              key={file.uid}\r\n              className=\"flex items-center gap-1 bg-secondary rounded px-2 py-1 text-xs\"\r\n            >\r\n              {getFileIcon(file)}\r\n              <span className=\"truncate max-w-[150px]\">\r\n                {truncateText(file.name, 20)}\r\n              </span>\r\n              <Button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                className=\"p-0 ml-1 flex items-center justify-center\"\r\n                onClick={() =>\r\n                  setFileList((prev) => prev.filter((f) => f.uid !== file.uid))\r\n                }\r\n                icon={<XIcon className=\"w-3 h-3\" />}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div\r\n        className={`mt-2 rounded shadow-sm flex mb-1 transition-all duration-200 ${\r\n          dragOver ? \"ring-2 ring-blue-400\" : \"\"\r\n        } ${isInputDisabled ? \"opacity-50\" : \"\"}`}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n      >\r\n        <form\r\n          className=\"flex-1 relative\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            handleSubmit();\r\n          }}\r\n        >\r\n          {dragOver && (\r\n            <div className=\"absolute inset-0 bg-blue-100 bg-opacity-60 flex items-center justify-center rounded z-10 pointer-events-none\">\r\n              <div className=\"text-accent tex-xs   items-center\">\r\n                <UploadIcon className=\"h-4 w-4 mr-2  inline-block\" />\r\n                <span className=\"text-xs  inline-block\">Drop files here</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <textarea\r\n            id=\"queryInput\"\r\n            name=\"queryInput\"\r\n            ref={textAreaRef}\r\n            value={text}\r\n            onChange={handleTextChange}\r\n            onKeyDown={handleKeyDown}\r\n            className={`flex items-center w-full resize-none text-gray-600 rounded ${\r\n              dragOver\r\n                ? \"border-2 border-blue-500 bg-blue-50\"\r\n                : \"border border-accent bg-white\"\r\n            } p-2 pl-5 pr-16 ${isInputDisabled ? \"cursor-not-allowed\" : \"\"}`}\r\n            style={{\r\n              maxHeight: \"120px\",\r\n              overflowY: \"auto\",\r\n              minHeight: \"50px\",\r\n              transition: \"all 0.2s ease-in-out\",\r\n            }}\r\n            placeholder={\r\n              dragOver ? \"Drop files here...\" : \"Type your message here...\"\r\n            }\r\n            disabled={isInputDisabled}\r\n          />\r\n          <div className={`absolute right-3 bottom-2 flex gap-2`}>\r\n            <div\r\n              className={`   ${\r\n                disabled || isInputDisabled\r\n                  ? \"  opacity-50 pointer-events-none \"\r\n                  : \"\"\r\n              }`}\r\n            >\r\n              {\" \"}\r\n              <Upload className=\"zero-padding-upload  \" {...uploadProps}>\r\n                <Tooltip\r\n                  title=<span className=\"text-sm\">\r\n                    Upload File{\" \"}\r\n                    <span className=\"text-secondary text-xs\">(max 5mb)</span>\r\n                  </span>\r\n                  placement=\"top\"\r\n                >\r\n                  <Button type=\"text\" disabled={isInputDisabled} className=\" \">\r\n                    <UploadIcon\r\n                      strokeWidth={2}\r\n                      size={26}\r\n                      className=\"p-1 inline-block w-8 text-accent\"\r\n                    />\r\n                  </Button>\r\n                </Tooltip>\r\n              </Upload>\r\n            </div>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSubmit}\r\n              disabled={\r\n                isInputDisabled || (text.trim() === \"\" && fileList.length === 0)\r\n              }\r\n              className={`bg-accent transition duration-300 rounded flex justify-center items-center w-11 h-9 ${\r\n                isInputDisabled || (text.trim() === \"\" && fileList.length === 0)\r\n                  ? \"cursor-not-allowed opacity-50\"\r\n                  : \"hover:brightness-75\"\r\n              }`}\r\n            >\r\n              {loading ? (\r\n                <Cog6ToothIcon className=\"text-white animate-spin rounded-full h-6 w-6\" />\r\n              ) : (\r\n                <PaperAirplaneIcon className=\"h-6 w-6 text-white\" />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {error && !error.status && (\r\n        <div className=\"p-2 border rounded mt-4 text-orange-500 text-sm\">\r\n          <ExclamationTriangleIcon className=\"h-5 text-orange-500 inline-block mr-2\" />\r\n          {error.message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleStop = createLucideIcon(\"CircleStop\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"rect\", { x: \"9\", y: \"9\", width: \"6\", height: \"6\", rx: \"1\", key: \"1ssd4o\" }]\n]);\n\nexport { CircleStop as default };\n//# sourceMappingURL=circle-stop.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pause = createLucideIcon(\"Pause\", [\n  [\"rect\", { x: \"14\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"zuxfzm\" }],\n  [\"rect\", { x: \"6\", y: \"4\", width: \"4\", height: \"16\", rx: \"1\", key: \"1okwgv\" }]\n]);\n\nexport { Pause as default };\n//# sourceMappingURL=pause.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PanelRightOpen = createLucideIcon(\"PanelRightOpen\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M15 3v18\", key: \"14nvp0\" }],\n  [\"path\", { d: \"m10 15-3-3 3-3\", key: \"1pgupc\" }]\n]);\n\nexport { PanelRightOpen as default };\n//# sourceMappingURL=panel-right-open.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PanelRightClose = createLucideIcon(\"PanelRightClose\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M15 3v18\", key: \"14nvp0\" }],\n  [\"path\", { d: \"m8 9 3 3-3 3\", key: \"12hl5m\" }]\n]);\n\nexport { PanelRightClose as default };\n//# sourceMappingURL=panel-right-close.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleUser = createLucideIcon(\"CircleUser\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }],\n  [\"path\", { d: \"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662\", key: \"154egf\" }]\n]);\n\nexport { CircleUser as default };\n//# sourceMappingURL=circle-user.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flag = createLucideIcon(\"Flag\", [\n  [\"path\", { d: \"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\", key: \"i9b6wo\" }],\n  [\"line\", { x1: \"4\", x2: \"4\", y1: \"22\", y2: \"15\", key: \"1cm3nv\" }]\n]);\n\nexport { Flag as default };\n//# sourceMappingURL=flag.js.map\n","import React, { useCallback } from \"react\";\r\nimport { Handle, Position } from \"@xyflow/react\";\r\nimport {\r\n  CheckCircle,\r\n  AlertTriangle,\r\n  StopCircle,\r\n  UserCircle,\r\n  Bot,\r\n  Flag,\r\n} from \"lucide-react\";\r\nimport { RunStatus } from \"../../../../types/datamodel\";\r\n\r\nexport type NodeType = \"agent\" | \"user\" | \"end\";\r\n\r\nexport interface AgentNodeData {\r\n  type: NodeType;\r\n  label: string;\r\n  agentType?: string;\r\n  description?: string;\r\n  isActive?: boolean;\r\n  status?: RunStatus | null;\r\n  reason?: string | null;\r\n  draggable: boolean;\r\n}\r\n\r\ninterface AgentNodeProps {\r\n  data: AgentNodeData;\r\n  isConnectable: boolean;\r\n}\r\n\r\nfunction AgentNode({ data, isConnectable }: AgentNodeProps) {\r\n  const handleClick = useCallback(() => {\r\n    if (data.type !== \"end\") {\r\n      console.log(`${data.type} ${data.label} clicked`);\r\n    }\r\n  }, [data.type, data.label]);\r\n\r\n  const getHeaderIcon = () => {\r\n    switch (data.type) {\r\n      case \"user\":\r\n        return <UserCircle className=\"text-primary\" size={20} />;\r\n      case \"agent\":\r\n        return <Bot className=\"text-primary\" size={20} />;\r\n      case \"end\":\r\n        return <Flag className=\"text-primary\" size={20} />;\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (data.type !== \"end\" || !data.status) return null;\r\n\r\n    switch (data.status) {\r\n      case \"complete\":\r\n        return <CheckCircle className=\"text-accent\" size={24} />;\r\n      case \"error\":\r\n        return <AlertTriangle className=\"text-red-500\" size={24} />;\r\n      case \"stopped\":\r\n        return <StopCircle className=\"text-red-500\" size={24} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getNodeStyles = () => {\r\n    const activeStyles = data.isActive ? \"ring-2 ring-accent/50 \" : \"  \";\r\n\r\n    if (data.type === \"end\") {\r\n      return {\r\n        wrapper: `relative min-w-[180px] shadow rounded-lg overflow-hidden  ${activeStyles}`,\r\n        border:\r\n          data.status === \"complete\"\r\n            ? \"var(--accent)\"\r\n            : data.status === \"error\"\r\n            ? \"rgb(239 68 68)\"\r\n            : \"var(--secondary)\",\r\n      };\r\n    }\r\n\r\n    return {\r\n      wrapper: `min-w-[180px] rounded-lg shadow overflow-hidden ${activeStyles}`,\r\n      border: undefined,\r\n    };\r\n  };\r\n\r\n  const styles = getNodeStyles();\r\n\r\n  return (\r\n    <div\r\n      className={styles.wrapper}\r\n      onClick={handleClick}\r\n      style={styles.border ? { borderColor: styles.border } : undefined}\r\n    >\r\n      {/* Input handle - always show for all nodes */}\r\n      <Handle\r\n        type=\"target\"\r\n        position={Position.Top}\r\n        style={{ background: \"#555\" }}\r\n        isConnectable={isConnectable}\r\n        id=\"target\"\r\n      />\r\n\r\n      {/* Header Section */}\r\n      <div className=\"flex agent-draghandle items-center gap-2 px-3 py-2 bg-secondary border-b border-border\">\r\n        {getHeaderIcon()}\r\n        <span className=\"text-sm font-medium text-primary truncate\">\r\n          {data.label}\r\n        </span>\r\n      </div>\r\n\r\n      {/* Content Section */}\r\n      <div className=\"bg-tertiary px-3 py-2\">\r\n        {data.type === \"end\" ? (\r\n          <>\r\n            <div className=\"flex items-center justify-center gap-2\">\r\n              {getStatusIcon()}\r\n              <span className=\"text-primary text-sm font-medium\">\r\n                {data.status &&\r\n                  data.status.charAt(0).toUpperCase() + data.status.slice(1)}\r\n              </span>\r\n            </div>\r\n            {data.reason && (\r\n              <div className=\"mt-1 text-xs text-secondary max-w-[200px] text-center\">\r\n                {data.reason.length > 100\r\n                  ? `${data.reason.substring(0, 97)}...`\r\n                  : data.reason}\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <>\r\n            {data.agentType && (\r\n              <div className=\"text-sm text-secondary\">{data.agentType}</div>\r\n            )}\r\n            {data.description && (\r\n              <div className=\"text-xs text-secondary mt-1 truncate max-w-[200px]\">\r\n                {data.description}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Output handle - only for non-end nodes */}\r\n      {data.type !== \"end\" && (\r\n        <Handle\r\n          type=\"source\"\r\n          position={Position.Bottom}\r\n          id=\"source\"\r\n          style={{ background: \"#555\" }}\r\n          isConnectable={isConnectable}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AgentNode;\r\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDown = createLucideIcon(\"ArrowDown\", [\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }],\n  [\"path\", { d: \"m19 12-7 7-7-7\", key: \"1idqje\" }]\n]);\n\nexport { ArrowDown as default };\n//# sourceMappingURL=arrow-down.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquareOff = createLucideIcon(\"MessageSquareOff\", [\n  [\"path\", { d: \"M21 15V5a2 2 0 0 0-2-2H9\", key: \"43el77\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }],\n  [\"path\", { d: \"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10\", key: \"pwpm4a\" }]\n]);\n\nexport { MessageSquareOff as default };\n//# sourceMappingURL=message-square-off.js.map\n","import React from \"react\";\r\nimport { Button, Tooltip, Dropdown } from \"antd\";\r\nimport type { MenuProps } from \"antd\";\r\nimport {\r\n  Maximize2,\r\n  Minimize2,\r\n  ArrowDown,\r\n  ArrowRight,\r\n  MessageSquareIcon,\r\n  MessageSquareOffIcon,\r\n  MoreHorizontal,\r\n  Grid,\r\n  Hash,\r\n  MessageSquare,\r\n  LayoutGrid,\r\n  RotateCcw,\r\n  MapIcon,\r\n} from \"lucide-react\";\r\nimport { useConfigStore } from \"../../../../../hooks/store\";\r\n\r\ninterface AgentFlowToolbarProps {\r\n  isFullscreen: boolean;\r\n  onToggleFullscreen: () => void;\r\n  onResetView?: () => void;\r\n}\r\n\r\nexport const AgentFlowToolbar: React.FC<AgentFlowToolbarProps> = ({\r\n  isFullscreen,\r\n  onToggleFullscreen,\r\n  onResetView,\r\n}) => {\r\n  const { agentFlow: settings, setAgentFlowSettings } = useConfigStore();\r\n\r\n  const toggleSetting = (setting: keyof typeof settings) => () => {\r\n    setAgentFlowSettings({\r\n      [setting]: !settings[setting],\r\n    });\r\n  };\r\n\r\n  const menuItems: MenuProps[\"items\"] = [\r\n    {\r\n      key: \"grid\",\r\n      label: \"Show Grid\",\r\n      icon: <Grid size={16} />,\r\n      onClick: toggleSetting(\"showGrid\"),\r\n    },\r\n    {\r\n      key: \"tokens\",\r\n      label: \"Show Tokens\",\r\n      icon: <Hash size={16} />,\r\n      onClick: toggleSetting(\"showTokens\"),\r\n    },\r\n    // {\r\n    //   key: \"messages\",\r\n    //   label: \"Show Messages\",\r\n    //   icon: <MessageSquare size={16} />,\r\n    //   onClick: toggleSetting(\"showMessages\"),\r\n    // },\r\n    {\r\n      key: \"miniMap\",\r\n      label: \"Mini Map\",\r\n      icon: <MapIcon size={16} />,\r\n      onClick: toggleSetting(\"showMiniMap\"),\r\n    },\r\n    {\r\n      type: \"divider\",\r\n    },\r\n    {\r\n      key: \"reset\",\r\n      label: \"Reset View\",\r\n      icon: <RotateCcw size={16} />,\r\n      onClick: onResetView,\r\n      disabled: !onResetView,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"absolute top-2 right-2 bg-secondary bg-opacity-70 hover:bg-secondary rounded backdrop-blur-sm z-50\">\r\n      <div className=\"p-1 flex items-center gap-1\">\r\n        <Tooltip title={isFullscreen ? \"Exit Fullscreen\" : \"Enter Fullscreen\"}>\r\n          <Button\r\n            type=\"text\"\r\n            icon={\r\n              isFullscreen ? <Minimize2 size={18} /> : <Maximize2 size={18} />\r\n            }\r\n            className=\"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary\"\r\n            onClick={onToggleFullscreen}\r\n          />\r\n        </Tooltip>\r\n\r\n        <Tooltip\r\n          title={`Switch to ${\r\n            settings.direction === \"TB\" ? \"Horizontal\" : \"Vertical\"\r\n          } Layout`}\r\n        >\r\n          <Button\r\n            type=\"text\"\r\n            icon={\r\n              settings.direction === \"TB\" ? (\r\n                <ArrowDown size={18} />\r\n              ) : (\r\n                <ArrowRight size={18} />\r\n              )\r\n            }\r\n            className=\"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary\"\r\n            onClick={() =>\r\n              setAgentFlowSettings({\r\n                direction: settings.direction === \"TB\" ? \"LR\" : \"TB\",\r\n              })\r\n            }\r\n          />\r\n        </Tooltip>\r\n\r\n        <Tooltip title={settings.showLabels ? \"Hide Labels\" : \"Show Labels\"}>\r\n          <Button\r\n            type=\"text\"\r\n            icon={\r\n              settings.showLabels ? (\r\n                <MessageSquareIcon size={18} />\r\n              ) : (\r\n                <MessageSquareOffIcon size={18} />\r\n              )\r\n            }\r\n            className=\"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary\"\r\n            onClick={toggleSetting(\"showLabels\")}\r\n          />\r\n        </Tooltip>\r\n\r\n        <Dropdown\r\n          menu={{ items: menuItems }}\r\n          trigger={[\"click\"]}\r\n          getPopupContainer={(triggerNode) =>\r\n            triggerNode.parentNode as HTMLElement\r\n          }\r\n          overlayStyle={{ zIndex: 1000 }}\r\n        >\r\n          <Button\r\n            type=\"text\"\r\n            icon={<MoreHorizontal size={18} />}\r\n            className=\"p-1.5 hover:bg-primary/10 rounded-md text-primary/75 hover:text-primary\"\r\n            title=\"More Options\" // Use native title instead of Tooltip\r\n          />\r\n        </Dropdown>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DraftingCompass = createLucideIcon(\"DraftingCompass\", [\n  [\"path\", { d: \"m12.99 6.74 1.93 3.44\", key: \"iwagvd\" }],\n  [\"path\", { d: \"M19.136 12a10 10 0 0 1-14.271 0\", key: \"ppmlo4\" }],\n  [\"path\", { d: \"m21 21-2.16-3.84\", key: \"vylbct\" }],\n  [\"path\", { d: \"m3 21 8.02-14.26\", key: \"1ssaw4\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"2\", key: \"f1ur92\" }]\n]);\n\nexport { DraftingCompass as default };\n//# sourceMappingURL=drafting-compass.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"Bug\", [\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1\", key: \"d7y7pr\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6\",\n      key: \"xs1cw7\"\n    }\n  ],\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M6.53 9C4.6 8.8 3 7.1 3 5\", key: \"32zzws\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"M3 21c0-2.1 1.7-3.9 3.8-4\", key: \"4p0ekp\" }],\n  [\"path\", { d: \"M20.97 5c0 2.1-1.6 3.8-3.5 4\", key: \"18gb23\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M17.2 17c2.1.1 3.8 1.9 3.8 4\", key: \"k3fwyw\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","import React, { useMemo, useState } from \"react\";\r\nimport { Terminal, Maximize2, X } from \"lucide-react\";\r\nimport { TruncatableText } from \"../../atoms\";\r\nimport { Tooltip } from \"antd\";\r\n\r\ninterface LLMLogEvent {\r\n  type: \"LLMCall\";\r\n  messages: {\r\n    content: string;\r\n    role: string;\r\n    name?: string;\r\n  }[];\r\n  response: {\r\n    id: string;\r\n    choices: {\r\n      message: {\r\n        content: string;\r\n        role: string;\r\n      };\r\n    }[];\r\n    usage: {\r\n      completion_tokens: number;\r\n      prompt_tokens: number;\r\n      total_tokens: number;\r\n    };\r\n    model: string;\r\n  };\r\n  prompt_tokens: number;\r\n  completion_tokens: number;\r\n  agent_id: string;\r\n}\r\n\r\ninterface LLMLogRendererProps {\r\n  content: string;\r\n}\r\n\r\nconst formatTokens = (tokens: number) => {\r\n  return tokens >= 1000 ? `${(tokens / 1000).toFixed(1)}k` : tokens;\r\n};\r\n\r\nconst FullLogView = ({\r\n  event,\r\n  onClose,\r\n}: {\r\n  event: LLMLogEvent;\r\n  onClose: () => void;\r\n}) => (\r\n  <div\r\n    className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center transition-opacity duration-300\"\r\n    onClick={onClose}\r\n  >\r\n    <div\r\n      className=\"relative bg-primary w-full h-full md:w-4/5 md:h-4/5 md:rounded-lg p-8 overflow-auto\"\r\n      style={{ opacity: 0.95 }}\r\n      onClick={(e) => e.stopPropagation()}\r\n    >\r\n      <Tooltip title=\"Close\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute top-4 right-4 p-2 rounded-full bg-tertiary hover:bg-secondary text-primary transition-colors\"\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n      </Tooltip>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <Terminal size={20} className=\"text-accent\" />\r\n          <h3 className=\"text-lg font-medium\">LLM Call Details</h3>\r\n          <h4 className=\"text-sm text-secondary\">\r\n            {event.agent_id.split(\"/\")[0]}  {event.response.model} {\" \"}\r\n            {formatTokens(event.response.usage.total_tokens)} tokens\r\n          </h4>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <h4 className=\"text-sm font-medium\">Messages</h4>\r\n          {event.messages.map((msg, idx) => (\r\n            <div key={idx} className=\"p-4 bg-tertiary rounded-lg\">\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-xs font-medium uppercase text-secondary\">\r\n                  {(msg.name && `${msg.name}`) || msg.role}{\" \"}\r\n                </span>\r\n              </div>\r\n              {Array.isArray(msg.content) ? (\r\n                msg.content.map((item, index) => (\r\n                  <div key={index} className=\"text-sm text-secondary\">\r\n                    <TruncatableText content={item} showFullscreen={false} />\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <TruncatableText content={msg.content} showFullscreen={false} />\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {event.response.choices && (\r\n          <div className=\"space-y-2\">\r\n            <h4 className=\"text-sm font-medium\">Response</h4>\r\n            <div className=\"p-4 bg-tertiary rounded-lg\">\r\n              <TruncatableText\r\n                content={event.response?.choices[0]?.message.content}\r\n                textThreshold={1000}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\r\n          <div className=\"p-3 bg-tertiary rounded-lg\">\r\n            <div className=\"text-xs text-secondary mb-1\">Model</div>\r\n            <div className=\"font-medium\">{event.response.model}</div>\r\n          </div>\r\n          <div className=\"p-3 bg-tertiary rounded-lg\">\r\n            <div className=\"text-xs text-secondary mb-1\">Prompt Tokens</div>\r\n            <div className=\"font-medium\">\r\n              {event.response.usage.prompt_tokens}\r\n            </div>\r\n          </div>\r\n          <div className=\"p-3 bg-tertiary rounded-lg\">\r\n            <div className=\"text-xs text-secondary mb-1\">Completion Tokens</div>\r\n            <div className=\"font-medium\">\r\n              {event.response.usage.completion_tokens}\r\n            </div>\r\n          </div>\r\n          <div className=\"p-3 bg-tertiary rounded-lg\">\r\n            <div className=\"text-xs text-secondary mb-1\">Total Tokens</div>\r\n            <div className=\"font-medium\">\r\n              {event.response.usage.total_tokens}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst LLMLogRenderer: React.FC<LLMLogRendererProps> = ({ content }) => {\r\n  const [showFullLog, setShowFullLog] = useState(false);\r\n\r\n  const parsedContent = useMemo(() => {\r\n    try {\r\n      return JSON.parse(content) as LLMLogEvent;\r\n    } catch (e) {\r\n      console.error(\"Failed to parse LLM log content:\", e);\r\n      return null;\r\n    }\r\n  }, [content]);\r\n\r\n  // console.log(parsedContent);\r\n\r\n  if (!parsedContent) {\r\n    return (\r\n      <div className=\"flex items-center gap-2 text-red-500 p-2 bg-red-500/10 rounded\">\r\n        <Terminal size={16} />\r\n        <span>Invalid log format</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { messages, response, agent_id } = parsedContent;\r\n  const agentName = messages[0]?.name || \"Agent\";\r\n  const totalTokens = response.usage.total_tokens;\r\n  const shortAgentId = agent_id ? `${agent_id.split(\"/\")[0]}` : \"\";\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex items-center gap-2 py-2   bg-secondary/20 rounded-lg text-sm text-secondary hover:text-primary transition-colors group\">\r\n        <Terminal size={14} className=\"text-accent\" />\r\n        <span className=\"flex-1\">\r\n          {shortAgentId ? `${shortAgentId}` : \"\"}  {response.model} {\" \"}\r\n          {formatTokens(totalTokens)} tokens\r\n        </span>\r\n        <Tooltip title=\"View details\">\r\n          <button\r\n            onClick={() => setShowFullLog(true)}\r\n            className=\"p-1 mr-1 hover:bg-secondary rounded-md transition-colors\"\r\n          >\r\n            <Maximize2 size={14} className=\"group-hover:text-accent\" />\r\n          </button>\r\n        </Tooltip>\r\n      </div>\r\n\r\n      {showFullLog && (\r\n        <FullLogView\r\n          event={parsedContent}\r\n          onClose={() => setShowFullLog(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LLMLogRenderer;\r\n","import React, { useState } from \"react\";\r\nimport { User, Bot, DraftingCompass, Bug, ChevronDown } from \"lucide-react\";\r\nimport {\r\n  AgentMessageConfig,\r\n  FunctionCall,\r\n  FunctionExecutionResult,\r\n  ImageContent,\r\n} from \"../../../types/datamodel\";\r\nimport { ClickableImage, TruncatableText } from \"../../atoms\";\r\nimport LLMLogRenderer from \"./logrenderer\";\r\n\r\nconst TEXT_THRESHOLD = 400;\r\nconst JSON_THRESHOLD = 800;\r\n\r\n// Helper function to get image source from either format\r\nconst getImageSource = (item: ImageContent): string => {\r\n  if (item.url) {\r\n    return item.url;\r\n  }\r\n  if (item.data) {\r\n    // Assume PNG if no type specified - we can enhance this later if needed\r\n    return `data:image/png;base64,${item.data}`;\r\n  }\r\n  // Fallback placeholder if neither url nor data is present\r\n  return \"/api/placeholder/400/320\";\r\n};\r\n\r\nconst RenderMultiModal: React.FC<{\r\n  content: (string | ImageContent)[];\r\n  thumbnail?: boolean;\r\n}> = ({ content, thumbnail = false }) => {\r\n  // Separate text and images\r\n  const texts = content.filter((item) => typeof item === \"string\") as string[];\r\n  const images = content.filter(\r\n    (item) => typeof item === \"object\" && item !== null\r\n  ) as ImageContent[];\r\n\r\n  // Use the larger of the two for navigation\r\n  const maxLen = Math.max(texts.length, images.length);\r\n  const [current, setCurrent] = useState(0);\r\n\r\n  const showPrev = () => setCurrent((c) => Math.max(0, c - 1));\r\n  const showNext = () => setCurrent((c) => Math.min(maxLen - 1, c + 1));\r\n\r\n  const currentText = texts[current] ?? texts[0] ?? \"\";\r\n  const currentImage = images[current] ?? images[0];\r\n\r\n  return (\r\n    <div className=\"flex gap-4 items-stretch relative\">\r\n      {/* Text on the left, aligned to top */}\r\n      <div className=\"flex-1 min-w-0 flex items-start\">\r\n        {currentText && (\r\n          <TruncatableText\r\n            content={currentText.slice(0, 500)}\r\n            className=\"break-all\"\r\n          />\r\n        )}\r\n      </div>\r\n      {/* Image on the right */}\r\n      <div className=\"flex-1 flex justify-center items-center relative\">\r\n        {currentImage && (\r\n          <ClickableImage\r\n            src={getImageSource(currentImage)}\r\n            alt={currentImage.alt || \"Image\"}\r\n            className={`rounded border border-secondary max-h-96 w-auto max-w-full object-contain ${\r\n              thumbnail ? \"w-24 h-24\" : \"\"\r\n            }`}\r\n          />\r\n        )}\r\n        {/* Navigation buttons */}\r\n        {maxLen > 1 && (\r\n          <div className=\"absolute bottom-2 right-2 flex gap-2 z-10\">\r\n            <button\r\n              onClick={showPrev}\r\n              disabled={current === 0}\r\n              className=\"bg-white/80 hover:bg-white text-black rounded-full px-2 py-1 shadow\"\r\n              aria-label=\"Previous\"\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              onClick={showNext}\r\n              disabled={current >= maxLen - 1}\r\n              className=\"bg-white/80 hover:bg-white text-black rounded-full px-2 py-1 shadow\"\r\n              aria-label=\"Next\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst RenderToolCall: React.FC<{ content: FunctionCall[] }> = ({ content }) => {\r\n  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());\r\n\r\n  const toggleExpansion = (callId: string) => {\r\n    setExpandedItems((prev) => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(callId)) {\r\n        newSet.delete(callId);\r\n      } else {\r\n        newSet.add(callId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      {content.map((call) => {\r\n        const isExpanded = expandedItems.has(call.id);\r\n        return (\r\n          <div\r\n            key={call.id}\r\n            className=\"border mt-1 border-secondary bg-secondary rounded hover:bg-tertiary transition-colors\"\r\n          >\r\n            <button\r\n              onClick={() => toggleExpansion(call.id)}\r\n              className=\"w-full flex items-center gap-2 p-2 text-left hover:bg-secondary/50 transition-colors\"\r\n            >\r\n              <DraftingCompass className=\"w-4 h-4 text-accent flex-shrink-0\" />\r\n              <span className=\"font-base text-sm\">\r\n                Calling {call.name} tool\r\n              </span>\r\n              <div\r\n                className={`ml-auto transition-transform duration-200 ${\r\n                  isExpanded ? \"rotate-180\" : \"rotate-0\"\r\n                }`}\r\n              >\r\n                <ChevronDown className=\"w-4 h-4\" />\r\n              </div>\r\n            </button>\r\n            {isExpanded && (\r\n              <div className=\"border-t border-secondary p-2\">\r\n                <TruncatableText\r\n                  content={JSON.stringify(call.arguments, null, 2)}\r\n                  isJson={true}\r\n                  className=\"text-sm bg-secondary p-2 rounded\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RenderToolResult: React.FC<{ content: FunctionExecutionResult[] }> = ({\r\n  content,\r\n}) => {\r\n  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());\r\n\r\n  const toggleExpansion = (callId: string) => {\r\n    setExpandedItems((prev) => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(callId)) {\r\n        newSet.delete(callId);\r\n      } else {\r\n        newSet.add(callId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      {content.map((result) => {\r\n        const isExpanded = expandedItems.has(result.call_id);\r\n        return (\r\n          <div\r\n            key={result.call_id}\r\n            className=\"border mt-1 border-secondary bg-secondary rounded hover:bg-tertiary transition-colors\"\r\n          >\r\n            <button\r\n              onClick={() => toggleExpansion(result.call_id)}\r\n              className=\"w-full flex items-center gap-2 p-2 text-left hover:bg-secondary/50 transition-colors\"\r\n            >\r\n              <DraftingCompass className=\"w-4 h-4 text-accent flex-shrink-0\" />\r\n              <span className=\"font-medium text-sm\">\r\n                Tool result (ID: {result.call_id.slice(-8)})\r\n              </span>\r\n              <div\r\n                className={`ml-auto transition-transform duration-200 ${\r\n                  isExpanded ? \"rotate-180\" : \"rotate-0\"\r\n                }`}\r\n              >\r\n                <ChevronDown className=\"w-4 h-4\" />\r\n              </div>\r\n            </button>\r\n            {isExpanded && (\r\n              <div className=\"border-t border-secondary p-2\">\r\n                <TruncatableText\r\n                  content={result.content}\r\n                  className=\"text-sm bg-secondary p-2 border border-secondary rounded scroll overflow-x-scroll\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const messageUtils = {\r\n  isToolCallContent(content: unknown): content is FunctionCall[] {\r\n    if (!Array.isArray(content)) return false;\r\n    return content.every(\r\n      (item) =>\r\n        typeof item === \"object\" &&\r\n        item !== null &&\r\n        \"id\" in item &&\r\n        \"arguments\" in item &&\r\n        \"name\" in item\r\n    );\r\n  },\r\n\r\n  isNestedMessageContent(content: unknown): content is AgentMessageConfig[] {\r\n    if (!Array.isArray(content)) return false;\r\n    return content.every(\r\n      (item) =>\r\n        typeof item === \"object\" &&\r\n        item !== null &&\r\n        \"source\" in item &&\r\n        \"content\" in item &&\r\n        \"type\" in item\r\n    );\r\n  },\r\n\r\n  isMultiModalContent(content: unknown): content is (string | ImageContent)[] {\r\n    if (!Array.isArray(content)) return false;\r\n    return content.every(\r\n      (item) =>\r\n        typeof item === \"string\" ||\r\n        (typeof item === \"object\" &&\r\n          item !== null &&\r\n          (\"url\" in item || \"data\" in item))\r\n    );\r\n  },\r\n\r\n  isFunctionExecutionResult(\r\n    content: unknown\r\n  ): content is FunctionExecutionResult[] {\r\n    if (!Array.isArray(content)) return false;\r\n    return content.every(\r\n      (item) =>\r\n        typeof item === \"object\" &&\r\n        item !== null &&\r\n        \"call_id\" in item &&\r\n        \"content\" in item\r\n    );\r\n  },\r\n\r\n  isUser(source: string): boolean {\r\n    return source === \"user\";\r\n  },\r\n\r\n  isMessageArray(\r\n    message: AgentMessageConfig | AgentMessageConfig[]\r\n  ): message is AgentMessageConfig[] {\r\n    return Array.isArray(message);\r\n  },\r\n};\r\n\r\ninterface MessageProps {\r\n  message: AgentMessageConfig | AgentMessageConfig[];\r\n  isLast?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const RenderNestedMessages: React.FC<{\r\n  content: AgentMessageConfig[];\r\n}> = ({ content }) => (\r\n  <div className=\"space-y-4\">\r\n    {content.map((item, index) => (\r\n      <div\r\n        key={index}\r\n        className={`${\r\n          index > 0 ? \"bordper border-secondary rounded   bg-secondary/30\" : \"\"\r\n        }`}\r\n      >\r\n        {typeof item.content === \"string\" ? (\r\n          <TruncatableText\r\n            content={item.content}\r\n            className={`break-all ${index === 0 ? \"text-base\" : \"text-sm\"}`}\r\n          />\r\n        ) : messageUtils.isMultiModalContent(item.content) ? (\r\n          <RenderMultiModal content={item.content} thumbnail />\r\n        ) : (\r\n          <pre className=\"text-xs whitespace-pre-wrap overflow-x-auto\">\r\n            {JSON.stringify(item.content, null, 2)}\r\n          </pre>\r\n        )}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport const RenderMessage: React.FC<MessageProps> = ({\r\n  message,\r\n  isLast = false,\r\n  className = \"\",\r\n}) => {\r\n  if (!message) return null;\r\n\r\n  // If message is an array, render the first message or return null\r\n  if (messageUtils.isMessageArray(message)) {\r\n    return message.length > 0 ? (\r\n      <RenderMessage\r\n        message={message[0]}\r\n        isLast={isLast}\r\n        className={className}\r\n      />\r\n    ) : null;\r\n  }\r\n\r\n  const isUser = messageUtils.isUser(message.source);\r\n  const content = message.content;\r\n  const isLLMEventMessage = message.source === \"llm_call_event\";\r\n\r\n  return (\r\n    <div\r\n      className={`relative group ${!isLast ? \"mb-2\" : \"\"} ${className} ${\r\n        isLLMEventMessage ? \"border-accent\" : \"\"\r\n      }`}\r\n    >\r\n      <div\r\n        className={`\r\n        flex items-start gap-2 p-2 rounded\r\n        ${isUser ? \"bg-secondary\" : \"bg-tertiary\"}\r\n        border border-secondary\r\n        transition-all duration-200\r\n      `}\r\n      >\r\n        <div\r\n          className={`\r\n          p-1.5 rounded bg-light \r\n          ${isUser ? \"text-accent\" : \"text-primary\"}\r\n        `}\r\n        >\r\n          {isUser ? (\r\n            <User size={14} />\r\n          ) : message.source == \"llm_call_event\" ? (\r\n            <Bug size={14} />\r\n          ) : (\r\n            <Bot size={14} />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center justify-between gap-2\">\r\n            <span className=\"text-sm font-semibold text-primary truncate flex-1 min-w-0\">\r\n              {message.source}\r\n            </span>\r\n            {message.models_usage && (\r\n              <span className=\"text-xs text-secondary flex-shrink-0\">\r\n                Tokens:{\" \"}\r\n                {(message.models_usage.prompt_tokens || 0) +\r\n                  (message.models_usage.completion_tokens || 0)}\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"text-sm text-secondary\">\r\n            {messageUtils.isToolCallContent(content) ? (\r\n              <RenderToolCall content={content} />\r\n            ) : messageUtils.isMultiModalContent(content) ? (\r\n              <RenderMultiModal content={content} thumbnail={false} />\r\n            ) : messageUtils.isNestedMessageContent(content) ? (\r\n              <RenderNestedMessages content={content} />\r\n            ) : messageUtils.isFunctionExecutionResult(content) ? (\r\n              <RenderToolResult content={content} />\r\n            ) : message.source === \"llm_call_event\" ? (\r\n              <LLMLogRenderer content={String(content)} />\r\n            ) : (\r\n              <TruncatableText\r\n                content={String(content)}\r\n                className=\"break-all\"\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// edgemessagemodal.tsx\r\nimport React, { useState, useMemo } from \"react\";\r\nimport { Modal, Input } from \"antd\";\r\nimport { RenderMessage } from \"../rendermessage\";\r\nimport { CustomEdge } from \"./edge\";\r\n\r\nconst { Search } = Input;\r\n\r\ninterface EdgeMessageModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  edge: CustomEdge | null;\r\n}\r\n\r\nexport const EdgeMessageModal: React.FC<EdgeMessageModalProps> = ({\r\n  open,\r\n  onClose,\r\n  edge,\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  const totalTokens = useMemo(() => {\r\n    if (!edge?.data?.messages) return 0;\r\n    return edge.data.messages.reduce((acc, msg) => {\r\n      const promptTokens = msg.models_usage?.prompt_tokens || 0;\r\n      const completionTokens = msg.models_usage?.completion_tokens || 0;\r\n      return acc + promptTokens + completionTokens;\r\n    }, 0);\r\n  }, [edge?.data?.messages]);\r\n\r\n  const filteredMessages = useMemo(() => {\r\n    if (!edge?.data?.messages) return [];\r\n    if (!searchTerm) return edge.data.messages;\r\n\r\n    return edge.data.messages.filter(\r\n      (msg) =>\r\n        typeof msg.content === \"string\" &&\r\n        msg.content.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n  }, [edge?.data?.messages, searchTerm]);\r\n\r\n  if (!edge) return null;\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <div className=\"space-y-2\">\r\n          <div className=\"font-medium\">\r\n            {edge.source}  {edge.target}\r\n          </div>\r\n          <div className=\"text-sm text-secondary flex justify-between\">\r\n            {edge.data && (\r\n              <span>\r\n                {edge.data.messages.length} message\r\n                {`${edge.data.messages.length > 1 ? \"s\" : \"\"}`}\r\n              </span>\r\n            )}\r\n            <span>{totalTokens.toLocaleString()} tokens</span>\r\n          </div>\r\n          {edge.data && edge.data.messages.length > 0 && (\r\n            <div className=\"text-xs py-2 font-normal\">\r\n              {\" \"}\r\n              The above represents the number of times the {`${edge.target}`}{\" \"}\r\n              node sent a message{\" \"}\r\n              <span className=\"font-semibold underline text-accent\">after</span>{\" \"}\r\n              the {`${edge.source}`} node.{\" \"}\r\n            </div>\r\n          )}\r\n        </div>\r\n      }\r\n      open={open}\r\n      onCancel={onClose}\r\n      width={800}\r\n      footer={null}\r\n    >\r\n      <div className=\"max-h-[70vh] overflow-y-auto space-y-4 scroll pr-2\">\r\n        <Search\r\n          placeholder=\"Search message content...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          allowClear\r\n          className=\"sticky top-0 z-10\"\r\n        />\r\n\r\n        <div className=\"space-y-4 \">\r\n          {filteredMessages.map((msg, idx) => (\r\n            <RenderMessage\r\n              key={idx}\r\n              message={msg}\r\n              isLast={idx === filteredMessages.length - 1}\r\n            />\r\n          ))}\r\n\r\n          {filteredMessages.length === 0 && (\r\n            <div className=\"text-center text-secondary py-8\">\r\n              No messages found\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import { Node } from \"@xyflow/react\";\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport { CustomEdge } from \"../edge\";\r\n\r\n// Pattern types\r\nexport type PatternType =\r\n  | \"sequential\"\r\n  | \"selector\"\r\n  | \"handoff\"\r\n  | \"debate\"\r\n  | \"reflection\"\r\n  | \"unknown\";\r\n\r\n// Pattern layout result\r\nexport interface PatternLayoutResult {\r\n  nodes: Node[];\r\n  edges: CustomEdge[];\r\n}\r\n\r\n// Pattern generator function signature\r\nexport interface PatternGenerator {\r\n  (\r\n    teamConfig: Component<TeamConfig>,\r\n    participatedAgents: Set<string>,\r\n    run?: Run\r\n  ): PatternLayoutResult;\r\n}\r\n\r\n// Node dimensions\r\nexport const NODE_DIMENSIONS = {\r\n  default: { width: 170, height: 100 },\r\n  end: { width: 170, height: 80 },\r\n  task: { width: 170, height: 100 },\r\n};\r\n\r\n// Common node creator\r\nexport const createAgentNode = (\r\n  id: string,\r\n  label: string,\r\n  agentType: string,\r\n  description: string,\r\n  position: { x: number; y: number },\r\n  isActive: boolean,\r\n  isProcessing: boolean\r\n): Node => ({\r\n  id,\r\n  type: \"agentNode\",\r\n  position,\r\n  data: {\r\n    type: \"agent\",\r\n    label,\r\n    agentType,\r\n    description,\r\n    isActive,\r\n    status: \"\",\r\n    reason: \"\",\r\n    draggable: !isProcessing,\r\n  },\r\n});\r\n\r\n// Create user node\r\nexport const createUserNode = (\r\n  position: { x: number; y: number },\r\n  isActive: boolean,\r\n  isProcessing: boolean\r\n): Node => ({\r\n  id: \"user\",\r\n  type: \"agentNode\",\r\n  position,\r\n  data: {\r\n    type: \"user\",\r\n    label: \"User\",\r\n    agentType: \"user\",\r\n    description: \"Human user\",\r\n    isActive,\r\n    status: \"\",\r\n    reason: \"\",\r\n    draggable: !isProcessing,\r\n  },\r\n});\r\n\r\n// Create end node\r\nexport const createEndNode = (\r\n  position: { x: number; y: number },\r\n  run?: Run\r\n): Node => ({\r\n  id: \"end\",\r\n  type: \"agentNode\",\r\n  position,\r\n  data: {\r\n    type: \"end\",\r\n    label: \"End\",\r\n    status: run?.status,\r\n    reason: run?.error_message || \"\",\r\n    agentType: \"\",\r\n    description: \"\",\r\n    isActive: false,\r\n    draggable: false,\r\n  },\r\n});\r\n\r\n// Create a basic edge\r\nexport const createEdge = (\r\n  id: string,\r\n  source: string,\r\n  target: string,\r\n  options: {\r\n    animated?: boolean;\r\n    stroke?: string;\r\n    strokeWidth?: number;\r\n    strokeDasharray?: string;\r\n    opacity?: number;\r\n    label?: string;\r\n    routingType?: \"primary\" | \"secondary\";\r\n  } = {}\r\n): CustomEdge => ({\r\n  id,\r\n  source,\r\n  target,\r\n  type: \"custom\",\r\n  animated: options.animated || false,\r\n  data: {\r\n    label: options.label || \"\",\r\n    messages: [],\r\n    routingType: options.routingType,\r\n  },\r\n  style: {\r\n    stroke: options.stroke || \"#2563eb\",\r\n    strokeWidth: options.strokeWidth || 1,\r\n    strokeDasharray: options.strokeDasharray,\r\n    opacity: options.opacity || 1,\r\n  },\r\n});\r\n","/**\r\n * Sequential Pattern (RoundRobinGroupChat)\r\n *\r\n * Layout: User  Agent1  Agent2  Agent3  ...  End\r\n * - Linear horizontal flow\r\n * - Agents take turns in fixed order defined by participants array\r\n */\r\n\r\nimport { Node } from \"@xyflow/react\";\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport { CustomEdge } from \"../edge\";\r\nimport {\r\n  PatternLayoutResult,\r\n  NODE_DIMENSIONS,\r\n  createAgentNode,\r\n  createUserNode,\r\n  createEndNode,\r\n  createEdge,\r\n} from \"./types\";\r\n\r\nconst HORIZONTAL_SPACING = 200;\r\n\r\nexport const generateSequentialLayout = (\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const participants = teamConfig.config?.participants || [];\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n  const isProcessing =\r\n    run?.status === \"active\" || run?.status === \"awaiting_input\";\r\n  const isComplete = [\"complete\", \"error\", \"stopped\"].includes(\r\n    run?.status || \"\"\r\n  );\r\n\r\n  // Create user node at the start\r\n  nodes.push(\r\n    createUserNode({ x: 0, y: 0 }, participatedAgents.has(\"user\"), isProcessing)\r\n  );\r\n\r\n  // Create agent nodes in sequence\r\n  participants.forEach((p: Component<AgentConfig>, index: number) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    const xPos = (index + 1) * HORIZONTAL_SPACING;\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        { x: xPos, y: 0 },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n  });\r\n\r\n  // Create edges: User  Agent1\r\n  if (participants.length > 0) {\r\n    const firstAgentName = participants[0]?.config?.name || \"agent-0\";\r\n    edges.push(\r\n      createEdge(\"user-to-first\", \"user\", firstAgentName, {\r\n        animated: participatedAgents.has(firstAgentName),\r\n        stroke: participatedAgents.has(firstAgentName) ? \"#22c55e\" : \"#6b7280\",\r\n        strokeWidth: participatedAgents.has(firstAgentName) ? 2 : 1,\r\n        opacity: participatedAgents.has(firstAgentName) ? 1 : 0.5,\r\n      })\r\n    );\r\n  }\r\n\r\n  // Create edges between agents: Agent1  Agent2  Agent3  ...\r\n  for (let i = 0; i < participants.length - 1; i++) {\r\n    const sourceName = participants[i]?.config?.name || `agent-${i}`;\r\n    const targetName = participants[i + 1]?.config?.name || `agent-${i + 1}`;\r\n    const isActive =\r\n      participatedAgents.has(sourceName) && participatedAgents.has(targetName);\r\n\r\n    edges.push(\r\n      createEdge(`${sourceName}-to-${targetName}`, sourceName, targetName, {\r\n        animated: isActive,\r\n        stroke: isActive ? \"#22c55e\" : \"#6b7280\",\r\n        strokeWidth: isActive ? 2 : 1,\r\n        opacity: isActive ? 1 : 0.5,\r\n      })\r\n    );\r\n  }\r\n\r\n  // Add loop back edge (last agent  first agent) for continuous round-robin\r\n  if (participants.length > 1) {\r\n    const lastAgentName =\r\n      participants[participants.length - 1]?.config?.name ||\r\n      `agent-${participants.length - 1}`;\r\n    const firstAgentName = participants[0]?.config?.name || \"agent-0\";\r\n\r\n    edges.push(\r\n      createEdge(`${lastAgentName}-loop-to-${firstAgentName}`, lastAgentName, firstAgentName, {\r\n        stroke: \"#6b7280\",\r\n        strokeWidth: 1,\r\n        strokeDasharray: \"5,5\",\r\n        opacity: 0.3,\r\n        label: \"loop\",\r\n      })\r\n    );\r\n  }\r\n\r\n  // Add end node if run is complete\r\n  if (isComplete && participants.length > 0) {\r\n    const lastAgentName =\r\n      participants[participants.length - 1]?.config?.name ||\r\n      `agent-${participants.length - 1}`;\r\n    const endX = (participants.length + 1) * HORIZONTAL_SPACING;\r\n\r\n    nodes.push(createEndNode({ x: endX, y: 0 }, run));\r\n\r\n    edges.push(\r\n      createEdge(`${lastAgentName}-to-end`, lastAgentName, \"end\", {\r\n        stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n        strokeWidth: 2,\r\n        label: \"ended\",\r\n      })\r\n    );\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n","/**\r\n * Selector Pattern (SelectorGroupChat)\r\n *\r\n * Layout: Hub-and-Spoke\r\n *         User  Selector (center)  Agent1, Agent2, Agent3... (around)\r\n *\r\n * - Central selector/router node\r\n * - Agents arranged in semi-circle around selector\r\n * - Selector chooses best agent for each task\r\n */\r\n\r\nimport { Node } from \"@xyflow/react\";\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport { CustomEdge } from \"../edge\";\r\nimport {\r\n  PatternLayoutResult,\r\n  NODE_DIMENSIONS,\r\n  createAgentNode,\r\n  createUserNode,\r\n  createEndNode,\r\n  createEdge,\r\n} from \"./types\";\r\n\r\nconst CENTER_X = 350;\r\nconst CENTER_Y = 150;\r\nconst RADIUS = 200;\r\n\r\nexport const generateSelectorLayout = (\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const participants = teamConfig.config?.participants || [];\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n  const isProcessing =\r\n    run?.status === \"active\" || run?.status === \"awaiting_input\";\r\n  const isComplete = [\"complete\", \"error\", \"stopped\"].includes(\r\n    run?.status || \"\"\r\n  );\r\n\r\n  // Create user node to the left\r\n  nodes.push(\r\n    createUserNode(\r\n      {\r\n        x: CENTER_X - 300,\r\n        y: CENTER_Y - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Create central selector node\r\n  nodes.push(\r\n    createAgentNode(\r\n      \"selector-hub\",\r\n      \"Selector\",\r\n      \"Router\",\r\n      \"Selects best agent for task\",\r\n      {\r\n        x: CENTER_X - NODE_DIMENSIONS.default.width / 2,\r\n        y: CENTER_Y - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      true, // Selector is always active when team is running\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Edge from user to selector\r\n  edges.push(\r\n    createEdge(\"user-to-selector\", \"user\", \"selector-hub\", {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.size > 0,\r\n    })\r\n  );\r\n\r\n  // Create agent nodes in semi-circle around selector\r\n  participants.forEach((p: Component<AgentConfig>, index: number) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    // Spread agents from -60 to +60 (semi-circle on the right)\r\n    const startAngle = -Math.PI / 3; // -60 degrees\r\n    const endAngle = Math.PI / 3; // +60 degrees\r\n    const angleStep = (endAngle - startAngle) / Math.max(1, participants.length - 1);\r\n    const angle = participants.length === 1\r\n      ? 0 // Single agent goes straight right\r\n      : startAngle + index * angleStep;\r\n\r\n    const x = CENTER_X + RADIUS * Math.cos(angle);\r\n    const y = CENTER_Y + RADIUS * Math.sin(angle);\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        {\r\n          x: x - NODE_DIMENSIONS.default.width / 2,\r\n          y: y - NODE_DIMENSIONS.default.height / 2,\r\n        },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    // Edge from selector to each agent\r\n    const isAgentActive = participatedAgents.has(agentName);\r\n    edges.push(\r\n      createEdge(`selector-to-${agentName}`, \"selector-hub\", agentName, {\r\n        animated: isAgentActive,\r\n        stroke: isAgentActive ? \"#22c55e\" : \"#6b7280\",\r\n        strokeWidth: isAgentActive ? 2 : 1,\r\n        opacity: isAgentActive ? 1 : 0.4,\r\n      })\r\n    );\r\n\r\n    // Return edge from agent back to selector (for multi-turn conversations)\r\n    edges.push(\r\n      createEdge(`${agentName}-to-selector`, agentName, \"selector-hub\", {\r\n        stroke: isAgentActive ? \"#f59e0b\" : \"#6b7280\",\r\n        strokeWidth: 1,\r\n        strokeDasharray: \"5,5\",\r\n        opacity: isAgentActive ? 0.7 : 0.2,\r\n        routingType: \"secondary\",\r\n      })\r\n    );\r\n  });\r\n\r\n  // Add end node if run is complete\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        {\r\n          x: CENTER_X + RADIUS + 100,\r\n          y: CENTER_Y - NODE_DIMENSIONS.end.height / 2,\r\n        },\r\n        run\r\n      )\r\n    );\r\n\r\n    // Find the last participating agent to connect to end\r\n    const lastActiveAgent = [...participatedAgents].filter(\r\n      (a) => a !== \"user\" && a !== \"selector-hub\"\r\n    ).pop();\r\n\r\n    if (lastActiveAgent) {\r\n      edges.push(\r\n        createEdge(`${lastActiveAgent}-to-end`, lastActiveAgent, \"end\", {\r\n          stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n          strokeWidth: 2,\r\n          label: \"ended\",\r\n        })\r\n      );\r\n    } else {\r\n      // Connect selector directly to end if no agent was selected\r\n      edges.push(\r\n        createEdge(\"selector-to-end\", \"selector-hub\", \"end\", {\r\n          stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n          strokeWidth: 2,\r\n          label: \"ended\",\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n","/**\r\n * Handoff Pattern (Swarm)\r\n *\r\n * Layout: Triage Center with Bidirectional Connections\r\n *         User  Triage (center)  Agent1, Agent2, Agent3... (around)\r\n *\r\n * - Central triage/coordinator agent (usually first agent or named \"triage\")\r\n * - Specialist agents arranged around triage\r\n * - Bidirectional arrows showing handoff capability\r\n * - Agents can dynamically transfer control to each other\r\n */\r\n\r\nimport { Node } from \"@xyflow/react\";\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport { CustomEdge } from \"../edge\";\r\nimport {\r\n  PatternLayoutResult,\r\n  NODE_DIMENSIONS,\r\n  createAgentNode,\r\n  createUserNode,\r\n  createEndNode,\r\n  createEdge,\r\n} from \"./types\";\r\n\r\nconst CENTER_X = 350;\r\nconst CENTER_Y = 150;\r\nconst RADIUS = 200;\r\n\r\nexport const generateHandoffLayout = (\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const participants = teamConfig.config?.participants || [];\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n  const isProcessing =\r\n    run?.status === \"active\" || run?.status === \"awaiting_input\";\r\n  const isComplete = [\"complete\", \"error\", \"stopped\"].includes(\r\n    run?.status || \"\"\r\n  );\r\n\r\n  // Find triage/coordinator agent (usually first or named \"triage\")\r\n  const triageIndex = participants.findIndex((p: Component<AgentConfig>) =>\r\n    p.config?.name?.toLowerCase().includes(\"triage\")\r\n  );\r\n  const actualTriageIndex = triageIndex >= 0 ? triageIndex : 0;\r\n  const triageAgent = participants[actualTriageIndex];\r\n  const triageName = triageAgent?.config?.name || \"triage\";\r\n  const otherAgents = participants.filter(\r\n    (_: Component<AgentConfig>, i: number) => i !== actualTriageIndex\r\n  );\r\n\r\n  // Create user node to the left\r\n  nodes.push(\r\n    createUserNode(\r\n      {\r\n        x: CENTER_X - 300,\r\n        y: CENTER_Y - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Create central triage node\r\n  nodes.push(\r\n    createAgentNode(\r\n      triageName,\r\n      triageName,\r\n      triageAgent?.label || \"Triage\",\r\n      triageAgent?.description || \"Routes tasks to specialists\",\r\n      {\r\n        x: CENTER_X - NODE_DIMENSIONS.default.width / 2,\r\n        y: CENTER_Y - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(triageName),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Edge from user to triage\r\n  edges.push(\r\n    createEdge(\"user-to-triage\", \"user\", triageName, {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.has(triageName),\r\n    })\r\n  );\r\n\r\n  // Create specialist agent nodes in semi-circle\r\n  otherAgents.forEach((p: Component<AgentConfig>, index: number) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    // Spread agents from -60 to +60 (semi-circle on the right)\r\n    const startAngle = -Math.PI / 3;\r\n    const endAngle = Math.PI / 3;\r\n    const angleStep =\r\n      otherAgents.length === 1\r\n        ? 0\r\n        : (endAngle - startAngle) / (otherAgents.length - 1);\r\n    const angle = otherAgents.length === 1 ? 0 : startAngle + index * angleStep;\r\n\r\n    const x = CENTER_X + RADIUS * Math.cos(angle);\r\n    const y = CENTER_Y + RADIUS * Math.sin(angle);\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        {\r\n          x: x - NODE_DIMENSIONS.default.width / 2,\r\n          y: y - NODE_DIMENSIONS.default.height / 2,\r\n        },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    const isAgentActive = participatedAgents.has(agentName);\r\n\r\n    // Bidirectional edges: Triage  Agent (handoff)\r\n    edges.push(\r\n      createEdge(`${triageName}-to-${agentName}`, triageName, agentName, {\r\n        animated: isAgentActive,\r\n        stroke: isAgentActive ? \"#22c55e\" : \"#6b7280\",\r\n        strokeWidth: isAgentActive ? 2 : 1,\r\n        opacity: isAgentActive ? 1 : 0.4,\r\n        label: isAgentActive ? \"handoff\" : \"\",\r\n      })\r\n    );\r\n\r\n    // Agent  Triage (return)\r\n    edges.push(\r\n      createEdge(`${agentName}-to-${triageName}`, agentName, triageName, {\r\n        stroke: isAgentActive ? \"#f59e0b\" : \"#6b7280\",\r\n        strokeWidth: 1,\r\n        strokeDasharray: \"5,5\",\r\n        opacity: isAgentActive ? 0.8 : 0.2,\r\n        routingType: \"secondary\",\r\n        label: isAgentActive ? \"return\" : \"\",\r\n      })\r\n    );\r\n  });\r\n\r\n  // Add cross-agent handoff edges if agents have participated\r\n  // (In Swarm, agents can hand off directly to each other)\r\n  if (otherAgents.length > 1) {\r\n    otherAgents.forEach((p1: Component<AgentConfig>, i: number) => {\r\n      otherAgents.forEach((p2: Component<AgentConfig>, j: number) => {\r\n        if (i !== j) {\r\n          const agent1 = p1.config?.name || `agent-${i}`;\r\n          const agent2 = p2.config?.name || `agent-${j}`;\r\n          const bothActive =\r\n            participatedAgents.has(agent1) && participatedAgents.has(agent2);\r\n\r\n          // Only show cross-edges if both agents have participated\r\n          if (bothActive) {\r\n            edges.push(\r\n              createEdge(`${agent1}-cross-to-${agent2}`, agent1, agent2, {\r\n                stroke: \"#8b5cf6\", // Purple for cross-handoffs\r\n                strokeWidth: 1,\r\n                strokeDasharray: \"3,3\",\r\n                opacity: 0.5,\r\n              })\r\n            );\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add end node if run is complete\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        {\r\n          x: CENTER_X + RADIUS + 100,\r\n          y: CENTER_Y - NODE_DIMENSIONS.end.height / 2,\r\n        },\r\n        run\r\n      )\r\n    );\r\n\r\n    // Find the last participating agent to connect to end\r\n    const lastActiveAgent = [...participatedAgents].filter(\r\n      (a) => a !== \"user\"\r\n    ).pop();\r\n\r\n    if (lastActiveAgent) {\r\n      edges.push(\r\n        createEdge(`${lastActiveAgent}-to-end`, lastActiveAgent, \"end\", {\r\n          stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n          strokeWidth: 2,\r\n          label: \"ended\",\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n","/**\r\n * Pattern Loader - JSON     ( !)\r\n *\r\n * AG_Cohub/patterns/*.json   PatternDefinition \r\n *\r\n * ## \r\n * patterns/data/  JSON     (import  !)\r\n *\r\n * ##    \r\n * 1. AG_Cohub/patterns/ JSON \r\n * 2.  (data/) \r\n * 3. ! ( )\r\n */\r\n\r\nimport { PatternDefinition, PatternCategory, LayoutType, PatternVisual, PatternConnection } from \"./pattern-types\";\r\n\r\n// ============================================\r\n// JSON   (AG_Cohub/loader/types.ts )\r\n// ============================================\r\n\r\ninterface CoHubPatternJSON {\r\n  id: string;\r\n  name: { en: string; ko: string };\r\n  description: { en: string; ko: string };\r\n  diagram: string;\r\n  complexity: \"low\" | \"medium\" | \"high\" | \"very-high\";\r\n  when_to_use: string[];\r\n  when_to_avoid: string[];\r\n  pros: string[];\r\n  cons: string[];\r\n  example_use_cases: Array<{ name: string; [key: string]: unknown }>;\r\n  autogen_implementation: {\r\n    provider: string;\r\n    label?: string;\r\n    requiredConfig?: {\r\n      allow_repeated_speaker?: boolean;\r\n      model_client?: {\r\n        provider: string;\r\n        config: Record<string, unknown>;\r\n      };\r\n    };\r\n    team_config?: {\r\n      participants: Array<{\r\n        provider: string;\r\n        component_type: string;\r\n        config: {\r\n          name: string;\r\n          description: string;\r\n          system_message: string;\r\n          handoffs?: string[];\r\n        };\r\n      }>;\r\n      selector_prompt?: string;\r\n    };\r\n  };\r\n  best_practices?: string[];\r\n  references: Array<{ title: string; url: string }>;\r\n  visual_override?: {\r\n    layout?: LayoutType;\r\n    category?: PatternCategory;\r\n    icon?: string;\r\n    primaryColor?: string;\r\n    secondaryColor?: string;\r\n    centerNodeType?: \"selector\" | \"supervisor\" | \"aggregator\" | \"triage\";\r\n    edgeStyle?: \"solid\" | \"dashed\" | \"animated\";\r\n    bidirectional?: boolean;\r\n    showCrossConnections?: boolean;\r\n  };\r\n}\r\n\r\ninterface ProviderConfig {\r\n  full: string;\r\n  category: PatternCategory;\r\n  layout: LayoutType;\r\n  icon: string;\r\n  colors: { primary: string; secondary: string };\r\n  communicationStyle: \"turn-based\" | \"broadcast\" | \"request-response\" | \"event-driven\";\r\n  connections: PatternConnection[];\r\n  requiresModelClient: boolean;\r\n}\r\n\r\n// ============================================\r\n// Provider  \r\n// ============================================\r\n\r\nimport providersJson from \"./data/providers.json\";\r\n\r\nconst { _README, ...providers } = providersJson as any;\r\nconst PROVIDERS: Record<string, ProviderConfig> = providers;\r\n\r\nfunction extractProviderShort(provider: string): string {\r\n  const parts = provider.split(\".\");\r\n  return parts[parts.length - 1];\r\n}\r\n\r\nfunction getProvider(providerFull: string): ProviderConfig | undefined {\r\n  const shortName = extractProviderShort(providerFull);\r\n  return PROVIDERS[shortName];\r\n}\r\n\r\n// ============================================\r\n//  JSON   (require.context)\r\n// ============================================\r\n\r\n// Webpack require.context data/    JSON  \r\n//  : XX_name.json (: 01_sequential.json, 10_new_pattern.json)\r\nconst patternContext = (require as any).context(\r\n  \"./data\",\r\n  false,\r\n  /^\\.\\/(0[1-9]|[1-9][0-9])_[a-z_]+\\.json$/\r\n);\r\n\r\n//    JSON \r\nconst PATTERN_JSON_FILES: CoHubPatternJSON[] = patternContext\r\n  .keys()\r\n  .sort()\r\n  .map((key: string) => patternContext(key) as CoHubPatternJSON);\r\n\r\n// :    \r\nconsole.log(` Pattern Loader: ${PATTERN_JSON_FILES.length} patterns loaded automatically`);\r\n\r\n// ============================================\r\n// JSON  PatternDefinition \r\n// ============================================\r\n\r\nfunction convertToPatternDefinition(json: CoHubPatternJSON): PatternDefinition {\r\n  const providerFull = json.autogen_implementation.provider;\r\n  const providerShort = extractProviderShort(providerFull);\r\n  const providerConfig = getProvider(providerFull);\r\n\r\n  // \r\n  const baseCategory = providerConfig?.category || \"sequential\";\r\n  const baseLayout = providerConfig?.layout || \"chain\";\r\n  const baseIcon = providerConfig?.icon || \"ArrowRight\";\r\n  const baseColors = providerConfig?.colors || { primary: \"#3b82f6\", secondary: \"#93c5fd\" };\r\n  const baseCommunicationStyle = providerConfig?.communicationStyle || \"turn-based\";\r\n  const baseConnections = providerConfig?.connections || [{ type: \"sequential\" as const, from: \"agent[i]\", to: \"agent[i+1]\" }];\r\n  const requiresModelClient = providerConfig?.requiresModelClient ?? false;\r\n\r\n  // JSON visual_override \r\n  const override = json.visual_override || {};\r\n\r\n  // Visual \r\n  const visual: PatternVisual = {\r\n    layout: override.layout || baseLayout,\r\n    centerNodeType: override.centerNodeType,\r\n    edgeStyle: override.edgeStyle || \"solid\",\r\n    bidirectional: override.bidirectional ?? false,\r\n    showCrossConnections: override.showCrossConnections ?? false,\r\n    primaryColor: override.primaryColor || baseColors.primary,\r\n    secondaryColor: override.secondaryColor || baseColors.secondary,\r\n    icon: override.icon || baseIcon,\r\n  };\r\n\r\n  // Coordinator  \r\n  const coordinatorRoles: Record<string, string> = {\r\n    SelectorGroupChat: \"LLM Selector\",\r\n    Swarm: \"Triage Agent\",\r\n    MagenticOneGroupChat: \"Orchestrator\",\r\n  };\r\n\r\n  //   \r\n  const participants = json.autogen_implementation.team_config?.participants;\r\n  const minAgents = participants ? Math.max(2, participants.length) : 2;\r\n\r\n  //  \r\n  const agentRoles = participants?.map((p) => p.config.name) || [];\r\n\r\n  return {\r\n    id: json.id,\r\n    name: json.name.en,\r\n    category: override.category || baseCategory,\r\n    description: json.description.en,\r\n    useCases: json.when_to_use.slice(0, 3),\r\n\r\n    structure: {\r\n      requiresCoordinator: requiresModelClient || providerShort === \"Swarm\",\r\n      coordinatorRole: coordinatorRoles[providerShort],\r\n      minAgents,\r\n      maxAgents: undefined,\r\n      agentRoles,\r\n    },\r\n\r\n    communication: {\r\n      style: baseCommunicationStyle,\r\n      connections: baseConnections,\r\n    },\r\n\r\n    visual,\r\n\r\n    autogenProvider: providerShort,\r\n    autogenProviderFull: providerFull,\r\n\r\n    requiredConfig: getRequiredConfig(providerShort, json),\r\n    prompts: getPrompts(json),\r\n  };\r\n}\r\n\r\nfunction getRequiredConfig(provider: string, json: CoHubPatternJSON): PatternDefinition[\"requiredConfig\"] {\r\n  if (provider === \"SelectorGroupChat\" || provider === \"MagenticOneGroupChat\") {\r\n    // Read from JSON's requiredConfig if available\r\n    const jsonRequiredConfig = json.autogen_implementation?.requiredConfig;\r\n\r\n    // Defaults\r\n    const defaults = {\r\n      model_client: {\r\n        provider: \"autogen_ext.models.openai.OpenAIChatCompletionClient\",\r\n        config: { model: \"gpt-4o-mini\" },\r\n      },\r\n      allow_repeated_speaker: true, // Default true, but can be overridden by JSON\r\n    };\r\n\r\n    // Merge JSON config over defaults (JSON values take precedence)\r\n    return {\r\n      ...defaults,\r\n      ...jsonRequiredConfig,\r\n    };\r\n  }\r\n  return undefined;\r\n}\r\n\r\nfunction getPrompts(json: CoHubPatternJSON): PatternDefinition[\"prompts\"] {\r\n  const selectorPrompt = json.autogen_implementation.team_config?.selector_prompt;\r\n  return selectorPrompt ? { selector: selectorPrompt } : undefined;\r\n}\r\n\r\n// ============================================\r\n// PATTERN_LIBRARY  (!)\r\n// ============================================\r\n\r\nexport const LOADED_PATTERN_LIBRARY: PatternDefinition[] = PATTERN_JSON_FILES\r\n  .map(convertToPatternDefinition)\r\n  .sort((a, b) => a.id.localeCompare(b.id));\r\n\r\n// ============================================\r\n//  \r\n// ============================================\r\n\r\nexport const getLoadedPatternById = (id: string): PatternDefinition | undefined => {\r\n  return LOADED_PATTERN_LIBRARY.find((p) => p.id === id);\r\n};\r\n\r\nexport const getLoadedPatternsByCategory = (category: PatternCategory): PatternDefinition[] => {\r\n  return LOADED_PATTERN_LIBRARY.filter((p) => p.category === category);\r\n};\r\n\r\n// ============================================\r\n// TeamConfig   (!)\r\n// ============================================\r\n\r\nimport { Component, TeamConfig, AgentConfig } from \"../../../../../types/datamodel\";\r\n\r\n/**\r\n * Default model client - used for all agents\r\n */\r\nexport const DEFAULT_MODEL_CLIENT = {\r\n  provider: \"autogen_ext.models.openai.OpenAIChatCompletionClient\",\r\n  component_type: \"model\" as const,\r\n  config: {\r\n    model: \"gpt-4o-mini\",\r\n    temperature: 0.7,\r\n  },\r\n};\r\n\r\n/**\r\n * Default termination condition\r\n */\r\nexport const DEFAULT_TERMINATION = {\r\n  provider: \"autogen_agentchat.conditions.TextMentionTermination\",\r\n  component_type: \"termination\" as const,\r\n  config: {\r\n    text: \"TERMINATE\",\r\n  },\r\n};\r\n\r\n/**\r\n * JSON TeamConfig  \r\n */\r\nfunction buildTeamTemplate(json: CoHubPatternJSON): Component<TeamConfig> {\r\n  const providerFull = json.autogen_implementation.provider;\r\n  const providerShort = extractProviderShort(providerFull);\r\n  const teamConfig = json.autogen_implementation.team_config;\r\n\r\n  // AssistantAgent   \r\n  const ASSISTANT_AGENT_DEFAULTS = {\r\n    reflect_on_tool_use: false,\r\n    tool_call_summary_format: \"{result}\",\r\n    model_client_stream: false,\r\n  };\r\n\r\n  //  \r\n  const participants: Component<AgentConfig>[] = teamConfig?.participants?.map((p) => ({\r\n    provider: p.provider,\r\n    component_type: \"agent\" as const,\r\n    config: {\r\n      name: p.config.name,\r\n      description: p.config.description,\r\n      system_message: p.config.system_message,\r\n      model_client: DEFAULT_MODEL_CLIENT,\r\n      ...(p.config.handoffs ? { handoffs: p.config.handoffs } : {}),\r\n      // AssistantAgent   \r\n      ...ASSISTANT_AGENT_DEFAULTS,\r\n    } as AgentConfig,\r\n  })) || [\r\n    //   (JSON  )\r\n    {\r\n      provider: \"autogen_agentchat.agents.AssistantAgent\",\r\n      component_type: \"agent\" as const,\r\n      config: {\r\n        name: \"Agent_1\",\r\n        description: \"First agent\",\r\n        system_message: \"You are a helpful assistant.\",\r\n        model_client: DEFAULT_MODEL_CLIENT,\r\n        ...ASSISTANT_AGENT_DEFAULTS,\r\n      } as AgentConfig,\r\n    },\r\n    {\r\n      provider: \"autogen_agentchat.agents.AssistantAgent\",\r\n      component_type: \"agent\" as const,\r\n      config: {\r\n        name: \"Agent_2\",\r\n        description: \"Second agent\",\r\n        system_message: \"You are a helpful assistant. Say TERMINATE when done.\",\r\n        model_client: DEFAULT_MODEL_CLIENT,\r\n        ...ASSISTANT_AGENT_DEFAULTS,\r\n      } as AgentConfig,\r\n    },\r\n  ];\r\n\r\n  //  config\r\n  const config: any = {\r\n    participants,\r\n    termination_condition: DEFAULT_TERMINATION,\r\n  };\r\n\r\n  // SelectorGroupChat/MagenticOneGroupChat model_client \r\n  if (providerShort === \"SelectorGroupChat\" || providerShort === \"MagenticOneGroupChat\") {\r\n    config.model_client = DEFAULT_MODEL_CLIENT;\r\n    // Read allow_repeated_speaker from JSON config, default to true\r\n    const jsonRequiredConfig = json.autogen_implementation?.requiredConfig;\r\n    config.allow_repeated_speaker = jsonRequiredConfig?.allow_repeated_speaker ?? true;\r\n  }\r\n\r\n  // selector_prompt \r\n  if (teamConfig?.selector_prompt) {\r\n    config.selector_prompt = teamConfig.selector_prompt;\r\n  }\r\n\r\n  return {\r\n    provider: providerFull,\r\n    component_type: \"team\",\r\n    config: config as TeamConfig,\r\n  };\r\n}\r\n\r\n/**\r\n *   TeamConfig \r\n */\r\nexport const LOADED_PATTERN_TEMPLATES: Record<string, Component<TeamConfig>> = {};\r\n\r\n//   \r\nPATTERN_JSON_FILES.forEach((json) => {\r\n  LOADED_PATTERN_TEMPLATES[json.id] = buildTeamTemplate(json);\r\n});\r\n\r\n/**\r\n * ID  \r\n */\r\nexport const getLoadedPatternTemplate = (id: string): Component<TeamConfig> | undefined => {\r\n  return LOADED_PATTERN_TEMPLATES[id];\r\n};\r\n\r\nexport default {\r\n  LOADED_PATTERN_LIBRARY,\r\n  LOADED_PATTERN_TEMPLATES,\r\n  getLoadedPatternById,\r\n  getLoadedPatternsByCategory,\r\n  getLoadedPatternTemplate,\r\n  DEFAULT_MODEL_CLIENT,\r\n  DEFAULT_TERMINATION,\r\n};\r\n","/**\r\n * Pattern Templates - Complete Team Configuration Templates\r\n *\r\n * ## \r\n * :   ~400  \r\n * : data/*.json   (pattern-loader.ts )\r\n *\r\n *    :\r\n * 1. AG_Cohub/patterns/ JSON  \r\n * 2. data/  \r\n * 3. pattern-loader.ts import \r\n * 4. ! (   )\r\n */\r\n\r\nimport { Component, TeamConfig, AgentConfig } from \"../../../../../types/datamodel\";\r\n\r\n// ============================================\r\n// RE-EXPORTS from pattern-loader.ts\r\n// ============================================\r\n\r\nexport {\r\n  DEFAULT_MODEL_CLIENT,\r\n  DEFAULT_TERMINATION,\r\n  LOADED_PATTERN_TEMPLATES as PATTERN_TEMPLATES,\r\n  getLoadedPatternTemplate as getPatternTemplate,\r\n} from \"./pattern-loader\";\r\n\r\n// Import for local use\r\nimport {\r\n  DEFAULT_MODEL_CLIENT,\r\n  LOADED_PATTERN_TEMPLATES as PATTERN_TEMPLATES,\r\n} from \"./pattern-loader\";\r\n\r\n// ============================================\r\n// ADDITIONAL TERMINATION CONDITIONS\r\n// ============================================\r\n\r\n/**\r\n * Max message termination (as fallback)\r\n */\r\nexport const MAX_MESSAGE_TERMINATION = {\r\n  provider: \"autogen_agentchat.conditions.MaxMessageTermination\",\r\n  component_type: \"termination\" as const,\r\n  config: {\r\n    max_messages: 20,\r\n  },\r\n};\r\n\r\n/**\r\n * Combined termination (text OR max messages)\r\n */\r\nexport const COMBINED_TERMINATION = {\r\n  provider: \"autogen_agentchat.conditions.CombinedTermination\",\r\n  component_type: \"termination\" as const,\r\n  config: {\r\n    conditions: [\r\n      {\r\n        provider: \"autogen_agentchat.conditions.TextMentionTermination\",\r\n        component_type: \"termination\",\r\n        config: { text: \"TERMINATE\" },\r\n      },\r\n      MAX_MESSAGE_TERMINATION,\r\n    ],\r\n  },\r\n};\r\n\r\n// ============================================\r\n// HELPER FUNCTIONS\r\n// ============================================\r\n\r\n/**\r\n * AssistantAgent   \r\n */\r\nconst ASSISTANT_AGENT_DEFAULTS = {\r\n  reflect_on_tool_use: false,\r\n  tool_call_summary_format: \"{result}\",\r\n  model_client_stream: false,\r\n};\r\n\r\n/**\r\n * Create a basic agent configuration\r\n * Includes all required fields for AssistantAgentConfig\r\n */\r\nexport const createAgentConfig = (\r\n  name: string,\r\n  description: string,\r\n  systemMessage?: string,\r\n  modelClient = DEFAULT_MODEL_CLIENT\r\n): Component<AgentConfig> => ({\r\n  provider: \"autogen_agentchat.agents.AssistantAgent\",\r\n  component_type: \"agent\" as const,\r\n  config: {\r\n    name,\r\n    description,\r\n    system_message: systemMessage || `You are ${name}. ${description}`,\r\n    model_client: modelClient,\r\n    // AssistantAgent  \r\n    ...ASSISTANT_AGENT_DEFAULTS,\r\n  } as AgentConfig,\r\n});\r\n\r\n/**\r\n * Get all available pattern IDs\r\n */\r\nexport const getAvailablePatternIds = (): string[] => {\r\n  return Object.keys(PATTERN_TEMPLATES);\r\n};\r\n\r\n/**\r\n * Clone a template with deep copy\r\n */\r\nexport const cloneTemplate = (\r\n  template: Component<TeamConfig>\r\n): Component<TeamConfig> => {\r\n  return JSON.parse(JSON.stringify(template));\r\n};\r\n\r\n/**\r\n * Create team config from pattern with custom participants\r\n *\r\n * This merges user's agents with the pattern's structure\r\n */\r\nexport const createTeamFromPattern = (\r\n  patternId: string,\r\n  customParticipants?: Component<AgentConfig>[],\r\n  customModelClient?: typeof DEFAULT_MODEL_CLIENT\r\n): Component<TeamConfig> | null => {\r\n  const template = PATTERN_TEMPLATES[patternId];\r\n  if (!template) return null;\r\n\r\n  const teamConfig = cloneTemplate(template);\r\n  const config = teamConfig.config as any;\r\n\r\n  // Replace model_client if custom one provided\r\n  if (customModelClient) {\r\n    // Update team-level model_client (for SelectorGroupChat)\r\n    if (config.model_client) {\r\n      config.model_client = customModelClient;\r\n    }\r\n\r\n    // Update each participant's model_client\r\n    if (config.participants) {\r\n      config.participants = config.participants.map((p: any) => {\r\n        if (p.config?.model_client) {\r\n          return {\r\n            ...p,\r\n            config: {\r\n              ...p.config,\r\n              model_client: customModelClient,\r\n            },\r\n          };\r\n        }\r\n        return p;\r\n      });\r\n    }\r\n  }\r\n\r\n  // Replace participants if custom ones provided\r\n  if (customParticipants && customParticipants.length > 0) {\r\n    // Ensure each participant has model_client\r\n    config.participants = customParticipants.map((p) => {\r\n      const participantConfig = p.config as any;\r\n      if (!participantConfig?.model_client) {\r\n        return {\r\n          ...p,\r\n          config: {\r\n            ...participantConfig,\r\n            model_client: customModelClient || DEFAULT_MODEL_CLIENT,\r\n          },\r\n        };\r\n      }\r\n      return p;\r\n    });\r\n  }\r\n\r\n  return teamConfig;\r\n};\r\n\r\nexport default {\r\n  PATTERN_TEMPLATES,\r\n  getPatternTemplate: (id: string) => PATTERN_TEMPLATES[id],\r\n  getAvailablePatternIds,\r\n  cloneTemplate,\r\n  createTeamFromPattern,\r\n  createAgentConfig,\r\n  DEFAULT_MODEL_CLIENT,\r\n  MAX_MESSAGE_TERMINATION,\r\n  COMBINED_TERMINATION,\r\n};\r\n","/**\r\n * Abstract Pattern Schema Definition\r\n *\r\n * JSON-based pattern definitions for visual flow editing.\r\n * Each pattern defines:\r\n * - Structure (how agents are arranged)\r\n * - Connections (how agents communicate)\r\n * - Visual representation (layout, colors, icons)\r\n *\r\n * ##   \r\n * 1. data/*.json  \r\n * 2. pattern-loader.ts import \r\n * 3. ! (   )\r\n *\r\n * Inspired by:\r\n * - Strands Agents Collaboration Patterns (AWS)\r\n * - CrewAI Role-Based Design\r\n * - LangChain Multi-Agent Architectures\r\n */\r\n\r\nimport { Component, TeamConfig, AgentConfig } from \"../../../../../types/datamodel\";\r\nimport {\r\n  getPatternTemplate,\r\n  createTeamFromPattern,\r\n  DEFAULT_MODEL_CLIENT,\r\n} from \"./pattern-templates\";\r\n\r\n// ============================================\r\n// TYPE RE-EXPORTS (from pattern-types.ts)\r\n// ============================================\r\n\r\nexport type {\r\n  PatternCategory,\r\n  LayoutType,\r\n  PatternVisual,\r\n  PatternConnection,\r\n  PatternDefinition,\r\n} from \"./pattern-types\";\r\n\r\nimport type {\r\n  PatternCategory,\r\n  PatternDefinition,\r\n} from \"./pattern-types\";\r\n\r\n// ============================================\r\n// PATTERN LIBRARY (Loaded from JSON!)\r\n// ============================================\r\n\r\n/**\r\n * Pattern Library - Dynamically loaded from JSON files\r\n *\r\n * :   ~350   \r\n * : data/*.json  \r\n *\r\n *    :\r\n * 1. AG_Cohub/patterns/ JSON  \r\n * 2. data/  \r\n * 3. pattern-loader.ts import \r\n */\r\nexport { LOADED_PATTERN_LIBRARY as PATTERN_LIBRARY } from \"./pattern-loader\";\r\n\r\n// Import for local use in helper functions\r\nimport { LOADED_PATTERN_LIBRARY as PATTERN_LIBRARY } from \"./pattern-loader\";\r\n\r\n// ============================================\r\n// HELPER FUNCTIONS\r\n// ============================================\r\n\r\n/**\r\n * Get pattern definition by ID\r\n */\r\nexport const getPatternById = (id: string): PatternDefinition | undefined => {\r\n  return PATTERN_LIBRARY.find(p => p.id === id);\r\n};\r\n\r\n/**\r\n * Get patterns by category\r\n */\r\nexport const getPatternsByCategory = (category: PatternCategory): PatternDefinition[] => {\r\n  return PATTERN_LIBRARY.filter(p => p.category === category);\r\n};\r\n\r\n/**\r\n * Get selector prompt for a pattern (with placeholders)\r\n */\r\nexport const getPatternSelectorPrompt = (patternId: string): string | undefined => {\r\n  const pattern = getPatternById(patternId);\r\n  return pattern?.prompts?.selector;\r\n};\r\n\r\n/**\r\n * Get pattern by AutoGen provider name\r\n */\r\nexport const getPatternByProvider = (provider: string): PatternDefinition | undefined => {\r\n  return PATTERN_LIBRARY.find(p =>\r\n    provider.toLowerCase().includes(p.autogenProvider.toLowerCase())\r\n  );\r\n};\r\n\r\n/**\r\n * Apply pattern configuration to team config\r\n * This is the ABSTRACT way to configure teams - no hardcoded prompts!\r\n */\r\nexport const applyPatternToConfig = (\r\n  config: Record<string, unknown>,\r\n  patternId: string\r\n): Record<string, unknown> => {\r\n  const pattern = getPatternById(patternId);\r\n  if (!pattern) return config;\r\n\r\n  const updatedConfig = { ...config };\r\n\r\n  // Apply selector prompt from schema (not hardcoded!)\r\n  if (pattern.prompts?.selector && pattern.autogenProvider === \"SelectorGroupChat\") {\r\n    updatedConfig.selector_prompt = pattern.prompts.selector;\r\n  }\r\n\r\n  // Apply requiredConfig if present\r\n  if (pattern.requiredConfig) {\r\n    if (pattern.requiredConfig.model_client) {\r\n      updatedConfig.model_client = pattern.requiredConfig.model_client;\r\n    }\r\n    if (pattern.requiredConfig.allow_repeated_speaker !== undefined) {\r\n      updatedConfig.allow_repeated_speaker = pattern.requiredConfig.allow_repeated_speaker;\r\n    }\r\n  }\r\n\r\n  return updatedConfig;\r\n};\r\n\r\n/**\r\n * Convert pattern definition to team config\r\n */\r\nexport const patternToTeamConfig = (\r\n  pattern: PatternDefinition,\r\n  agents: Array<{ name: string; description: string; tools?: string[] }>\r\n): Record<string, unknown> => {\r\n  const baseConfig: Record<string, unknown> = {\r\n    provider: pattern.autogenProvider,\r\n    component_type: \"team\",\r\n    config: {\r\n      participants: agents.map((agent) => ({\r\n        provider: \"AssistantAgent\",\r\n        component_type: \"agent\",\r\n        config: {\r\n          name: agent.name,\r\n          description: agent.description,\r\n          tools: agent.tools || []\r\n        }\r\n      })),\r\n    }\r\n  };\r\n\r\n  // Apply pattern-specific config (prompts, etc.)\r\n  if (baseConfig.config && typeof baseConfig.config === 'object') {\r\n    baseConfig.config = applyPatternToConfig(\r\n      baseConfig.config as Record<string, unknown>,\r\n      pattern.id\r\n    );\r\n  }\r\n\r\n  return baseConfig;\r\n};\r\n\r\n// ============================================\r\n// TEMPLATE INTEGRATION\r\n// ============================================\r\n\r\n/**\r\n * Get the default team configuration template for a pattern\r\n *\r\n * This returns a complete, ready-to-run team config with:\r\n * - model_client configured\r\n * - termination_condition set\r\n * - default participants\r\n */\r\nexport const getDefaultTeamConfig = (\r\n  patternId: string\r\n): Component<TeamConfig> | undefined => {\r\n  return getPatternTemplate(patternId);\r\n};\r\n\r\n/**\r\n * Create a team configuration from a pattern with custom participants\r\n *\r\n * @param patternId - The pattern to use as base\r\n * @param participants - Optional custom participants (will be given model_client)\r\n * @param modelClient - Optional custom model client\r\n */\r\nexport const createTeamConfigFromPattern = (\r\n  patternId: string,\r\n  participants?: Component<AgentConfig>[],\r\n  modelClient?: typeof DEFAULT_MODEL_CLIENT\r\n): Component<TeamConfig> | null => {\r\n  return createTeamFromPattern(patternId, participants, modelClient);\r\n};\r\n\r\n/**\r\n * Check if a pattern has a valid template\r\n */\r\nexport const hasPatternTemplate = (patternId: string): boolean => {\r\n  return getPatternTemplate(patternId) !== undefined;\r\n};\r\n\r\n/**\r\n * Get all patterns that have complete templates\r\n */\r\nexport const getPatternsWithTemplates = (): PatternDefinition[] => {\r\n  return PATTERN_LIBRARY.filter((p) => hasPatternTemplate(p.id));\r\n};\r\n\r\n// Re-export template utilities for convenience\r\nexport { DEFAULT_MODEL_CLIENT } from \"./pattern-templates\";\r\n","/**\r\n * Layout Generator\r\n *\r\n * Generates React Flow layouts based on abstract pattern definitions.\r\n * Each layout type has distinct visual characteristics.\r\n */\r\n\r\nimport { Node } from \"@xyflow/react\";\r\nimport { CustomEdge } from \"../edge\";\r\nimport {\r\n  PatternDefinition,\r\n  LayoutType,\r\n  PatternVisual,\r\n} from \"./pattern-schema\";\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport {\r\n  PatternLayoutResult,\r\n  NODE_DIMENSIONS,\r\n  createAgentNode,\r\n  createUserNode,\r\n  createEndNode,\r\n  createEdge,\r\n} from \"./types\";\r\n\r\n// Layout constants - increased spacing for better visibility\r\nconst CANVAS = {\r\n  centerX: 500,\r\n  centerY: 320,\r\n  radius: 300,       // Increased for better node separation\r\n  layerSpacing: 200, // Increased for tree layouts\r\n  nodeSpacing: 280,  // Increased for chain layouts\r\n};\r\n\r\n/**\r\n * Create a special hub/coordinator node\r\n */\r\nconst createHubNode = (\r\n  id: string,\r\n  name: string,\r\n  type: \"selector\" | \"supervisor\" | \"aggregator\" | \"triage\",\r\n  visual: PatternVisual,\r\n  position: { x: number; y: number },\r\n  isActive: boolean,\r\n  isProcessing: boolean\r\n): Node => {\r\n  const typeLabels = {\r\n    selector: { label: \"LLM Selector\", icon: \"\" },\r\n    supervisor: { label: \"Supervisor\", icon: \"\" },\r\n    aggregator: { label: \"Aggregator\", icon: \"\" },\r\n    triage: { label: \"Triage\", icon: \"\" },\r\n  };\r\n\r\n  const typeInfo = typeLabels[type];\r\n\r\n  return {\r\n    id,\r\n    type: \"agentNode\",\r\n    position,\r\n    data: {\r\n      label: name || typeInfo.label,\r\n      agentType: typeInfo.label,\r\n      description: `${typeInfo.icon} ${typeInfo.label}`,\r\n      isActive,\r\n      isProcessing,\r\n      isHub: true,\r\n      hubType: type,\r\n      color: visual.primaryColor,\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * Generate CHAIN layout (Sequential)\r\n * A  B  C  D\r\n */\r\nconst generateChainLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  const startX = 50;\r\n  const y = CANVAS.centerY - NODE_DIMENSIONS.default.height / 2;\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      { x: startX, y },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Agent nodes in a line\r\n  participants.forEach((p, index) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    const x = startX + (index + 1) * CANVAS.nodeSpacing;\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        { x, y },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    // Edge from previous\r\n    const prevId = index === 0 ? \"user\" : participants[index - 1].config?.name || `agent-${index - 1}`;\r\n    const isActive = participatedAgents.has(agentName);\r\n\r\n    edges.push(\r\n      createEdge(`${prevId}-to-${agentName}`, prevId, agentName, {\r\n        stroke: isActive ? visual.primaryColor : \"#6b7280\",\r\n        strokeWidth: isActive ? 2 : 1,\r\n        animated: isActive && isProcessing,\r\n      })\r\n    );\r\n\r\n    // Loop back edge for reflection pattern\r\n    if (visual.bidirectional && index === participants.length - 1 && participants.length === 2) {\r\n      edges.push(\r\n        createEdge(`${agentName}-loop`, agentName, participants[0].config?.name || \"agent-0\", {\r\n          stroke: visual.secondaryColor,\r\n          strokeWidth: 1,\r\n          strokeDasharray: \"5,5\",\r\n          label: \"revise\",\r\n          routingType: \"secondary\",  // Loop uses secondary routing style\r\n        })\r\n      );\r\n    }\r\n  });\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    const lastAgent = participants[participants.length - 1];\r\n    const lastAgentName = lastAgent?.config?.name || `agent-${participants.length - 1}`;\r\n    const endX = startX + (participants.length + 1) * CANVAS.nodeSpacing;\r\n\r\n    nodes.push(createEndNode({ x: endX, y }, run));\r\n    edges.push(\r\n      createEdge(`${lastAgentName}-to-end`, lastAgentName, \"end\", {\r\n        stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n        strokeWidth: 2,\r\n      })\r\n    );\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Generate HUB-SPOKE layout (Selector, Supervisor)\r\n * Central hub with agents arranged in semi-circle\r\n */\r\nconst generateHubSpokeLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      {\r\n        x: CANVAS.centerX - 300,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Central hub node\r\n  const hubId = visual.centerNodeType || \"hub\";\r\n  nodes.push(\r\n    createHubNode(\r\n      hubId,\r\n      \"\",\r\n      visual.centerNodeType || \"selector\",\r\n      visual,\r\n      {\r\n        x: CANVAS.centerX - NODE_DIMENSIONS.default.width / 2,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      true,\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Edge from user to hub\r\n  edges.push(\r\n    createEdge(\"user-to-hub\", \"user\", hubId, {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.size > 0,\r\n    })\r\n  );\r\n\r\n  // Agents in semi-circle\r\n  const startAngle = -Math.PI / 2.5; // Wider spread\r\n  const endAngle = Math.PI / 2.5;\r\n  const angleStep = participants.length > 1\r\n    ? (endAngle - startAngle) / (participants.length - 1)\r\n    : 0;\r\n\r\n  participants.forEach((p, index) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    const angle = participants.length === 1 ? 0 : startAngle + index * angleStep;\r\n    const x = CANVAS.centerX + CANVAS.radius * Math.cos(angle);\r\n    const y = CANVAS.centerY + CANVAS.radius * Math.sin(angle);\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        {\r\n          x: x - NODE_DIMENSIONS.default.width / 2,\r\n          y: y - NODE_DIMENSIONS.default.height / 2,\r\n        },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    const isAgentActive = participatedAgents.has(agentName);\r\n\r\n    // Hub to agent edge\r\n    edges.push(\r\n      createEdge(`hub-to-${agentName}`, hubId, agentName, {\r\n        animated: isAgentActive && isProcessing,\r\n        stroke: isAgentActive ? visual.primaryColor : \"#6b7280\",\r\n        strokeWidth: isAgentActive ? 2 : 1,\r\n        opacity: isAgentActive ? 1 : 0.4,\r\n        label: isAgentActive && visual.centerNodeType === \"selector\" ? \"selected\" : \"\",\r\n      })\r\n    );\r\n\r\n    // Return edge (if bidirectional)\r\n    if (visual.bidirectional) {\r\n      edges.push(\r\n        createEdge(`${agentName}-to-hub`, agentName, hubId, {\r\n          stroke: isAgentActive ? visual.secondaryColor : \"#6b7280\",\r\n          strokeWidth: 1,\r\n          strokeDasharray: \"5,5\",\r\n          opacity: isAgentActive ? 0.7 : 0.2,\r\n          routingType: \"secondary\",\r\n        })\r\n      );\r\n    }\r\n  });\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        {\r\n          x: CANVAS.centerX + CANVAS.radius + 100,\r\n          y: CANVAS.centerY - NODE_DIMENSIONS.end.height / 2,\r\n        },\r\n        run\r\n      )\r\n    );\r\n\r\n    edges.push(\r\n      createEdge(\"hub-to-end\", hubId, \"end\", {\r\n        stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n        strokeWidth: 2,\r\n      })\r\n    );\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Generate MESH layout (Swarm)\r\n * All agents can communicate with each other\r\n */\r\nconst generateMeshLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      {\r\n        x: CANVAS.centerX - 350,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // First agent as triage (center)\r\n  const triageAgent = participants[0];\r\n  const triageName = triageAgent?.config?.name || \"triage\";\r\n  const otherAgents = participants.slice(1);\r\n\r\n  nodes.push(\r\n    createHubNode(\r\n      triageName,\r\n      triageName,\r\n      \"triage\",\r\n      visual,\r\n      {\r\n        x: CANVAS.centerX - NODE_DIMENSIONS.default.width / 2,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.has(triageName),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Edge from user to triage\r\n  edges.push(\r\n    createEdge(\"user-to-triage\", \"user\", triageName, {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.has(triageName),\r\n    })\r\n  );\r\n\r\n  // Other agents in circle around triage\r\n  const angleStep = (2 * Math.PI) / Math.max(1, otherAgents.length);\r\n  const startAngle = -Math.PI / 2;\r\n\r\n  otherAgents.forEach((p, index) => {\r\n    const agentName = p.config?.name || `agent-${index + 1}`;\r\n    const angle = startAngle + index * angleStep;\r\n    const x = CANVAS.centerX + CANVAS.radius * Math.cos(angle);\r\n    const y = CANVAS.centerY + CANVAS.radius * Math.sin(angle);\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        {\r\n          x: x - NODE_DIMENSIONS.default.width / 2,\r\n          y: y - NODE_DIMENSIONS.default.height / 2,\r\n        },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    const isAgentActive = participatedAgents.has(agentName);\r\n\r\n    // Bidirectional edges with triage\r\n    edges.push(\r\n      createEdge(`${triageName}-to-${agentName}`, triageName, agentName, {\r\n        animated: isAgentActive && isProcessing,\r\n        stroke: isAgentActive ? visual.primaryColor : \"#6b7280\",\r\n        strokeWidth: isAgentActive ? 2 : 1,\r\n        strokeDasharray: visual.edgeStyle === \"dashed\" ? \"8,4\" : undefined,\r\n        opacity: isAgentActive ? 1 : 0.4,\r\n        label: isAgentActive ? \"handoff\" : \"\",\r\n      })\r\n    );\r\n\r\n    edges.push(\r\n      createEdge(`${agentName}-to-${triageName}`, agentName, triageName, {\r\n        stroke: isAgentActive ? visual.secondaryColor : \"#6b7280\",\r\n        strokeWidth: 1,\r\n        strokeDasharray: \"5,5\",\r\n        opacity: isAgentActive ? 0.8 : 0.2,\r\n        routingType: \"secondary\",\r\n      })\r\n    );\r\n  });\r\n\r\n  // Cross-agent connections (mesh)\r\n  if (visual.showCrossConnections && otherAgents.length > 1) {\r\n    otherAgents.forEach((p1, i) => {\r\n      otherAgents.forEach((p2, j) => {\r\n        if (i < j) { // Only one direction to avoid duplicates\r\n          const agent1 = p1.config?.name || `agent-${i + 1}`;\r\n          const agent2 = p2.config?.name || `agent-${j + 1}`;\r\n          const bothActive = participatedAgents.has(agent1) && participatedAgents.has(agent2);\r\n\r\n          if (bothActive) {\r\n            edges.push(\r\n              createEdge(`${agent1}-mesh-${agent2}`, agent1, agent2, {\r\n                stroke: \"#a855f7\", // Purple for mesh\r\n                strokeWidth: 1,\r\n                strokeDasharray: \"3,3\",\r\n                opacity: 0.5,\r\n                label: \"\",\r\n              })\r\n            );\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        {\r\n          x: CANVAS.centerX + CANVAS.radius + 100,\r\n          y: CANVAS.centerY - NODE_DIMENSIONS.end.height / 2,\r\n        },\r\n        run\r\n      )\r\n    );\r\n\r\n    const lastActive = [...participatedAgents].filter(a => a !== \"user\").pop();\r\n    if (lastActive) {\r\n      edges.push(\r\n        createEdge(`${lastActive}-to-end`, lastActive, \"end\", {\r\n          stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n          strokeWidth: 2,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Generate FORK-JOIN layout (Parallel)\r\n * User  Aggregator  [Agent1, Agent2, ...]  Aggregator  End\r\n */\r\nconst generateForkJoinLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  const leftX = 50;\r\n  const centerX = CANVAS.centerX;\r\n  const rightX = CANVAS.centerX + CANVAS.radius + 50;\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      { x: leftX, y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2 },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Aggregator node (left - distributes)\r\n  nodes.push(\r\n    createHubNode(\r\n      \"aggregator-in\",\r\n      \"Distribute\",\r\n      \"aggregator\",\r\n      visual,\r\n      {\r\n        x: leftX + 180,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      true,\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  edges.push(\r\n    createEdge(\"user-to-agg\", \"user\", \"aggregator-in\", {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: isProcessing,\r\n    })\r\n  );\r\n\r\n  // Worker agents (spread vertically) - increased spacing to prevent overlap\r\n  const agentSpacing = 180;  // Increased from 140 to prevent node overlap (node height = 100px)\r\n  const startY = CANVAS.centerY - ((participants.length - 1) * agentSpacing) / 2;\r\n\r\n  participants.forEach((p, index) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    const y = startY + index * agentSpacing;\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        { x: centerX, y: y - NODE_DIMENSIONS.default.height / 2 },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    const isActive = participatedAgents.has(agentName);\r\n\r\n    // Fan-out edges\r\n    edges.push(\r\n      createEdge(`agg-to-${agentName}`, \"aggregator-in\", agentName, {\r\n        stroke: isActive ? visual.primaryColor : \"#6b7280\",\r\n        strokeWidth: isActive ? 2 : 1,\r\n        animated: isActive && isProcessing,\r\n        label: isActive ? \"task\" : \"\",\r\n      })\r\n    );\r\n\r\n    // Fan-in edges\r\n    edges.push(\r\n      createEdge(`${agentName}-to-agg-out`, agentName, \"aggregator-out\", {\r\n        stroke: isActive ? visual.secondaryColor : \"#6b7280\",\r\n        strokeWidth: isActive ? 2 : 1,\r\n        animated: isActive && isProcessing,\r\n        label: isActive ? \"result\" : \"\",\r\n      })\r\n    );\r\n  });\r\n\r\n  // Aggregator node (right - collects)\r\n  nodes.push(\r\n    createHubNode(\r\n      \"aggregator-out\",\r\n      \"Aggregate\",\r\n      \"aggregator\",\r\n      visual,\r\n      {\r\n        x: rightX,\r\n        y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n      participatedAgents.size > 1,\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        { x: rightX + 180, y: CANVAS.centerY - NODE_DIMENSIONS.end.height / 2 },\r\n        run\r\n      )\r\n    );\r\n\r\n    edges.push(\r\n      createEdge(\"agg-out-to-end\", \"aggregator-out\", \"end\", {\r\n        stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n        strokeWidth: 2,\r\n      })\r\n    );\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Generate TREE layout (Hierarchical)\r\n * Leader  Planners  Workers\r\n */\r\nconst generateTreeLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  // Simple 2-level tree for now\r\n  // First agent is leader, rest are workers\r\n  const leader = participants[0];\r\n  const leaderName = leader?.config?.name || \"leader\";\r\n  const workers = participants.slice(1);\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      { x: 50, y: 50 },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Leader node\r\n  nodes.push(\r\n    createHubNode(\r\n      leaderName,\r\n      leaderName,\r\n      \"supervisor\",\r\n      visual,\r\n      { x: 250, y: 50 },\r\n      participatedAgents.has(leaderName),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  edges.push(\r\n    createEdge(\"user-to-leader\", \"user\", leaderName, {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.has(leaderName),\r\n    })\r\n  );\r\n\r\n  // Worker nodes\r\n  const workerY = 320;\r\n  const workerSpacing = 250;\r\n  const startX = CANVAS.centerX - ((workers.length - 1) * workerSpacing) / 2;\r\n\r\n  workers.forEach((p, index) => {\r\n    const agentName = p.config?.name || `worker-${index}`;\r\n    const x = startX + index * workerSpacing;\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        { x, y: workerY },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n\r\n    const isActive = participatedAgents.has(agentName);\r\n\r\n    // Leader to worker\r\n    edges.push(\r\n      createEdge(`${leaderName}-to-${agentName}`, leaderName, agentName, {\r\n        stroke: isActive ? visual.primaryColor : \"#6b7280\",\r\n        strokeWidth: isActive ? 2 : 1,\r\n        animated: isActive && isProcessing,\r\n      })\r\n    );\r\n\r\n    // Worker back to leader\r\n    if (visual.bidirectional) {\r\n      edges.push(\r\n        createEdge(`${agentName}-to-${leaderName}`, agentName, leaderName, {\r\n          stroke: isActive ? visual.secondaryColor : \"#6b7280\",\r\n          strokeWidth: 1,\r\n          strokeDasharray: \"5,5\",\r\n          opacity: isActive ? 0.7 : 0.3,\r\n          routingType: \"secondary\",\r\n        })\r\n      );\r\n    }\r\n  });\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        { x: 500, y: 50 },\r\n        run\r\n      )\r\n    );\r\n\r\n    edges.push(\r\n      createEdge(\"leader-to-end\", leaderName, \"end\", {\r\n        stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n        strokeWidth: 2,\r\n      })\r\n    );\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Generate RING layout (Debate)\r\n * Circular arrangement with all-to-all connections\r\n */\r\nconst generateRingLayout = (\r\n  participants: Component<AgentConfig>[],\r\n  visual: PatternVisual,\r\n  participatedAgents: Set<string>,\r\n  isProcessing: boolean,\r\n  isComplete: boolean,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const nodes: Node[] = [];\r\n  const edges: CustomEdge[] = [];\r\n\r\n  // User node\r\n  nodes.push(\r\n    createUserNode(\r\n      { x: CANVAS.centerX - 350, y: CANVAS.centerY - NODE_DIMENSIONS.default.height / 2 },\r\n      participatedAgents.has(\"user\"),\r\n      isProcessing\r\n    )\r\n  );\r\n\r\n  // Agents in a circle\r\n  const angleStep = (2 * Math.PI) / participants.length;\r\n  const startAngle = -Math.PI / 2;\r\n\r\n  participants.forEach((p, index) => {\r\n    const agentName = p.config?.name || `agent-${index}`;\r\n    const angle = startAngle + index * angleStep;\r\n    const x = CANVAS.centerX + (CANVAS.radius * 0.8) * Math.cos(angle);\r\n    const y = CANVAS.centerY + (CANVAS.radius * 0.8) * Math.sin(angle);\r\n\r\n    nodes.push(\r\n      createAgentNode(\r\n        agentName,\r\n        agentName,\r\n        p.label || \"\",\r\n        p.description || \"\",\r\n        {\r\n          x: x - NODE_DIMENSIONS.default.width / 2,\r\n          y: y - NODE_DIMENSIONS.default.height / 2,\r\n        },\r\n        participatedAgents.has(agentName),\r\n        isProcessing\r\n      )\r\n    );\r\n  });\r\n\r\n  // First agent connects to user\r\n  const firstAgent = participants[0]?.config?.name || \"agent-0\";\r\n  edges.push(\r\n    createEdge(\"user-to-first\", \"user\", firstAgent, {\r\n      stroke: \"#2563eb\",\r\n      strokeWidth: 2,\r\n      animated: participatedAgents.has(firstAgent),\r\n    })\r\n  );\r\n\r\n  // All-to-all connections in ring\r\n  if (visual.showCrossConnections) {\r\n    participants.forEach((p1, i) => {\r\n      participants.forEach((p2, j) => {\r\n        if (i < j) {\r\n          const agent1 = p1.config?.name || `agent-${i}`;\r\n          const agent2 = p2.config?.name || `agent-${j}`;\r\n          const bothActive = participatedAgents.has(agent1) && participatedAgents.has(agent2);\r\n\r\n          edges.push(\r\n            createEdge(`${agent1}-debate-${agent2}`, agent1, agent2, {\r\n              stroke: bothActive ? visual.primaryColor : \"#6b7280\",\r\n              strokeWidth: bothActive ? 2 : 1,\r\n              strokeDasharray: \"4,4\",\r\n              opacity: bothActive ? 0.8 : 0.3,\r\n              label: bothActive ? \"\" : \"\",\r\n            })\r\n          );\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // End node\r\n  if (isComplete) {\r\n    nodes.push(\r\n      createEndNode(\r\n        { x: CANVAS.centerX + CANVAS.radius + 100, y: CANVAS.centerY - NODE_DIMENSIONS.end.height / 2 },\r\n        run\r\n      )\r\n    );\r\n\r\n    const lastActive = [...participatedAgents].filter(a => a !== \"user\").pop();\r\n    if (lastActive) {\r\n      edges.push(\r\n        createEdge(`${lastActive}-to-end`, lastActive, \"end\", {\r\n          stroke: run?.status === \"complete\" ? \"#22c55e\" : \"#ef4444\",\r\n          strokeWidth: 2,\r\n          label: \"verdict\",\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  return { nodes, edges };\r\n};\r\n\r\n/**\r\n * Main layout generator - routes to appropriate generator based on layout type\r\n */\r\nexport const generateLayoutFromPattern = (\r\n  pattern: PatternDefinition,\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run\r\n): PatternLayoutResult => {\r\n  const participants = teamConfig.config?.participants || [];\r\n  const isProcessing = run?.status === \"active\" || run?.status === \"awaiting_input\";\r\n  const isComplete = [\"complete\", \"error\", \"stopped\"].includes(run?.status || \"\");\r\n\r\n  const layoutGenerators: Record<LayoutType, () => PatternLayoutResult> = {\r\n    chain: () => generateChainLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n    \"hub-spoke\": () => generateHubSpokeLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n    mesh: () => generateMeshLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n    \"fork-join\": () => generateForkJoinLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n    tree: () => generateTreeLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n    ring: () => generateRingLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run),\r\n  };\r\n\r\n  const generator = layoutGenerators[pattern.visual.layout];\r\n  return generator ? generator() : generateChainLayout(participants, pattern.visual, participatedAgents, isProcessing, isComplete, run);\r\n};\r\n","/**\r\n * Pattern Module Index\r\n *\r\n * Exports all pattern generators and provides pattern detection logic.\r\n * Now uses abstract JSON-based pattern definitions for extensibility.\r\n */\r\n\r\nimport {\r\n  Component,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n} from \"../../../../../types/datamodel\";\r\nimport { PatternType, PatternLayoutResult, PatternGenerator } from \"./types\";\r\nimport { generateSequentialLayout } from \"./sequential-pattern\";\r\nimport { generateSelectorLayout } from \"./selector-pattern\";\r\nimport { generateHandoffLayout } from \"./handoff-pattern\";\r\n\r\n// New pattern schema system\r\nimport {\r\n  PATTERN_LIBRARY,\r\n  PatternDefinition,\r\n  PatternCategory,\r\n  getPatternById,\r\n  getPatternsByCategory,\r\n} from \"./pattern-schema\";\r\nimport { generateLayoutFromPattern } from \"./layout-generator\";\r\n\r\n// Export types and constants\r\nexport * from \"./types\";\r\nexport { NODE_DIMENSIONS } from \"./types\";\r\n\r\n// Export individual pattern generators (legacy)\r\nexport { generateSequentialLayout } from \"./sequential-pattern\";\r\nexport { generateSelectorLayout } from \"./selector-pattern\";\r\nexport { generateHandoffLayout } from \"./handoff-pattern\";\r\n\r\n// Export new pattern schema system\r\nexport {\r\n  PATTERN_LIBRARY,\r\n  getPatternById,\r\n  getPatternsByCategory,\r\n  getPatternSelectorPrompt,\r\n  getPatternByProvider,\r\n  applyPatternToConfig,\r\n  patternToTeamConfig,\r\n  // New template integration functions\r\n  getDefaultTeamConfig,\r\n  createTeamConfigFromPattern,\r\n  hasPatternTemplate,\r\n  getPatternsWithTemplates,\r\n  DEFAULT_MODEL_CLIENT,\r\n} from \"./pattern-schema\";\r\nexport type { PatternDefinition, PatternCategory } from \"./pattern-schema\";\r\nexport { generateLayoutFromPattern } from \"./layout-generator\";\r\n\r\n// Export pattern templates\r\nexport {\r\n  PATTERN_TEMPLATES,\r\n  getPatternTemplate,\r\n  cloneTemplate,\r\n  createTeamFromPattern,\r\n  createAgentConfig,\r\n  DEFAULT_TERMINATION,\r\n  COMBINED_TERMINATION,\r\n} from \"./pattern-templates\";\r\n\r\n/**\r\n * Detect pattern type from team configuration\r\n */\r\nexport const getPatternType = (\r\n  teamConfig: Component<TeamConfig>\r\n): PatternType => {\r\n  const provider = teamConfig.provider || \"\";\r\n  const participants = teamConfig.config?.participants || [];\r\n\r\n  // Check for Swarm (Handoff pattern)\r\n  if (provider.includes(\"Swarm\")) {\r\n    return \"handoff\";\r\n  }\r\n\r\n  // Check for SelectorGroupChat\r\n  if (provider.includes(\"SelectorGroupChat\")) {\r\n    // Check for debate pattern (advocate, critic, judge)\r\n    const names = participants.map(\r\n      (p: Component<AgentConfig>) => p.config?.name?.toLowerCase() || \"\"\r\n    );\r\n    if (\r\n      names.some(\r\n        (n: string) =>\r\n          n.includes(\"advocate\") || n.includes(\"judge\") || n.includes(\"critic\")\r\n      )\r\n    ) {\r\n      return \"debate\";\r\n    }\r\n    return \"selector\";\r\n  }\r\n\r\n  // Check for RoundRobinGroupChat\r\n  if (provider.includes(\"RoundRobinGroupChat\")) {\r\n    // Check for reflection pattern (generator + critic with approval)\r\n    const names = participants.map(\r\n      (p: Component<AgentConfig>) => p.config?.name?.toLowerCase() || \"\"\r\n    );\r\n    if (\r\n      participants.length === 2 &&\r\n      names.some(\r\n        (n: string) => n.includes(\"generator\") || n.includes(\"writer\")\r\n      ) &&\r\n      names.some((n: string) => n.includes(\"critic\") || n.includes(\"reviewer\"))\r\n    ) {\r\n      return \"reflection\";\r\n    }\r\n    return \"sequential\";\r\n  }\r\n\r\n  return \"unknown\";\r\n};\r\n\r\n/**\r\n * Pattern type to label mapping\r\n */\r\nexport const patternLabels: Record<\r\n  PatternType,\r\n  { label: string; color: string; description: string }\r\n> = {\r\n  sequential: {\r\n    label: \"Sequential\",\r\n    color: \"#3b82f6\", // blue\r\n    description: \"Agents take turns in fixed order\",\r\n  },\r\n  selector: {\r\n    label: \"Selector\",\r\n    color: \"#8b5cf6\", // purple\r\n    description: \"Central router selects best agent\",\r\n  },\r\n  handoff: {\r\n    label: \"Handoff\",\r\n    color: \"#f59e0b\", // yellow\r\n    description: \"Agents dynamically transfer control\",\r\n  },\r\n  debate: {\r\n    label: \"Debate\",\r\n    color: \"#ef4444\", // red\r\n    description: \"Agents argue different perspectives\",\r\n  },\r\n  reflection: {\r\n    label: \"Reflection\",\r\n    color: \"#22c55e\", // green\r\n    description: \"Iterative improvement through feedback\",\r\n  },\r\n  unknown: {\r\n    label: \"Custom\",\r\n    color: \"#6b7280\", // gray\r\n    description: \"Custom team configuration\",\r\n  },\r\n};\r\n\r\n/**\r\n * Get pattern generator for a given pattern type\r\n */\r\nexport const getPatternGenerator = (patternType: PatternType): PatternGenerator => {\r\n  switch (patternType) {\r\n    case \"sequential\":\r\n    case \"reflection\": // Reflection uses sequential layout for now\r\n      return generateSequentialLayout;\r\n    case \"selector\":\r\n    case \"debate\": // Debate uses selector layout with different styling\r\n      return generateSelectorLayout;\r\n    case \"handoff\":\r\n      return generateHandoffLayout;\r\n    default:\r\n      return generateSequentialLayout; // Default to sequential\r\n  }\r\n};\r\n\r\n/**\r\n * Generate pattern-based layout for a team (Legacy)\r\n */\r\nexport const generatePatternLayout = (\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run\r\n): PatternLayoutResult & { patternType: PatternType } => {\r\n  const patternType = getPatternType(teamConfig);\r\n  const generator = getPatternGenerator(patternType);\r\n  const layout = generator(teamConfig, participatedAgents, run);\r\n\r\n  return {\r\n    ...layout,\r\n    patternType,\r\n  };\r\n};\r\n\r\n/**\r\n * Generate layout using new pattern schema system\r\n * Provides more visual distinction between patterns\r\n */\r\nexport const generatePatternLayoutV2 = (\r\n  teamConfig: Component<TeamConfig>,\r\n  participatedAgents: Set<string>,\r\n  run?: Run,\r\n  overridePatternId?: string\r\n): PatternLayoutResult & { patternType: PatternType; patternDef: PatternDefinition | undefined } => {\r\n  // If pattern override is provided, use it\r\n  if (overridePatternId) {\r\n    const patternDef = getPatternById(overridePatternId);\r\n    if (patternDef) {\r\n      const layout = generateLayoutFromPattern(patternDef, teamConfig, participatedAgents, run);\r\n      return {\r\n        ...layout,\r\n        patternType: overridePatternId as PatternType,\r\n        patternDef,\r\n      };\r\n    }\r\n  }\r\n\r\n  // Otherwise detect from team config\r\n  const patternType = getPatternType(teamConfig);\r\n\r\n  // Map legacy pattern types to new pattern IDs\r\n  const patternIdMap: Record<PatternType, string> = {\r\n    sequential: \"sequential\",\r\n    selector: \"selector\",\r\n    handoff: \"swarm\",\r\n    debate: \"debate\",\r\n    reflection: \"reflection\",\r\n    unknown: \"sequential\",\r\n  };\r\n\r\n  const patternId = patternIdMap[patternType];\r\n  const patternDef = getPatternById(patternId);\r\n\r\n  if (patternDef) {\r\n    const layout = generateLayoutFromPattern(patternDef, teamConfig, participatedAgents, run);\r\n    return {\r\n      ...layout,\r\n      patternType,\r\n      patternDef,\r\n    };\r\n  }\r\n\r\n  // Fallback to legacy generator\r\n  const generator = getPatternGenerator(patternType);\r\n  const layout = generator(teamConfig, participatedAgents, run);\r\n\r\n  return {\r\n    ...layout,\r\n    patternType,\r\n    patternDef: undefined,\r\n  };\r\n};\r\n\r\n/**\r\n * Get pattern definition from team config\r\n */\r\nexport const getPatternDefinition = (teamConfig: Component<TeamConfig>): PatternDefinition | undefined => {\r\n  const patternType = getPatternType(teamConfig);\r\n  const patternIdMap: Record<PatternType, string> = {\r\n    sequential: \"sequential\",\r\n    selector: \"selector\",\r\n    handoff: \"swarm\",\r\n    debate: \"debate\",\r\n    reflection: \"reflection\",\r\n    unknown: \"sequential\",\r\n  };\r\n  return getPatternById(patternIdMap[patternType]);\r\n};\r\n","import React, {\r\n  useCallback,\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useMemo,\r\n} from \"react\";\r\nimport {\r\n  ReactFlow,\r\n  Node,\r\n  Edge,\r\n  Background,\r\n  NodeTypes,\r\n  useReactFlow,\r\n  ReactFlowProvider,\r\n  NodeChange,\r\n  applyNodeChanges,\r\n  MiniMap,\r\n} from \"@xyflow/react\";\r\nimport Dagre from \"@dagrejs/dagre\";\r\nimport \"@xyflow/react/dist/style.css\";\r\nimport AgentNode from \"./agentnode\";\r\nimport {\r\n  AgentMessageConfig,\r\n  AgentConfig,\r\n  TeamConfig,\r\n  Run,\r\n  Component,\r\n} from \"../../../../types/datamodel\";\r\nimport { CustomEdge, CustomEdgeData } from \"./edge\";\r\nimport { useConfigStore } from \"../../../../../hooks/store\";\r\nimport { AgentFlowToolbar } from \"./toolbar\";\r\nimport { EdgeMessageModal } from \"./edgemessagemodal\";\r\nimport {\r\n  generatePatternLayoutV2,\r\n  NODE_DIMENSIONS,\r\n  getPatternType,\r\n  PatternDefinition,\r\n} from \"./patterns\";\r\n\r\ninterface AgentFlowProps {\r\n  teamConfig: Component<TeamConfig>;\r\n  run: Run;\r\n  viewMode?: \"pattern\" | \"execution\";\r\n  selectedPatternId?: string;  // Override pattern for visualization\r\n}\r\n\r\ninterface MessageSequence {\r\n  source: string;\r\n  target: string;\r\n  count: number;\r\n  totalTokens: number;\r\n  messages: AgentMessageConfig[];\r\n}\r\n\r\ninterface BidirectionalPattern {\r\n  forward: MessageSequence;\r\n  reverse: MessageSequence;\r\n}\r\n\r\nconst getLayoutedElements = (\r\n  nodes: Node[],\r\n  edges: CustomEdge[],\r\n  direction: \"TB\" | \"LR\"\r\n) => {\r\n  const g = new Dagre.graphlib.Graph().setDefaultEdgeLabel(() => ({}));\r\n\r\n  g.setGraph({\r\n    rankdir: direction,\r\n    nodesep: 110,\r\n    ranksep: 100,\r\n    ranker: \"network-simplex\",\r\n    marginx: 30,\r\n    marginy: 30,\r\n  });\r\n\r\n  nodes.forEach((node) => {\r\n    const dimensions =\r\n      node.data.type === \"end\" ? NODE_DIMENSIONS.end : NODE_DIMENSIONS.default;\r\n    g.setNode(node.id, { ...node, ...dimensions });\r\n  });\r\n\r\n  const bidirectionalPairs = new Map<\r\n    string,\r\n    { source: string; target: string }[]\r\n  >();\r\n\r\n  edges.forEach((edge) => {\r\n    const forwardKey = `${edge.source}->${edge.target}`;\r\n    const reverseKey = `${edge.target}->${edge.source}`;\r\n    const pairKey = [edge.source, edge.target].sort().join(\"-\");\r\n\r\n    if (!bidirectionalPairs.has(pairKey)) {\r\n      bidirectionalPairs.set(pairKey, []);\r\n    }\r\n    bidirectionalPairs.get(pairKey)!.push({\r\n      source: edge.source,\r\n      target: edge.target,\r\n    });\r\n  });\r\n\r\n  bidirectionalPairs.forEach((pairs, pairKey) => {\r\n    if (pairs.length === 2) {\r\n      const [first, second] = pairs;\r\n      g.setEdge(first.source, first.target, { weight: 2, minlen: 1 });\r\n      g.setEdge(second.source, second.target, { weight: 1, minlen: 1 });\r\n    } else {\r\n      const edge = pairs[0];\r\n      g.setEdge(edge.source, edge.target, { weight: 1, minlen: 1 });\r\n    }\r\n  });\r\n\r\n  Dagre.layout(g);\r\n\r\n  const positionedNodes = nodes.map((node) => {\r\n    const { x, y } = g.node(node.id);\r\n    const dimensions =\r\n      node.data.type === \"end\" ? NODE_DIMENSIONS.end : NODE_DIMENSIONS.default;\r\n    return {\r\n      ...node,\r\n      position: {\r\n        x: x - dimensions.width / 2,\r\n        y: y - dimensions.height / 2,\r\n      },\r\n    };\r\n  });\r\n\r\n  const nodePositions = new Map(\r\n    positionedNodes.map((node) => [\r\n      node.id,\r\n      {\r\n        x: node.position.x + NODE_DIMENSIONS.default.width / 2,\r\n        y: node.position.y + NODE_DIMENSIONS.default.height / 2,\r\n      },\r\n    ])\r\n  );\r\n\r\n  const positionedEdges = edges.map((edge) => {\r\n    const sourcePos = nodePositions.get(edge.source)!;\r\n    const targetPos = nodePositions.get(edge.target)!;\r\n\r\n    return {\r\n      ...edge,\r\n      sourceX: sourcePos.x,\r\n      sourceY: sourcePos.y,\r\n      targetX: targetPos.x,\r\n      targetY: targetPos.y,\r\n    };\r\n  });\r\n\r\n  return { nodes: positionedNodes, edges: positionedEdges };\r\n};\r\n\r\nconst createNode = (\r\n  id: string,\r\n  type: \"user\" | \"agent\" | \"end\",\r\n  agentConfig?: Component<AgentConfig>,\r\n  isActive: boolean = false,\r\n  run?: Run\r\n): Node => {\r\n  const isProcessing =\r\n    run?.status === \"active\" || run?.status === \"awaiting_input\";\r\n\r\n  if (type === \"user\") {\r\n    return {\r\n      id,\r\n      type: \"agentNode\",\r\n      position: { x: 0, y: 0 },\r\n      data: {\r\n        type: \"user\",\r\n        label: \"User\",\r\n        agentType: \"user\",\r\n        description: \"Human user\",\r\n        isActive,\r\n        status: \"\",\r\n        reason: \"\",\r\n        draggable: !isProcessing,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (type === \"end\") {\r\n    return {\r\n      id,\r\n      type: \"agentNode\",\r\n      position: { x: 0, y: 0 },\r\n      data: {\r\n        type: \"end\",\r\n        label: \"End\",\r\n        status: run?.status,\r\n        reason: run?.error_message || \"\",\r\n        agentType: \"\",\r\n        description: \"\",\r\n        isActive: false,\r\n        draggable: false,\r\n      },\r\n    };\r\n  }\r\n\r\n  return {\r\n    id,\r\n    type: \"agentNode\",\r\n    position: { x: 0, y: 0 },\r\n    data: {\r\n      type: \"agent\",\r\n      label: id,\r\n      agentType: agentConfig?.label || \"\",\r\n      description: agentConfig?.description || \"\",\r\n      isActive,\r\n      status: \"\",\r\n      reason: \"\",\r\n      draggable: !isProcessing,\r\n    },\r\n  };\r\n};\r\n\r\nconst nodeTypes: NodeTypes = {\r\n  agentNode: AgentNode,\r\n};\r\n\r\nconst edgeTypes = {\r\n  custom: CustomEdge,\r\n};\r\n\r\nconst AgentFlow: React.FC<AgentFlowProps> = ({ teamConfig, run, viewMode = \"pattern\", selectedPatternId }) => {\r\n  const { fitView } = useReactFlow();\r\n  const [nodes, setNodes] = useState<Node[]>([]);\r\n  const [edges, setEdges] = useState<CustomEdge[]>([]);\r\n  const [shouldRefit, setShouldRefit] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  const { agentFlow: settings } = useConfigStore();\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [selectedEdge, setSelectedEdge] = useState<CustomEdge | null>(null);\r\n\r\n  const handleEdgeClick = useCallback((edge: CustomEdge) => {\r\n    if (!edge.data?.messages) return; // Early return if no data/messages\r\n\r\n    setSelectedEdge(edge);\r\n    setModalOpen(true);\r\n  }, []);\r\n\r\n  const onNodesChange = useCallback((changes: NodeChange[]) => {\r\n    setNodes((nds) => applyNodeChanges(changes, nds));\r\n  }, []);\r\n\r\n  const flowWrapper = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (shouldRefit) {\r\n      const timeoutId = setTimeout(() => {\r\n        fitView({ padding: 0.2, duration: 200 });\r\n        setShouldRefit(false);\r\n      }, 100);\r\n\r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [shouldRefit, fitView]);\r\n\r\n  const processMessages = useCallback(\r\n    (messages: AgentMessageConfig[]) => {\r\n      if (!run.task) return { nodes: [], edges: [] };\r\n\r\n      const nodeMap = new Map<string, Node>();\r\n      const transitionCounts = new Map<string, MessageSequence>();\r\n      const bidirectionalPatterns = new Map<string, BidirectionalPattern>();\r\n\r\n      // Add first message node if it exists\r\n      if (messages.length > 0) {\r\n        const firstAgentConfig = teamConfig.config.participants.find(\r\n          (p) => p.config.name === messages[0]?.source\r\n        );\r\n        nodeMap.set(\r\n          messages[0]?.source,\r\n          createNode(\r\n            messages[0]?.source,\r\n            messages[0]?.source === \"user\" ? \"user\" : \"agent\",\r\n            firstAgentConfig,\r\n            false,\r\n            run\r\n          )\r\n        );\r\n      }\r\n\r\n      // Process message transitions\r\n      for (let i = 0; i < messages.length - 1; i++) {\r\n        const currentMsg = messages[i];\r\n        const nextMsg = messages[i + 1];\r\n        const transitionKey = `${currentMsg?.source}->${nextMsg?.source}`;\r\n\r\n        if (!transitionCounts.has(transitionKey)) {\r\n          transitionCounts.set(transitionKey, {\r\n            source: currentMsg?.source,\r\n            target: nextMsg?.source,\r\n            count: 1,\r\n            totalTokens:\r\n              (currentMsg?.models_usage?.prompt_tokens || 0) +\r\n              (currentMsg?.models_usage?.completion_tokens || 0),\r\n            messages: [currentMsg],\r\n          });\r\n        } else {\r\n          const transition = transitionCounts.get(transitionKey)!;\r\n          transition.count++;\r\n          transition.totalTokens +=\r\n            (currentMsg?.models_usage?.prompt_tokens || 0) +\r\n            (currentMsg?.models_usage?.completion_tokens || 0);\r\n          transition.messages.push(currentMsg);\r\n        }\r\n\r\n        if (!nodeMap.has(nextMsg?.source)) {\r\n          const agentConfig = teamConfig.config.participants.find(\r\n            (p) => p.config.name === nextMsg.source\r\n          );\r\n          nodeMap.set(\r\n            nextMsg.source,\r\n            createNode(\r\n              nextMsg.source,\r\n              nextMsg.source === \"user\" ? \"user\" : \"agent\",\r\n              agentConfig,\r\n              false,\r\n              run\r\n            )\r\n          );\r\n        }\r\n      }\r\n\r\n      // Process bidirectional patterns\r\n      transitionCounts.forEach((transition, key) => {\r\n        const [source, target] = key.split(\"->\");\r\n        const reverseKey = `${target}->${source}`;\r\n        const reverseTransition = transitionCounts.get(reverseKey);\r\n\r\n        if (reverseTransition && !bidirectionalPatterns.has(key)) {\r\n          const patternKey = [source, target].sort().join(\"->\");\r\n          bidirectionalPatterns.set(patternKey, {\r\n            forward: transition,\r\n            reverse: reverseTransition,\r\n          });\r\n        }\r\n      });\r\n\r\n      // Create edges with bidirectional routing\r\n      const newEdges: CustomEdge[] = [];\r\n      const processedKeys = new Set<string>();\r\n\r\n      const createEdgeLabel = (transition: MessageSequence) => {\r\n        if (!settings.showLabels) return \"\";\r\n        if (transition.totalTokens > 0) {\r\n          return `${transition.count > 1 ? `${transition.count}x` : \"\"} ${\r\n            settings.showTokens ? `(${transition.totalTokens} tokens)` : \"\"\r\n          }`.trim();\r\n        }\r\n        return \"\";\r\n      };\r\n\r\n      transitionCounts.forEach((transition, key) => {\r\n        if (processedKeys.has(key)) return;\r\n\r\n        const [source, target] = key.split(\"->\");\r\n        const patternKey = [source, target].sort().join(\"->\");\r\n        const bidirectionalPattern = bidirectionalPatterns.get(patternKey);\r\n\r\n        if (bidirectionalPattern) {\r\n          const forwardKey = `${source}->${target}`;\r\n          const reverseKey = `${target}->${source}`;\r\n\r\n          const forwardEdgeId = `${source}-${target}-forward`;\r\n          const reverseEdgeId = `${target}-${source}-reverse`;\r\n\r\n          const createBidirectionalEdge = (\r\n            transition: MessageSequence,\r\n            isSecondary: boolean,\r\n            edgeId: string,\r\n            pairedEdgeId: string\r\n          ): CustomEdge => ({\r\n            id: edgeId,\r\n            source: transition.source,\r\n            target: transition.target,\r\n            type: \"custom\",\r\n            data: {\r\n              label: createEdgeLabel(transition),\r\n              messages: settings.showMessages ? transition.messages : [],\r\n              routingType: isSecondary ? \"secondary\" : \"primary\",\r\n              bidirectionalPair: pairedEdgeId,\r\n            },\r\n            style: {\r\n              stroke: \"#2563eb\",\r\n              strokeWidth: 1,\r\n            },\r\n          });\r\n\r\n          newEdges.push(\r\n            createBidirectionalEdge(\r\n              transitionCounts.get(forwardKey)!,\r\n              false,\r\n              forwardEdgeId,\r\n              reverseEdgeId\r\n            ),\r\n            createBidirectionalEdge(\r\n              transitionCounts.get(reverseKey)!,\r\n              true,\r\n              reverseEdgeId,\r\n              forwardEdgeId\r\n            )\r\n          );\r\n\r\n          processedKeys.add(forwardKey);\r\n          processedKeys.add(reverseKey);\r\n        } else {\r\n          newEdges.push({\r\n            id: `${transition.source}-${transition.target}-${key}`,\r\n            source: transition.source,\r\n            target: transition.target,\r\n            type: \"custom\",\r\n            data: {\r\n              label: createEdgeLabel(transition),\r\n              messages: settings.showMessages ? transition.messages : [],\r\n            },\r\n            animated:\r\n              run.status === \"active\" &&\r\n              key === Array.from(transitionCounts.keys()).pop(),\r\n            style: {\r\n              stroke: \"#2563eb\",\r\n              strokeWidth: 1,\r\n            },\r\n          });\r\n        }\r\n      });\r\n\r\n      // Add end node if run is complete/error/stopped\r\n      if (run && messages.length > 0) {\r\n        const lastMessage = messages[messages.length - 1];\r\n\r\n        if ([\"complete\", \"error\", \"stopped\"].includes(run.status)) {\r\n          nodeMap.set(\"end\", createNode(\"end\", \"end\", undefined, false, run));\r\n\r\n          const edgeColor = {\r\n            complete: \"#2563eb\",\r\n            stopped: \"red\",\r\n            error: \"red\",\r\n            active: \"#2563eb\",\r\n            awaiting_input: \"#2563eb\",\r\n            timeout: \"red\",\r\n            created: \"#2563eb\",\r\n          }[run.status];\r\n\r\n          newEdges.push({\r\n            id: `${lastMessage?.source}-end`,\r\n            source: lastMessage?.source,\r\n            target: \"end\",\r\n            type: \"custom\",\r\n            data: {\r\n              label: settings.showLabels ? \"ended\" : \"\",\r\n              messages: [],\r\n            },\r\n            style: {\r\n              stroke: edgeColor,\r\n              strokeWidth: 1,\r\n              opacity: 1,\r\n              zIndex: 100,\r\n            },\r\n          });\r\n        }\r\n      }\r\n\r\n      return { nodes: Array.from(nodeMap.values()), edges: newEdges };\r\n    },\r\n    [teamConfig.config.participants, run, settings]\r\n  );\r\n\r\n  const handleToggleFullscreen = useCallback(() => {\r\n    setIsFullscreen(!isFullscreen);\r\n    setShouldRefit(true);\r\n  }, [isFullscreen]);\r\n\r\n  useEffect(() => {\r\n    if (!isFullscreen) return;\r\n\r\n    const handleEscape = (event: KeyboardEvent) => {\r\n      if (event.key === \"Escape\") {\r\n        handleToggleFullscreen();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleEscape);\r\n    return () => document.removeEventListener(\"keydown\", handleEscape);\r\n  }, [isFullscreen, handleToggleFullscreen]);\r\n\r\n  useEffect(() => {\r\n    let newNodes: Node[];\r\n    let newEdges: CustomEdge[];\r\n\r\n    // Determine whether to show pattern or execution layout\r\n    const showPatternLayout = viewMode === \"pattern\" || run.messages.length === 0;\r\n\r\n    // Get participated agents from messages for highlighting\r\n    const participatedAgents = new Set<string>();\r\n    run.messages.forEach((m) => {\r\n      if (m.config?.source) {\r\n        participatedAgents.add(m.config.source);\r\n      }\r\n    });\r\n\r\n    // Use new V2 pattern layout generator with pattern schema\r\n    const patternResult = generatePatternLayoutV2(\r\n      teamConfig,\r\n      participatedAgents,\r\n      run,\r\n      selectedPatternId  // Override pattern ID if provided\r\n    );\r\n\r\n    // Get the detected/selected pattern definition\r\n    const patternDef = patternResult.patternDef;\r\n\r\n    // Determine if custom layout should be used (hub-spoke, mesh, ring, fork-join, tree)\r\n    // Chain layout uses Dagre for sequential positioning\r\n    const useCustomLayout = showPatternLayout && patternDef &&\r\n      patternDef.visual.layout !== \"chain\";\r\n\r\n    if (showPatternLayout) {\r\n      // Show pattern-based layout (team structure)\r\n      newNodes = patternResult.nodes;\r\n      newEdges = patternResult.edges as CustomEdge[];\r\n    } else {\r\n      // Show execution flow (actual message sequence)\r\n      const result = processMessages(run.messages.map((m) => m.config));\r\n      newNodes = result.nodes;\r\n      newEdges = result.edges;\r\n    }\r\n\r\n    // Only use Dagre layout for sequential patterns or execution mode\r\n    // Hub-spoke and mesh patterns have their own positioning\r\n    if (useCustomLayout) {\r\n      // Use the positions set by pattern generators directly\r\n      setNodes(newNodes);\r\n      setEdges(newEdges);\r\n    } else {\r\n      // Use Dagre for sequential/execution layouts\r\n      const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(\r\n        newNodes,\r\n        newEdges,\r\n        settings.direction\r\n      );\r\n      setNodes(layoutedNodes);\r\n      setEdges(layoutedEdges);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      fitView({ padding: 0.2, duration: 200 });\r\n    }, 50);\r\n  }, [run.messages, processMessages, settings.direction, run.status, fitView, teamConfig, viewMode, selectedPatternId]);\r\n\r\n  const reactFlowProps = {\r\n    nodes,\r\n    edges: edges.map((edge) => ({\r\n      ...edge,\r\n      data: {\r\n        ...edge.data,\r\n        onClick: () => handleEdgeClick(edge),\r\n      },\r\n    })),\r\n    nodeTypes,\r\n    edgeTypes,\r\n    defaultViewport: { x: 0, y: 0, zoom: 1 },\r\n    minZoom: 0.5,\r\n    maxZoom: 2,\r\n    onNodesChange,\r\n    proOptions: { hideAttribution: true },\r\n  };\r\n\r\n  const toolbarProps = useMemo(\r\n    () => ({\r\n      isFullscreen,\r\n      onToggleFullscreen: handleToggleFullscreen,\r\n      onResetView: () => fitView({ padding: 0.2, duration: 200 }),\r\n    }),\r\n    [isFullscreen, handleToggleFullscreen, fitView]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      ref={flowWrapper}\r\n      className={`transition-all duration-200 ${\r\n        isFullscreen\r\n          ? \"fixed inset-4 z-[50] shadow\"\r\n          : \"w-full h-full min-h-[300px]\"\r\n      } bg-tertiary rounded-lg`}\r\n    >\r\n      {isFullscreen && (\r\n        <div\r\n          className=\"fixed inset-0 -z-10 bg-background/80 backdrop-blur-sm\"\r\n          onClick={handleToggleFullscreen}\r\n        />\r\n      )}\r\n\r\n      <ReactFlow {...reactFlowProps}>\r\n        {settings.showGrid && <Background />}\r\n        {settings.showMiniMap && <MiniMap />}\r\n        <div className=\"absolute top-0 right-0 z-10\">\r\n          <AgentFlowToolbar {...toolbarProps} />\r\n        </div>\r\n      </ReactFlow>\r\n      <EdgeMessageModal\r\n        open={modalOpen}\r\n        onClose={() => {\r\n          setModalOpen(false);\r\n          setSelectedEdge(null);\r\n        }}\r\n        edge={selectedEdge}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function WrappedAgentFlow(props: AgentFlowProps) {\r\n  return (\r\n    <ReactFlowProvider>\r\n      <AgentFlow {...props} />\r\n    </ReactFlowProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { AgentMessageConfig } from \"../../../../types/datamodel\";\r\nimport {\r\n  Edge,\r\n  EdgeLabelRenderer,\r\n  type EdgeProps,\r\n  getSmoothStepPath,\r\n} from \"@xyflow/react\";\r\n\r\nconst EDGE_OFFSET = 140;\r\n\r\nexport interface CustomEdgeData extends Record<string, unknown> {\r\n  label?: string;\r\n  messages: AgentMessageConfig[];\r\n  routingType?: \"primary\" | \"secondary\";\r\n  bidirectionalPair?: string;\r\n  onClick?: () => void;\r\n}\r\n\r\nexport type CustomEdge = Edge<CustomEdgeData>;\r\n\r\ninterface CustomEdgeProps extends Omit<EdgeProps, \"data\"> {\r\n  data: CustomEdgeData;\r\n}\r\n\r\nexport const CustomEdge: React.FC<CustomEdgeProps> = ({\r\n  id,\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  source,\r\n  target,\r\n  data,\r\n  style = {},\r\n  markerEnd,\r\n}) => {\r\n  const isSelfLoop = source === target;\r\n\r\n  // Keep stroke width scaling for message count but with a cleaner implementation\r\n  const baseStrokeWidth = (style.strokeWidth as number) || 1;\r\n  const messageCount = data.messages?.length || 0;\r\n  const finalStrokeWidth = isSelfLoop\r\n    ? Math.max(baseStrokeWidth, 2)\r\n    : Math.min(Math.max(messageCount, 1), 5) * baseStrokeWidth;\r\n\r\n  let edgePath = \"\";\r\n  let labelX = 0;\r\n  let labelY = 0;\r\n\r\n  if (data.routingType === \"secondary\" || isSelfLoop) {\r\n    // Calculate the midpoint and offset\r\n    const midY = (sourceY + targetY) / 2;\r\n    const offset = EDGE_OFFSET;\r\n\r\n    // Create path that goes out from output, right, up, left, into input\r\n    edgePath = `\r\n      M ${sourceX},${sourceY}\r\n      L ${sourceX},${sourceY + 10}\r\n      L ${sourceX + offset},${sourceY + 10}\r\n      L ${sourceX + offset},${targetY - 10}\r\n      L ${targetX},${targetY - 10}\r\n      L ${targetX},${targetY}\r\n    `;\r\n\r\n    // Set label position\r\n    labelX = sourceX + offset;\r\n    labelY = midY;\r\n  } else {\r\n    [edgePath, labelX, labelY] = getSmoothStepPath({\r\n      sourceX,\r\n      sourceY,\r\n      targetX,\r\n      targetY,\r\n    });\r\n  }\r\n\r\n  // Calculate label position with offset for bidirectional edges\r\n  const getLabelPosition = (x: number, y: number) => {\r\n    if (!data.routingType || isSelfLoop) return { x, y };\r\n\r\n    // Make vertical separation more pronounced\r\n    const verticalOffset = data.routingType === \"secondary\" ? -35 : 35;\r\n    const horizontalOffset = data.routingType === \"secondary\" ? -25 : 25;\r\n\r\n    // Calculate edge angle to determine if it's more horizontal or vertical\r\n    const dx = targetX - sourceX;\r\n    const dy = targetY - sourceY;\r\n    const isMoreHorizontal = Math.abs(dx) > Math.abs(dy);\r\n\r\n    // Always apply some vertical offset\r\n    const basePosition = {\r\n      x: isMoreHorizontal ? x : x + horizontalOffset,\r\n      y: y + (data.routingType === \"secondary\" ? -20 : 20),\r\n    };\r\n\r\n    return basePosition;\r\n  };\r\n\r\n  const labelPosition = getLabelPosition(labelX, labelY);\r\n\r\n  return (\r\n    <>\r\n      <path\r\n        id={id}\r\n        className=\"react-flow__edge-path\"\r\n        d={edgePath}\r\n        style={{\r\n          ...style,\r\n          strokeWidth: finalStrokeWidth,\r\n          stroke: data.routingType === \"secondary\" ? \"#0891b2\" : style.stroke,\r\n        }}\r\n        markerEnd={markerEnd}\r\n      />\r\n      {data?.label && (\r\n        <EdgeLabelRenderer>\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              transform: `translate(-50%, -50%) translate(${labelPosition.x}px,${labelPosition.y}px)`,\r\n              pointerEvents: \"all\",\r\n              transition: \"all 0.2s ease-in-out\",\r\n            }}\r\n            onClick={data.onClick}\r\n          >\r\n            <div\r\n              className=\"px-2 py-1 rounded bg-secondary hover:bg-tertiary text-primary  \r\n                       cursor-pointer transform hover:scale-110 transition-all\r\n                       flex items-center gap-1\"\r\n              style={{\r\n                whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              {messageCount > 0 && (\r\n                <span className=\"text-xs text-secondary\">({messageCount})</span>\r\n              )}\r\n              <span className=\"text-sm\">{data.label}</span>\r\n            </div>\r\n          </div>\r\n        </EdgeLabelRenderer>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SendHorizontal = createLucideIcon(\"SendHorizontal\", [\n  [\n    \"path\",\n    {\n      d: \"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z\",\n      key: \"117uat\"\n    }\n  ],\n  [\"path\", { d: \"M6 12h16\", key: \"s4cdu5\" }]\n]);\n\nexport { SendHorizontal as default };\n//# sourceMappingURL=send-horizontal.js.map\n","import {\r\n  AgentMessageConfig,\r\n  Message,\r\n  TaskResult,\r\n  RunStatus,\r\n} from \"../../../types/datamodel\";\r\n\r\nexport interface ThreadState {\r\n  messages: AgentMessageConfig[];\r\n  finalResult?: any;\r\n  status: RunStatus;\r\n  isExpanded: boolean;\r\n  reason?: string;\r\n  inputRequest?: {\r\n    prompt: string;\r\n    isPending: boolean;\r\n  };\r\n}\r\nexport interface MessageListProps {\r\n  messages: Message[];\r\n  threadMessages: Record<string, ThreadState>;\r\n  setThreadMessages: React.Dispatch<\r\n    React.SetStateAction<Record<string, ThreadState>>\r\n  >; // Add this\r\n  onRetry: (query: string) => void;\r\n  onCancel: (runId: string) => void;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface ModelUsage {\r\n  prompt_tokens: number;\r\n  completion_tokens: number;\r\n}\r\n\r\n// Create timeout configuration based on user settings\r\nexport const createTimeoutConfig = (timeoutMinutes: number = 3) => ({\r\n  DURATION_MS: timeoutMinutes * 60 * 1000, // timeout in milliseconds\r\n  DURATION_SEC: timeoutMinutes * 60, // timeout in seconds\r\n  WEBSOCKET_CODE: 4000, // WebSocket close code for timeout\r\n  DEFAULT_MESSAGE: `Input timeout after ${timeoutMinutes} minute${\r\n    timeoutMinutes !== 1 ? \"s\" : \"\"\r\n  }`,\r\n  WARNING_THRESHOLD_SEC: 30, // Show warning when 30 seconds remaining\r\n});\r\n\r\n// Default timeout config for backward compatibility\r\nexport const TIMEOUT_CONFIG = createTimeoutConfig(3);\r\n\r\nexport interface TimeoutError {\r\n  code: typeof TIMEOUT_CONFIG.WEBSOCKET_CODE;\r\n  message: string;\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { SendHorizontal, Loader2, Clock } from \"lucide-react\";\r\nimport { createTimeoutConfig } from \"./types\";\r\nimport { useSettingsStore } from \"../../settings/store\";\r\n\r\ninterface InputRequestProps {\r\n  prompt: string;\r\n  onSubmit: (response: string) => void;\r\n  disabled?: boolean;\r\n  onTimeout?: () => void;\r\n}\r\n\r\nconst InputRequestView: React.FC<InputRequestProps> = ({\r\n  prompt,\r\n  onSubmit,\r\n  disabled = false,\r\n  onTimeout,\r\n}) => {\r\n  const [response, setResponse] = React.useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\r\n\r\n  // Get timeout from settings\r\n  const { uiSettings } = useSettingsStore();\r\n  const timeoutConfig = React.useMemo(\r\n    () => createTimeoutConfig(uiSettings.human_input_timeout_minutes || 3),\r\n    [uiSettings.human_input_timeout_minutes]\r\n  );\r\n\r\n  const [timeLeft, setTimeLeft] = React.useState(timeoutConfig.DURATION_SEC);\r\n  const [hasInteracted, setHasInteracted] = React.useState(false);\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n  const timerRef = useRef<NodeJS.Timeout>();\r\n\r\n  useEffect(() => {\r\n    if (!disabled) {\r\n      timerRef.current = setInterval(() => {\r\n        setTimeLeft((prev) => {\r\n          if (prev <= 1) {\r\n            clearInterval(timerRef.current);\r\n            onTimeout?.();\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n    }\r\n\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, [disabled, onTimeout]);\r\n\r\n  // Auto-focus effect\r\n  React.useEffect(() => {\r\n    if (inputRef.current && !disabled) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [disabled]);\r\n\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!response.trim() || disabled || isSubmitting) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await onSubmit(response.trim());\r\n      setResponse(\"\");\r\n      setHasInteracted(false);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setResponse(e.target.value);\r\n    if (!hasInteracted) {\r\n      setHasInteracted(true);\r\n    }\r\n  };\r\n\r\n  const getTimeoutWarningClass = () => {\r\n    if (timeLeft < timeoutConfig.WARNING_THRESHOLD_SEC) {\r\n      return \"text-red-500 font-bold animate-pulse\";\r\n    }\r\n    return \"text-accent\";\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`p-4 bg-accent/10 border border-accent/20 rounded-lg mt-3 ${\r\n        disabled ? \"opacity-50\" : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"flex justify-between items-center mb-2\">\r\n        <div className=\"text-sm font-medium text-primary flex items-center gap-2\">\r\n          {prompt}\r\n          {!hasInteracted && !disabled && (\r\n            <span className=\"relative flex h-3 w-3\">\r\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75\"></span>\r\n              <span className=\"relative inline-flex rounded-full h-3 w-3 bg-accent\"></span>\r\n            </span>\r\n          )}\r\n        </div>\r\n        {!disabled && (\r\n          <div className=\"flex items-center gap-2 text-sm\">\r\n            <Clock size={14} className=\"text-accent\" />\r\n            <span className={getTimeoutWarningClass()}>\r\n              {formatTime(timeLeft)}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={response}\r\n          onChange={handleInputChange}\r\n          onKeyDown={handleKeyDown}\r\n          disabled={disabled || isSubmitting}\r\n          className=\"text-primary flex-1 px-3 py-2 rounded bg-tertiary border border-secondary focus:border-accent focus:ring-1 focus:ring-accent outline-none disabled:opacity-50\"\r\n          placeholder={\r\n            disabled\r\n              ? \"Input timeout - please restart the conversation\"\r\n              : \"Type your response...\"\r\n          }\r\n        />\r\n        <button\r\n          onClick={handleSubmit}\r\n          disabled={disabled || isSubmitting || !response.trim()}\r\n          className={`px-4 py-2 rounded bg-accent text-white hover:bg-accent/90 disabled:opacity-50 disabled:hover:bg-accent flex items-center gap-2 transition-all ${\r\n            !hasInteracted && !disabled && !response.trim()\r\n              ? \"animate-pulse\"\r\n              : \"\"\r\n          }`}\r\n        >\r\n          {isSubmitting ? (\r\n            <Loader2 size={16} className=\"animate-spin\" />\r\n          ) : (\r\n            <SendHorizontal size={16} />\r\n          )}\r\n          <span>Submit</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InputRequestView;\r\n","import React, { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport {\r\n  StopCircle,\r\n  MessageSquare,\r\n  Loader2,\r\n  CheckCircle,\r\n  AlertTriangle,\r\n  TriangleAlertIcon,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Bot,\r\n  PanelRightClose,\r\n  PanelRightOpen,\r\n  Play,\r\n  Pause,\r\n  RotateCcw,\r\n} from \"lucide-react\";\r\nimport { Run, Message, TeamConfig, Component } from \"../../../types/datamodel\";\r\nimport AgentFlow from \"./agentflow/agentflow\";\r\nimport { RenderMessage } from \"./rendermessage\";\r\nimport InputRequestView from \"./inputrequest\";\r\nimport { Tooltip, Dropdown, MenuProps } from \"antd\";\r\nimport { getRelativeTimeString, LoadingDots } from \"../../atoms\";\r\nimport { useSettingsStore } from \"../../settings/store\";\r\n\r\ninterface RunViewProps {\r\n  run: Run;\r\n  teamConfig?: Component<TeamConfig>;\r\n  onInputResponse?: (response: string) => void;\r\n  onCancel?: () => void;\r\n  isFirstRun?: boolean;\r\n  streamingContent?: {\r\n    runId: number;\r\n    content: string;\r\n    source: string;\r\n  } | null;\r\n  viewMode?: \"pattern\" | \"execution\";\r\n  selectedPatternId?: string;  // Pattern override for visualization\r\n}\r\n\r\ninterface StreamingMessageProps {\r\n  content: string;\r\n  source: string;\r\n}\r\n\r\nconst StreamingMessage: React.FC<StreamingMessageProps> = ({\r\n  content,\r\n  source,\r\n}) => {\r\n  const [showCursor, setShowCursor] = useState(true);\r\n\r\n  // Blinking cursor effect\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setShowCursor((prev) => !prev);\r\n    }, 530);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex items-start gap-2 p-2 rounded bg-tertiary border border-secondary transition-all duration-200 mb-6\">\r\n      <div className=\"p-1.5 rounded bg-light text-primary\">\r\n        <Bot size={14} />\r\n      </div>\r\n      <div className=\"flex-1 min-w-0\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"text-sm font-semibold text-primary\">{source}</span>\r\n        </div>\r\n        <div className=\"text-sm text-secondary break-all\">\r\n          {content}\r\n          {showCursor && (\r\n            <span className=\"inline-block w-2 h-4 ml-1 bg-accent/70 animate-pulse\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Helper to check if message content is empty or has placeholder text\r\n */\r\nconst isEmptyOrPlaceholderContent = (content: unknown): boolean => {\r\n  if (!content) return true;\r\n  if (typeof content === \"string\") {\r\n    const trimmed = content.trim();\r\n    // Filter out empty strings and Korean \"no message\" placeholder\r\n    return trimmed === \"\" || trimmed === \" \" || trimmed === \" .\";\r\n  }\r\n  if (Array.isArray(content) && content.length === 0) return true;\r\n  return false;\r\n};\r\n\r\nexport const getAgentMessages = (messages: Message[]): Message[] => {\r\n  return messages.filter((msg) => {\r\n    // Filter out llm_call_event messages\r\n    if (msg.config.source === \"llm_call_event\") return false;\r\n    // Filter out messages with empty or placeholder content\r\n    if (isEmptyOrPlaceholderContent(msg.config.content)) return false;\r\n    return true;\r\n  });\r\n};\r\n\r\nexport const getLastMeaningfulMessage = (\r\n  messages: Message[]\r\n): Message | undefined => {\r\n  return messages\r\n    .filter((msg) => msg.config.source !== \"llm_call_event\")\r\n    .slice(-1)[0];\r\n};\r\n\r\n// Type guard for message arrays\r\nexport const isAgentMessage = (message: Message): boolean => {\r\n  return message.config.source !== \"llm_call_event\";\r\n};\r\n\r\nconst RunView: React.FC<RunViewProps> = ({\r\n  run,\r\n  onInputResponse,\r\n  onCancel,\r\n  teamConfig,\r\n  isFirstRun = false,\r\n  streamingContent,\r\n  viewMode = \"pattern\",\r\n  selectedPatternId,\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const threadContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const isActive = run.status === \"active\" || run.status === \"awaiting_input\";\r\n\r\n  const { uiSettings } = useSettingsStore();\r\n  const [isFlowVisible, setIsFlowVisible] = useState(\r\n    uiSettings.show_agent_flow_by_default ?? true\r\n  );\r\n\r\n  // Replay state\r\n  const [isReplaying, setIsReplaying] = useState(false);\r\n  const [replayMessageIndex, setReplayMessageIndex] = useState(0);\r\n  const [originalRun, setOriginalRun] = useState<Run | null>(null);\r\n  const replayIntervalRef = useRef<NodeJS.Timeout | null>(null);\r\n  const [replaySpeed, setReplaySpeed] = useState(1); // 1x speed by default\r\n\r\n  // Create a run object for display (either original or replaying version)\r\n  const displayRun = useMemo(() => {\r\n    if (!isReplaying || !originalRun) return run;\r\n\r\n    return {\r\n      ...originalRun,\r\n      messages: originalRun.messages.slice(0, replayMessageIndex + 1),\r\n      status:\r\n        replayMessageIndex < originalRun.messages.length - 1\r\n          ? (\"active\" as const)\r\n          : originalRun.status,\r\n    };\r\n  }, [run, isReplaying, originalRun, replayMessageIndex]);\r\n\r\n  const visibleMessages = useMemo(() => {\r\n    let messages = displayRun.messages;\r\n\r\n    // Always filter out empty/placeholder content\r\n    messages = messages.filter(\r\n      (msg) => !isEmptyOrPlaceholderContent(msg.config.content)\r\n    );\r\n\r\n    // Filter out llm_call_events unless setting is enabled\r\n    if (!uiSettings.show_llm_call_events) {\r\n      messages = messages.filter(\r\n        (msg) => msg.config.source !== \"llm_call_event\"\r\n      );\r\n    }\r\n\r\n    return messages;\r\n  }, [displayRun.messages, uiSettings.show_llm_call_events]);\r\n\r\n  // Replay functions\r\n  const startReplay = () => {\r\n    if (\r\n      run.status !== \"complete\" &&\r\n      run.status !== \"error\" &&\r\n      run.status !== \"stopped\"\r\n    )\r\n      return;\r\n\r\n    setOriginalRun(run);\r\n    setReplayMessageIndex(0);\r\n    setIsReplaying(true);\r\n    setIsExpanded(true); // Ensure the messages are visible\r\n\r\n    // Start the replay interval with current speed\r\n    const intervalTime = 800 / replaySpeed; // Base time 800ms divided by speed multiplier\r\n    replayIntervalRef.current = setInterval(() => {\r\n      setReplayMessageIndex((prev) => {\r\n        if (prev >= run.messages.length - 1) {\r\n          setIsReplaying(false);\r\n          if (replayIntervalRef.current) {\r\n            clearInterval(replayIntervalRef.current);\r\n            replayIntervalRef.current = null;\r\n          }\r\n          return prev;\r\n        }\r\n        return prev + 1;\r\n      });\r\n    }, intervalTime);\r\n  };\r\n\r\n  const pauseReplay = () => {\r\n    if (replayIntervalRef.current) {\r\n      clearInterval(replayIntervalRef.current);\r\n      replayIntervalRef.current = null;\r\n    }\r\n    setIsReplaying(false);\r\n  };\r\n\r\n  const resetReplay = () => {\r\n    if (replayIntervalRef.current) {\r\n      clearInterval(replayIntervalRef.current);\r\n      replayIntervalRef.current = null;\r\n    }\r\n    setIsReplaying(false);\r\n    setReplayMessageIndex(0);\r\n    setOriginalRun(null);\r\n  };\r\n\r\n  const changeReplaySpeed = (newSpeed: number) => {\r\n    setReplaySpeed(newSpeed);\r\n\r\n    // If currently replaying, restart with new speed\r\n    if (isReplaying && replayIntervalRef.current) {\r\n      clearInterval(replayIntervalRef.current);\r\n      const intervalTime = 800 / newSpeed;\r\n      replayIntervalRef.current = setInterval(() => {\r\n        setReplayMessageIndex((prev) => {\r\n          if (\r\n            prev >=\r\n            (originalRun?.messages.length || run.messages.length) - 1\r\n          ) {\r\n            setIsReplaying(false);\r\n            if (replayIntervalRef.current) {\r\n              clearInterval(replayIntervalRef.current);\r\n              replayIntervalRef.current = null;\r\n            }\r\n            return prev;\r\n          }\r\n          return prev + 1;\r\n        });\r\n      }, intervalTime);\r\n    }\r\n  };\r\n\r\n  // Cleanup interval on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (replayIntervalRef.current) {\r\n        clearInterval(replayIntervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Determine if replay is available\r\n  const canReplay =\r\n    (run.status === \"complete\" ||\r\n      run.status === \"error\" ||\r\n      run.status === \"stopped\") &&\r\n    run.messages.length > 0;\r\n\r\n  console.log(\"Run task\", run.task);\r\n\r\n  // Replace existing scroll effect with this simpler one\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if (threadContainerRef.current) {\r\n        threadContainerRef.current.scrollTo({\r\n          top: threadContainerRef.current.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      }\r\n    }, 450);\r\n  }, [displayRun.messages, streamingContent]);\r\n  const calculateThreadTokens = (messages: Message[]) => {\r\n    // console.log(\"messages\", messages);\r\n    return messages.reduce((total, msg) => {\r\n      if (!msg.config?.models_usage) return total;\r\n      return (\r\n        total +\r\n        (msg.config.models_usage.prompt_tokens || 0) +\r\n        (msg.config.models_usage.completion_tokens || 0)\r\n      );\r\n    }, 0);\r\n  };\r\n\r\n  const getStatusIcon = (status: Run[\"status\"]) => {\r\n    // If we're replaying, show replay status instead\r\n    if (isReplaying && originalRun) {\r\n      return (\r\n        <div className=\"inline-block mr-1\">\r\n          <Play size={20} className=\"inline-block mr-1 text-accent\" />\r\n          <span className=\"inline-block mr-2 ml-1\">Replaying</span>\r\n          <LoadingDots size={8} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    switch (status) {\r\n      case \"active\":\r\n        return (\r\n          <div className=\"inline-block mr-1\">\r\n            <Loader2\r\n              size={20}\r\n              className=\"inline-block mr-1 text-accent animate-spin\"\r\n            />\r\n            <span className=\"inline-block mr-2 ml-1 \">Processing</span>\r\n            <LoadingDots size={8} />\r\n          </div>\r\n        );\r\n      case \"awaiting_input\":\r\n        return (\r\n          <div className=\"text-sm mb-2\">\r\n            <MessageSquare\r\n              size={20}\r\n              className=\"inline-block mr-2 text-accent\"\r\n            />\r\n            <span className=\"inline-block mr-2\">Waiting for your input </span>\r\n            <LoadingDots size={8} />\r\n          </div>\r\n        );\r\n      case \"complete\":\r\n        return (\r\n          <div className=\"text-sm mb-2\">\r\n            <CheckCircle size={20} className=\"inline-block mr-2 text-accent\" />\r\n            Task completed\r\n          </div>\r\n        );\r\n      case \"error\":\r\n        return (\r\n          <div className=\"text-sm mb-2\">\r\n            <AlertTriangle\r\n              size={20}\r\n              className=\"inline-block mr-2 text-red-500\"\r\n            />\r\n            {run.error_message || \"An error occurred\"}\r\n          </div>\r\n        );\r\n      case \"stopped\":\r\n        return (\r\n          <div className=\"text-sm mb-2\">\r\n            <StopCircle size={20} className=\"inline-block mr-2 text-red-500\" />\r\n            Task was stopped\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const lastResultMessage =\r\n    displayRun.team_result?.task_result?.messages.slice(-1)[0];\r\n  const lastMessage = getLastMeaningfulMessage(visibleMessages);\r\n\r\n  return (\r\n    <div className=\"space-y-6  mr-2 \">\r\n      {/* Run Header */}\r\n      <div\r\n        className={`${\r\n          isFirstRun ? \"mb-2\" : \"mt-4\"\r\n        } mb-4 pb-2 pt-2 border-b border-dashed border-secondary`}\r\n      >\r\n        <div id=\"run-header\" className=\"flex items-center justify-between\">\r\n          <div className=\"text-xs text-secondary\">\r\n            <Tooltip\r\n              title={\r\n                <div className=\"text-xs\">\r\n                  <div>ID: {run.id}</div>\r\n                  <div>\r\n                    Created: {new Date(run.created_at).toLocaleString()}\r\n                  </div>\r\n                  <div>Status: {run.status}</div>\r\n                </div>\r\n              }\r\n            >\r\n              <span className=\"cursor-help\">\r\n                Run ...{run.id} | {getRelativeTimeString(run?.created_at || \"\")}{\" \"}\r\n              </span>\r\n            </Tooltip>\r\n            {!isFirstRun && (\r\n              <>\r\n                {\" \"}\r\n                |{\" \"}\r\n                <TriangleAlertIcon className=\"w-4 h-4 -mt-1 inline-block mr-1 ml-1\" />\r\n                Note: Each run does not share data with previous runs in the\r\n                same session yet.\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Replay Controls */}\r\n          {canReplay && (\r\n            <div className=\"flex items-center gap-2\">\r\n              {!isReplaying && !originalRun && (\r\n                <div className=\"flex items-center gap-0\">\r\n                  <button\r\n                    onClick={startReplay}\r\n                    className=\"p-1 px-2 rounded-l hover:bg-secondary transition-colors text-secondary hover:text-primary\"\r\n                  >\r\n                    <Play className=\"inline-block\" size={16} />\r\n                    <span className=\"inline-block text-xs text-secondary ml-1\">\r\n                      Replay Run ({replaySpeed}x)\r\n                    </span>\r\n                  </button>\r\n                  <Dropdown\r\n                    menu={{\r\n                      items: [\r\n                        {\r\n                          key: \"0.1\",\r\n                          label: \"0.1x\",\r\n                          onClick: () => changeReplaySpeed(0.1),\r\n                        },\r\n                        {\r\n                          key: \"0.5\",\r\n                          label: \"0.5x\",\r\n                          onClick: () => changeReplaySpeed(0.5),\r\n                        },\r\n                        {\r\n                          key: \"1\",\r\n                          label: \"1x\",\r\n                          onClick: () => changeReplaySpeed(1),\r\n                        },\r\n                        {\r\n                          key: \"2\",\r\n                          label: \"2x\",\r\n                          onClick: () => changeReplaySpeed(2),\r\n                        },\r\n                        {\r\n                          key: \"5\",\r\n                          label: \"5x\",\r\n                          onClick: () => changeReplaySpeed(5),\r\n                        },\r\n                      ],\r\n                      selectedKeys: [replaySpeed.toString()],\r\n                    }}\r\n                    trigger={[\"click\"]}\r\n                  >\r\n                    <button className=\"p-1 px-1 rounded-r hover:bg-secondary transition-colors text-secondary hover:text-primary border-l border-secondary\">\r\n                      <ChevronDown className=\"inline-block\" size={12} />\r\n                    </button>\r\n                  </Dropdown>\r\n                </div>\r\n              )}\r\n\r\n              {isReplaying && (\r\n                <div className=\"flex items-center gap-0\">\r\n                  <button\r\n                    onClick={pauseReplay}\r\n                    className=\"p-1 px-2 rounded-l hover:bg-secondary transition-colors text-accent hover:text-primary\"\r\n                  >\r\n                    <Pause className=\"inline-block\" size={16} />\r\n                    <span className=\"inline-block text-xs text-accent ml-1\">\r\n                      Pause Replay ({replaySpeed}x)\r\n                    </span>\r\n                  </button>\r\n\r\n                  <Dropdown\r\n                    menu={{\r\n                      items: [\r\n                        {\r\n                          key: \"0.1\",\r\n                          label: \"0.1x\",\r\n                          onClick: () => changeReplaySpeed(0.1),\r\n                        },\r\n                        {\r\n                          key: \"0.5\",\r\n                          label: \"0.5x\",\r\n                          onClick: () => changeReplaySpeed(0.5),\r\n                        },\r\n                        {\r\n                          key: \"1\",\r\n                          label: \"1x\",\r\n                          onClick: () => changeReplaySpeed(1),\r\n                        },\r\n                        {\r\n                          key: \"2\",\r\n                          label: \"2x\",\r\n                          onClick: () => changeReplaySpeed(2),\r\n                        },\r\n                        {\r\n                          key: \"5\",\r\n                          label: \"5x\",\r\n                          onClick: () => changeReplaySpeed(5),\r\n                        },\r\n                      ],\r\n                      selectedKeys: [replaySpeed.toString()],\r\n                    }}\r\n                    trigger={[\"click\"]}\r\n                  >\r\n                    <button className=\"p-1 px-1 rounded-r hover:bg-secondary transition-colors text-secondary hover:text-primary border-l border-secondary\">\r\n                      <ChevronDown className=\"inline-block\" size={12} />\r\n                    </button>\r\n                  </Dropdown>\r\n                </div>\r\n              )}\r\n\r\n              {(isReplaying || originalRun) && (\r\n                <button\r\n                  onClick={resetReplay}\r\n                  className=\"p-1 px-2 rounded hover:bg-secondary transition-colors text-secondary hover:text-primary\"\r\n                >\r\n                  <RotateCcw className=\"inline-block\" size={16} />{\" \"}\r\n                  <span className=\"inline-block text-xs text-secondary\">\r\n                    Reset Replay\r\n                  </span>\r\n                </button>\r\n              )}\r\n\r\n              {(isReplaying || originalRun) && (\r\n                <div className=\"text-xs text-secondary\">\r\n                  {replayMessageIndex + 1}/\r\n                  {originalRun?.messages.length || run.messages.length}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Message */}\r\n      <div className=\"flex flex-col items-end w-full\">\r\n        <div className=\"w-full\">\r\n          <RenderMessage message={displayRun.task} isLast={false} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Team Response */}\r\n      <div className=\"flex flex-col items-start\">\r\n        <div className=\"flex items-center gap-2 mb-1\">\r\n          <div className=\"p-1.5 rounded bg-secondary text-primary\">\r\n            <Bot size={20} />\r\n          </div>\r\n          <span className=\"text-sm font-medium text-primary\">Agent Team</span>\r\n        </div>\r\n\r\n        <div className=\"   w-full\">\r\n          {/* Main Response Container */}\r\n          <div className=\"p-4 bg-secondary border border-secondary rounded\">\r\n            <div className=\"flex justify-between items-start mb-2\">\r\n              <div className=\"text-primary\">\r\n                {getStatusIcon(displayRun.status)}\r\n              </div>\r\n\r\n              {/* Cancel Button - More prominent placement */}\r\n              {isActive && onCancel && !isReplaying && (\r\n                <button\r\n                  onClick={onCancel}\r\n                  className=\"px-4 text-sm py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors flex items-center gap-2\"\r\n                >\r\n                  <StopCircle size={16} />\r\n                  Cancel Run\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Final Response */}\r\n            {displayRun.status !== \"awaiting_input\" &&\r\n              displayRun.status !== \"active\" && (\r\n                <div className=\"text-sm break-all\">\r\n                  <div className=\"text-xs bg-tertiary mb-1 text-secondary border-secondary -mt-2 bdorder rounded p-2\">\r\n                    Stop reason:{\" \"}\r\n                    {displayRun.team_result?.task_result?.stop_reason}\r\n                  </div>\r\n\r\n                  {lastMessage ? (\r\n                    <RenderMessage message={lastMessage.config} isLast={true} />\r\n                  ) : (\r\n                    <>\r\n                      {lastResultMessage && (\r\n                        <RenderMessage message={lastResultMessage} />\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              )}\r\n          </div>\r\n\r\n          {/* Thread Section */}\r\n          <div className=\"\">\r\n            {visibleMessages.length > 0 && (\r\n              <div className=\"mt-2 pl-4 border-secondary rounded-b border-l-2 border-secondary/30\">\r\n                <div className=\"flex pt-2\">\r\n                  <div className=\"flex-1\">\r\n                    <button\r\n                      onClick={() => setIsExpanded(!isExpanded)}\r\n                      className=\"flex items-center gap-1 text-sm text-secondary hover:text-primary transition-colors\"\r\n                    >\r\n                      <MessageSquare size={16} /> Agent steps [\r\n                      <span className=\"text-accent text-xs\">\r\n                        {isExpanded ? (\r\n                          <span>\r\n                            <ChevronUp\r\n                              size={16}\r\n                              className=\"inline-block mr-1\"\r\n                            />\r\n                            Hide\r\n                          </span>\r\n                        ) : (\r\n                          <span>\r\n                            {\" \"}\r\n                            <ChevronDown\r\n                              size={16}\r\n                              className=\"inline-block mr-1\"\r\n                            />{\" \"}\r\n                            Show more\r\n                          </span>\r\n                        )}\r\n                      </span>{\" \"}\r\n                      ]\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"text-sm text-secondary\">\r\n                    {calculateThreadTokens(visibleMessages)} tokens |{\" \"}\r\n                    {visibleMessages.length} messages\r\n                  </div>\r\n                </div>\r\n\r\n                {isExpanded && (\r\n                  <div className=\"flex relative flex-row gap-4\">\r\n                    {!isFlowVisible && (\r\n                      <div className=\"z-50 absolute right-2 top-2 bg-tertiary rounded p-2 hover:opacity-100 opacity-80\">\r\n                        <Tooltip title=\"Show message flow graph\">\r\n                          <button\r\n                            onClick={() => setIsFlowVisible(true)}\r\n                            className=\" p-1 rounded-md bg-tertiary  hover:bg-secondary  transition-colors\"\r\n                          >\r\n                            <PanelRightOpen strokeWidth={1.5} size={22} />\r\n                          </button>\r\n                        </Tooltip>\r\n                      </div>\r\n                    )}\r\n                    {/* Messages Thread */}\r\n                    <div\r\n                      ref={threadContainerRef}\r\n                      className=\"flex-1 mt-2 overflow-y-auto max-h-[400px] scroll-smooth scroll pb-2 relative\"\r\n                    >\r\n                      <div id=\"scroll-gradient\" className=\"scroll-gradient h-8\">\r\n                        {\" \"}\r\n                        <span className=\"  inline-block h-6\"></span>{\" \"}\r\n                      </div>\r\n                      {visibleMessages.map((msg, idx) => (\r\n                        <div\r\n                          key={\"message_id\" + idx + run.id}\r\n                          className=\"  mr-2\"\r\n                        >\r\n                          <RenderMessage\r\n                            message={msg.config}\r\n                            isLast={idx === visibleMessages.length - 1}\r\n                          />\r\n                        </div>\r\n                      ))}\r\n                      {streamingContent &&\r\n                        streamingContent.runId === run.id &&\r\n                        !isReplaying && (\r\n                          <div className=\"mr-2 mb-10\">\r\n                            <StreamingMessage\r\n                              content={streamingContent.content}\r\n                              source={streamingContent.source}\r\n                            />\r\n                          </div>\r\n                        )}\r\n\r\n                      {/* Input Request UI */}\r\n                      {displayRun.status === \"awaiting_input\" &&\r\n                        onInputResponse &&\r\n                        !isReplaying && (\r\n                          <div className=\"mt-4 mr-2\">\r\n                            <InputRequestView\r\n                              prompt=\"Type your response...\"\r\n                              onSubmit={onInputResponse}\r\n                            />\r\n                          </div>\r\n                        )}\r\n                      <div className=\"text-primary mt-2\">\r\n                        <div className=\"w-4 h-4 inline-block  border-secondary rounded-bl-lg border-l-2 border-b-2\"></div>{\" \"}\r\n                        <div className=\"inline-block \">\r\n                          {getStatusIcon(displayRun.status)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Agent Flow Visualization */}\r\n                    {isFlowVisible && (\r\n                      <div className=\"bg-tertiary flex-1 rounded mt-2 relative\">\r\n                        <div className=\"z-10 absolute left-2 top-2 p-2 hover:opacity-100 opacity-80\">\r\n                          <Tooltip title=\"Hide message flow\">\r\n                            <button\r\n                              onClick={() => setIsFlowVisible(false)}\r\n                              className=\" p-1 rounded-md bg-tertiary hover:bg-secondary transition-colors\"\r\n                            >\r\n                              <PanelRightClose strokeWidth={1.5} size={22} />\r\n                            </button>\r\n                          </Tooltip>\r\n                        </div>\r\n                        {teamConfig && (\r\n                          <AgentFlow\r\n                            teamConfig={teamConfig}\r\n                            run={{\r\n                              ...displayRun,\r\n                              messages: getAgentMessages(visibleMessages),\r\n                            }}\r\n                            viewMode={viewMode}\r\n                            selectedPatternId={selectedPatternId}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RunView;\r\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"Circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shuffle = createLucideIcon(\"Shuffle\", [\n  [\"path\", { d: \"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22\", key: \"1wmou1\" }],\n  [\"path\", { d: \"m18 2 4 4-4 4\", key: \"pucp1d\" }],\n  [\"path\", { d: \"M2 6h1.9c1.5 0 2.9.9 3.6 2.2\", key: \"10bdb2\" }],\n  [\"path\", { d: \"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8\", key: \"vgxac0\" }],\n  [\"path\", { d: \"m18 14 4 4-4 4\", key: \"10pe0f\" }]\n]);\n\nexport { Shuffle as default };\n//# sourceMappingURL=shuffle.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GitBranch = createLucideIcon(\"GitBranch\", [\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"3\", y2: \"15\", key: \"17qcm7\" }],\n  [\"circle\", { cx: \"18\", cy: \"6\", r: \"3\", key: \"1h7g24\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"path\", { d: \"M18 9a9 9 0 0 1-9 9\", key: \"n2h4wq\" }]\n]);\n\nexport { GitBranch as default };\n//# sourceMappingURL=git-branch.js.map\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SquareSplitHorizontal = createLucideIcon(\"SquareSplitHorizontal\", [\n  [\"path\", { d: \"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3\", key: \"lubmu8\" }],\n  [\"path\", { d: \"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3\", key: \"1ag34g\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"4\", y2: \"20\", key: \"1tx1rr\" }]\n]);\n\nexport { SquareSplitHorizontal as default };\n//# sourceMappingURL=square-split-horizontal.js.map\n","import * as React from \"react\";\r\nimport { Dropdown, Input, MenuProps, Tooltip } from \"antd\";\r\nimport { ChevronDown, TextSearch } from \"lucide-react\";\r\nimport { Session } from \"../../../types/datamodel\";\r\nimport { getRelativeTimeString } from \"../../atoms\";\r\n\r\ninterface SessionDropdownProps {\r\n  session: Session | null;\r\n  availableSessions: Session[];\r\n  onSessionChange: (session: Session) => void;\r\n  className?: string;\r\n}\r\n\r\nconst SessionDropdown: React.FC<SessionDropdownProps> = ({\r\n  session,\r\n  availableSessions,\r\n  onSessionChange,\r\n  className = \"\",\r\n}) => {\r\n  const [search, setSearch] = React.useState<string>(\"\");\r\n\r\n  // Filter sessions based on search input\r\n  const filteredSessions = availableSessions.filter((s) =>\r\n    s.name.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  // This needs to follow the exact MenuProps structure from antd\r\n  const items: MenuProps[\"items\"] = [\r\n    {\r\n      type: \"group\",\r\n      key: \"search-sessions\",\r\n      label: (\r\n        <div>\r\n          <div className=\"text-xs text-secondary mb-1\">Search sessions</div>\r\n          <Input\r\n            prefix={<TextSearch className=\"w-4 h-4\" />}\r\n            placeholder=\"Search sessions\"\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            onClick={(e) => e.stopPropagation()} // Prevent dropdown from closing\r\n          />\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      type: \"divider\",\r\n    },\r\n    ...filteredSessions.map((s) => ({\r\n      key: (s.id || \"\").toString(),\r\n      label: (\r\n        <div className=\"py-1\">\r\n          <div className=\"font-medium\">{s.name}</div>\r\n          <div className=\"text-xs text-secondary\">\r\n            {getRelativeTimeString(s.updated_at || \"\")}\r\n          </div>\r\n        </div>\r\n      ),\r\n    })),\r\n  ];\r\n\r\n  const handleMenuClick: MenuProps[\"onClick\"] = ({ key }) => {\r\n    const selectedSession = availableSessions.find((s) => s.id === Number(key));\r\n    if (selectedSession) {\r\n      onSessionChange(selectedSession);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dropdown menu={{ items, onClick: handleMenuClick }} trigger={[\"click\"]}>\r\n      <div\r\n        className={`cursor-pointer flex items-center gap-2 min-w-0 ${className}`}\r\n      >\r\n        <Tooltip title={session?.name}>\r\n          <span className=\"text-primary font-medium truncate overflow-hidden\">\r\n            {session?.name || \"Select Session\"}\r\n          </span>\r\n        </Tooltip>\r\n        <ChevronDown className=\"w-4 h-4 text-secondary flex-shrink-0\" />\r\n      </div>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nexport default SessionDropdown;\r\n","/**\r\n * Team Factory - Creates complete team configurations from patterns\r\n *\r\n * This is the main entry point for creating teams that are ready to execute.\r\n * It bridges:\r\n * - Pattern selection (user picks a collaboration style)\r\n * - Template system (pre-configured team structures)\r\n * - Custom participants (user's actual agents)\r\n * - Runtime configuration (model_client, termination, etc.)\r\n */\r\n\r\nimport { Component, TeamConfig, AgentConfig } from \"../../../../types/datamodel\";\r\nimport {\r\n  getPatternById,\r\n  PatternDefinition,\r\n  PATTERN_LIBRARY,\r\n} from \"../agentflow/patterns/pattern-schema\";\r\nimport {\r\n  getPatternTemplate,\r\n  cloneTemplate,\r\n  DEFAULT_MODEL_CLIENT,\r\n  DEFAULT_TERMINATION,\r\n  COMBINED_TERMINATION,\r\n  createAgentConfig,\r\n} from \"../agentflow/patterns/pattern-templates\";\r\n\r\n/**\r\n * Agent info for dynamic prompt generation\r\n */\r\ninterface AgentInfo {\r\n  name: string;\r\n  description: string;\r\n}\r\n\r\n/**\r\n * Generate dynamic selector_prompt based on actual agents (name + description)\r\n * This allows A2A agents to participate in any pattern.\r\n *\r\n * A2A Integration: A2A agents have both name and description.\r\n * The selector LLM needs descriptions to make intelligent speaker selection.\r\n */\r\nconst generateDynamicSelectorPrompt = (\r\n  patternId: string,\r\n  agents: AgentInfo[]\r\n): string => {\r\n  const names = agents.map(a => a.name).join(\", \");\r\n  const agentList = agents.map(a =>\r\n    `- ${a.name}: ${a.description || \"No description\"}`\r\n  ).join(\"\\n\");\r\n\r\n  // Pattern-specific prompt templates\r\n  const promptTemplates: Record<string, string> = {\r\n    debate: `You are coordinating a multi-agent debate. You MUST rotate between different agents.\r\n\r\nAvailable Agents:\r\n${agentList}\r\n\r\nCRITICAL RULES:\r\n1. **NEVER select the same agent twice in a row** - you MUST choose a DIFFERENT agent than the last speaker\r\n2. Each agent must take turns presenting their unique perspective\r\n3. Ensure ALL agents participate by rotating through them fairly\r\n4. If Agent A just spoke, select Agent B or Agent C next - NEVER Agent A again\r\n\r\nBased on the conversation history, select the NEXT speaker (must be different from the last one).\r\nConsider:\r\n- Who just spoke? Select someone DIFFERENT\r\n- Has everyone had a chance to speak?\r\n- Whose expertise complements the current discussion?\r\n\r\nAvailable agents: ${names}\r\nReturn ONLY the agent name, nothing else. The agent MUST be different from the last speaker.`,\r\n\r\n    selector: `You are a smart agent selector.\r\n\r\nAvailable Agents:\r\n${agentList}\r\n\r\nBased on the conversation history and the current request, choose the agent whose expertise best matches the needs.\r\n\r\nAvailable agents: ${names}\r\nReturn ONLY the agent name, nothing else.`,\r\n\r\n    reflection: `You are coordinating a reflection/review pattern.\r\n\r\nAvailable Agents:\r\n${agentList}\r\n\r\nPattern: One agent produces work, another reviews and provides feedback.\r\nBased on the conversation, select who should respond next.\r\n\r\nAvailable agents: ${names}\r\nReturn ONLY the agent name, nothing else.`,\r\n\r\n    default: `Select the next agent to speak.\r\n\r\nAvailable Agents:\r\n${agentList}\r\n\r\nBased on the conversation history, choose the most appropriate agent to continue.\r\nConsider each agent's expertise and the current topic.\r\n\r\nReturn ONLY the agent name, nothing else.`\r\n  };\r\n\r\n  return promptTemplates[patternId] || promptTemplates.default;\r\n};\r\n\r\n/**\r\n * Options for creating a team from a pattern\r\n */\r\nexport interface TeamFactoryOptions {\r\n  /** Custom model client to use (overrides default) */\r\n  modelClient?: {\r\n    provider: string;\r\n    component_type: \"model\";\r\n    config: Record<string, unknown>;\r\n  };\r\n  /** Custom termination condition */\r\n  terminationCondition?: {\r\n    provider: string;\r\n    component_type: \"termination\";\r\n    config: Record<string, unknown>;\r\n  };\r\n  /** Whether to use combined termination (text + max messages) */\r\n  useCombinedTermination?: boolean;\r\n  /** Max messages for max message termination */\r\n  maxMessages?: number;\r\n  /** Preserve existing team's model_client if available */\r\n  preserveExistingModelClient?: boolean;\r\n}\r\n\r\n/**\r\n * Result of team factory operation\r\n */\r\nexport interface TeamFactoryResult {\r\n  /** The created/modified team configuration */\r\n  teamConfig: Component<TeamConfig>;\r\n  /** Pattern that was applied */\r\n  pattern: PatternDefinition | null;\r\n  /** Whether a new team was created vs modified */\r\n  isNewTeam: boolean;\r\n  /** Any warnings during creation */\r\n  warnings: string[];\r\n  /** Whether model_client was added/modified */\r\n  modelClientModified: boolean;\r\n}\r\n\r\n/**\r\n * Model client type for team factory\r\n */\r\ntype ModelClientConfig = {\r\n  provider: string;\r\n  component_type: \"model\";\r\n  config: Record<string, unknown>;\r\n};\r\n\r\n/**\r\n * AssistantAgent   \r\n * AutoGen AssistantAgentConfig   .\r\n */\r\nconst ASSISTANT_AGENT_DEFAULTS = {\r\n  reflect_on_tool_use: false,\r\n  tool_call_summary_format: \"{result}\",\r\n  model_client_stream: false,\r\n};\r\n\r\n/**\r\n * Ensure an agent has model_client and required fields configured\r\n * For AssistantAgent, this also ensures reflect_on_tool_use, tool_call_summary_format, model_client_stream\r\n */\r\nconst ensureAgentModelClient = (\r\n  agent: Component<AgentConfig>,\r\n  defaultClient: ModelClientConfig\r\n): Component<AgentConfig> => {\r\n  const config = agent.config as any;\r\n  const isAssistantAgent = agent.provider?.includes(\"AssistantAgent\");\r\n\r\n  //      \r\n  const needsModelClient = !config?.model_client;\r\n  const needsAssistantDefaults = isAssistantAgent && (\r\n    config?.reflect_on_tool_use === undefined ||\r\n    config?.tool_call_summary_format === undefined ||\r\n    config?.model_client_stream === undefined\r\n  );\r\n\r\n  if (needsModelClient || needsAssistantDefaults) {\r\n    return {\r\n      ...agent,\r\n      config: {\r\n        ...config,\r\n        ...(needsModelClient ? { model_client: { ...defaultClient } } : {}),\r\n        ...(needsAssistantDefaults ? ASSISTANT_AGENT_DEFAULTS : {}),\r\n      },\r\n    };\r\n  }\r\n  return agent;\r\n};\r\n\r\n/**\r\n * Create a completely new team from a pattern template\r\n *\r\n * This creates a fresh team using the pattern's default structure.\r\n * Use this when starting from scratch.\r\n */\r\nexport const createNewTeamFromPattern = (\r\n  patternId: string,\r\n  options: TeamFactoryOptions = {}\r\n): TeamFactoryResult => {\r\n  const warnings: string[] = [];\r\n  const pattern = getPatternById(patternId);\r\n\r\n  if (!pattern) {\r\n    return {\r\n      teamConfig: createFallbackTeam(),\r\n      pattern: null,\r\n      isNewTeam: true,\r\n      warnings: [`Pattern '${patternId}' not found, using fallback sequential team`],\r\n      modelClientModified: true,\r\n    };\r\n  }\r\n\r\n  const template = getPatternTemplate(patternId);\r\n  if (!template) {\r\n    return {\r\n      teamConfig: createFallbackTeam(),\r\n      pattern,\r\n      isNewTeam: true,\r\n      warnings: [`No template for pattern '${patternId}', using fallback team`],\r\n      modelClientModified: true,\r\n    };\r\n  }\r\n\r\n  // Deep clone the template\r\n  const teamConfig = cloneTemplate(template);\r\n  const config = teamConfig.config as any;\r\n\r\n  // Apply custom model client if provided\r\n  const modelClient: ModelClientConfig = options.modelClient || DEFAULT_MODEL_CLIENT;\r\n  let modelClientModified = false;\r\n\r\n  // Update team-level model_client (for SelectorGroupChat)\r\n  if (config.model_client) {\r\n    config.model_client = { ...modelClient };\r\n    modelClientModified = true;\r\n  }\r\n\r\n  // Update each participant's model_client\r\n  if (config.participants) {\r\n    config.participants = config.participants.map((p: Component<AgentConfig>) => {\r\n      const updated = ensureAgentModelClient(p, modelClient);\r\n      if (updated !== p) modelClientModified = true;\r\n      return updated;\r\n    });\r\n  }\r\n\r\n  // Apply custom termination condition\r\n  if (options.useCombinedTermination) {\r\n    const combinedTerm = { ...COMBINED_TERMINATION };\r\n    if (options.maxMessages) {\r\n      (combinedTerm.config as any).conditions[1].config.max_messages = options.maxMessages;\r\n    }\r\n    config.termination_condition = combinedTerm;\r\n  } else if (options.terminationCondition) {\r\n    config.termination_condition = options.terminationCondition;\r\n  }\r\n\r\n  return {\r\n    teamConfig,\r\n    pattern,\r\n    isNewTeam: true,\r\n    warnings,\r\n    modelClientModified,\r\n  };\r\n};\r\n\r\n/**\r\n * Apply a pattern to an existing team configuration\r\n *\r\n * This changes the team structure to match the selected pattern while\r\n * PRESERVING existing agents (including A2A agents).\r\n *\r\n * A2A Integration: A2A agents can participate in ANY pattern.\r\n * The pattern defines the STRUCTURE (SelectorGroupChat, RoundRobin, etc.),\r\n * not the specific agents. Existing agents are always kept.\r\n */\r\nexport const applyPatternToExistingTeam = (\r\n  existingTeam: Component<TeamConfig>,\r\n  patternId: string,\r\n  options: TeamFactoryOptions = {}\r\n): TeamFactoryResult => {\r\n  const warnings: string[] = [];\r\n  const pattern = getPatternById(patternId);\r\n\r\n  if (!pattern) {\r\n    warnings.push(`Pattern '${patternId}' not found, returning original team`);\r\n    return {\r\n      teamConfig: existingTeam,\r\n      pattern: null,\r\n      isNewTeam: false,\r\n      warnings,\r\n      modelClientModified: false,\r\n    };\r\n  }\r\n\r\n  const existingParticipants = (existingTeam.config as any)?.participants || [];\r\n  const existingParticipantCount = existingParticipants.length;\r\n  const patternMinAgents = pattern.structure?.minAgents || 2;\r\n\r\n  // Get existing agent info (name + description) for selector prompt generation\r\n  // A2A agents have both name and description fields\r\n  const existingAgents: AgentInfo[] = existingParticipants.map(\r\n    (p: Component<AgentConfig>) => ({\r\n      name: (p.config?.name || \"unnamed\") as string,\r\n      description: (p.config?.description || p.description || \"\") as string\r\n    })\r\n  );\r\n  const existingAgentNames = existingAgents.map(a => a.name);\r\n\r\n  // ===== DEBUG: Pattern Application =====\r\n  console.log(` APPLY PATTERN TO EXISTING TEAM:\r\n    patternId: \"${patternId}\"\r\n    patternProvider: \"${pattern.autogenProviderFull}\"\r\n    patternMinAgents: ${patternMinAgents}\r\n    existingParticipantCount: ${existingParticipantCount}\r\n    existingAgents: ${JSON.stringify(existingAgents, null, 2)}\r\n    action: ${existingParticipantCount === 0 ? \"CREATE NEW (no agents)\" : \"KEEP EXISTING AGENTS\"}\r\n  `);\r\n\r\n  // Only create new team if there are NO existing agents\r\n  // A2A agents should always be preserved!\r\n  if (existingParticipantCount === 0) {\r\n    console.log(\" No existing agents - creating from pattern template\");\r\n    warnings.push(`No existing agents. Using pattern's default agents.`);\r\n    return createNewTeamFromPattern(patternId, options);\r\n  }\r\n  console.log(` Keeping ${existingParticipantCount} existing agents and applying ${patternId} structure`);\r\n\r\n  // Deep clone existing team\r\n  const teamConfig = JSON.parse(JSON.stringify(existingTeam)) as Component<TeamConfig>;\r\n  const config = teamConfig.config as any;\r\n  // Note: existingParticipants already defined above\r\n\r\n  // Get template for pattern-specific config\r\n  const template = getPatternTemplate(patternId);\r\n  const templateConfig = template?.config as any;\r\n\r\n  // Update provider to match pattern\r\n  teamConfig.provider = pattern.autogenProviderFull;\r\n\r\n  // Determine model client to use\r\n  let modelClient: ModelClientConfig;\r\n  let modelClientModified = false;\r\n\r\n  if (options.modelClient) {\r\n    modelClient = options.modelClient;\r\n    modelClientModified = true;\r\n  } else if (options.preserveExistingModelClient && config?.model_client) {\r\n    modelClient = config.model_client;\r\n  } else {\r\n    modelClient = DEFAULT_MODEL_CLIENT;\r\n    modelClientModified = true;\r\n  }\r\n\r\n  // Add team-level model_client for selector patterns\r\n  if (pattern.autogenProvider === \"SelectorGroupChat\") {\r\n    if (!config.model_client || !options.preserveExistingModelClient) {\r\n      config.model_client = { ...modelClient };\r\n      modelClientModified = true;\r\n    }\r\n\r\n    // Generate dynamic selector_prompt based on actual agents (name + description)\r\n    // This allows A2A agents (history_agent, philosophy_agent, etc.) to participate\r\n    // The selector LLM needs descriptions to make intelligent speaker selection\r\n    //\r\n    // IMPORTANT: ALWAYS regenerate selector_prompt when applying a pattern!\r\n    // The agents may have changed since the last time, and the old prompt\r\n    // might only include some of the agents.\r\n    {\r\n      const agentNames = existingAgentNames.join(\", \");\r\n      const dynamicPrompt = generateDynamicSelectorPrompt(patternId, existingAgents);\r\n      config.selector_prompt = dynamicPrompt;\r\n      warnings.push(`Generated dynamic selector_prompt for agents: [${agentNames}]`);\r\n      console.log(` Dynamic selector_prompt generated for pattern \"${patternId}\" with agents:\\n${existingAgents.map(a => `  - ${a.name}: ${a.description}`).join('\\n')}`);\r\n    }\r\n\r\n    // Set allow_repeated_speaker from pattern config\r\n    // DEFAULT: false (matches AutoGen's default behavior)\r\n    // AutoGen docs: \"By default, the team will not select the same speaker consecutively\"\r\n    // If a pattern needs repeated speakers, set requiredConfig.allow_repeated_speaker: true\r\n    config.allow_repeated_speaker =\r\n      pattern.requiredConfig?.allow_repeated_speaker ?? false;\r\n    console.log(` allow_repeated_speaker set to: ${config.allow_repeated_speaker} (from pattern \"${patternId}\")`);\r\n  }\r\n\r\n  // Configure handoffs for Swarm patterns\r\n  // Each agent needs a `handoffs` array listing other agents they can transfer to\r\n  if (pattern.autogenProvider === \"Swarm\") {\r\n    console.log(` Configuring handoffs for Swarm pattern with ${existingAgentNames.length} agents`);\r\n\r\n    // For each agent, set handoffs to all OTHER agents\r\n    config.participants = existingParticipants.map((p: Component<AgentConfig>, idx: number) => {\r\n      const agentName = (p.config?.name || `agent_${idx}`) as string;\r\n      // Get all other agent names as handoff targets\r\n      const handoffTargets = existingAgentNames.filter((name: string) => name !== agentName);\r\n\r\n      const agentConfig = p.config as any;\r\n\r\n      // Update the agent's handoffs\r\n      const updatedAgent = {\r\n        ...p,\r\n        config: {\r\n          ...agentConfig,\r\n          handoffs: handoffTargets,\r\n          // Also update system_message to instruct about handoffs\r\n          system_message: agentConfig.system_message +\r\n            `\\n\\n[HANDOFF INSTRUCTION]     transfer_to_<agent_name>  . ` +\r\n            `  : ${handoffTargets.join(', ')}`\r\n        }\r\n      };\r\n\r\n      console.log(`  - ${agentName} can handoff to: [${handoffTargets.join(', ')}]`);\r\n      return updatedAgent;\r\n    });\r\n\r\n    warnings.push(`Configured handoffs for ${existingAgentNames.length} agents in Swarm pattern`);\r\n  }\r\n\r\n  // Ensure all participants have model_client\r\n  // NOTE: Use config.participants (which may have been updated by Swarm handoff config)\r\n  // instead of existingParticipants (which is the original)\r\n  if (config.participants && config.participants.length > 0) {\r\n    config.participants = config.participants.map((p: Component<AgentConfig>) => {\r\n      const updated = ensureAgentModelClient(p, modelClient);\r\n      if (updated !== p) modelClientModified = true;\r\n      return updated;\r\n    });\r\n  } else if (existingParticipants.length > 0) {\r\n    // Fallback to existingParticipants if config.participants not set\r\n    config.participants = existingParticipants.map((p: Component<AgentConfig>) => {\r\n      const updated = ensureAgentModelClient(p, modelClient);\r\n      if (updated !== p) modelClientModified = true;\r\n      return updated;\r\n    });\r\n  }\r\n\r\n  // Add termination condition if missing\r\n  if (!config.termination_condition) {\r\n    if (options.useCombinedTermination) {\r\n      config.termination_condition = { ...COMBINED_TERMINATION };\r\n    } else if (options.terminationCondition) {\r\n      config.termination_condition = options.terminationCondition;\r\n    } else {\r\n      config.termination_condition = { ...DEFAULT_TERMINATION };\r\n    }\r\n    warnings.push(\"Added default termination condition\");\r\n  }\r\n\r\n  return {\r\n    teamConfig,\r\n    pattern,\r\n    isNewTeam: false,\r\n    warnings,\r\n    modelClientModified,\r\n  };\r\n};\r\n\r\n/**\r\n * Smart team creation - decides whether to create new or modify existing\r\n *\r\n * @param existingTeam - Current team config (if any)\r\n * @param patternId - Pattern to apply\r\n * @param options - Creation options\r\n */\r\nexport const createOrModifyTeam = (\r\n  existingTeam: Component<TeamConfig> | null | undefined,\r\n  patternId: string,\r\n  options: TeamFactoryOptions = {}\r\n): TeamFactoryResult => {\r\n  // If no existing team or it has no participants, create new\r\n  if (!existingTeam) {\r\n    return createNewTeamFromPattern(patternId, options);\r\n  }\r\n\r\n  const config = existingTeam.config as any;\r\n  const hasParticipants =\r\n    config?.participants && config.participants.length > 0;\r\n\r\n  if (!hasParticipants) {\r\n    // Existing team shell but no agents - create fresh from template\r\n    return createNewTeamFromPattern(patternId, options);\r\n  }\r\n\r\n  // Has participants - preserve them and apply pattern\r\n  return applyPatternToExistingTeam(existingTeam, patternId, options);\r\n};\r\n\r\n/**\r\n * Create a minimal fallback team (sequential with 2 agents)\r\n */\r\nconst createFallbackTeam = (): Component<TeamConfig> => ({\r\n  provider: \"autogen_agentchat.teams.RoundRobinGroupChat\",\r\n  component_type: \"team\",\r\n  config: {\r\n    participants: [\r\n      createAgentConfig(\r\n        \"Assistant\",\r\n        \"General purpose assistant\",\r\n        \"You are a helpful assistant.\"\r\n      ),\r\n      createAgentConfig(\r\n        \"Reviewer\",\r\n        \"Reviews and validates work\",\r\n        \"You review work and say TERMINATE when satisfied.\"\r\n      ),\r\n    ],\r\n    termination_condition: DEFAULT_TERMINATION,\r\n  },\r\n});\r\n\r\n/**\r\n * Validate a team configuration is ready to run\r\n */\r\nexport const validateTeamConfig = (\r\n  teamConfig: Component<TeamConfig>\r\n): { valid: boolean; errors: string[] } => {\r\n  const errors: string[] = [];\r\n  const config = teamConfig.config as any;\r\n\r\n  // Check provider\r\n  if (!teamConfig.provider) {\r\n    errors.push(\"Missing team provider\");\r\n  }\r\n\r\n  // Check participants\r\n  if (!config?.participants || config.participants.length === 0) {\r\n    errors.push(\"Team has no participants\");\r\n  } else {\r\n    // Check each participant has model_client\r\n    config.participants.forEach((p: any, i: number) => {\r\n      if (!p.config?.model_client) {\r\n        errors.push(`Participant ${i} (${p.config?.name || \"unnamed\"}) missing model_client`);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Check selector patterns have required config\r\n  if (teamConfig.provider?.includes(\"SelectorGroupChat\")) {\r\n    if (!config?.model_client) {\r\n      errors.push(\"SelectorGroupChat requires team-level model_client\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors,\r\n  };\r\n};\r\n\r\n/**\r\n * Get recommended pattern based on number of agents\r\n */\r\nexport const getRecommendedPattern = (agentCount: number): string => {\r\n  if (agentCount <= 2) return \"sequential\";\r\n  if (agentCount === 2) return \"reflection\";\r\n  if (agentCount <= 4) return \"selector\";\r\n  return \"swarm\";\r\n};\r\n\r\n/**\r\n * Get all available patterns\r\n */\r\nexport const getAvailablePatterns = (): PatternDefinition[] => {\r\n  return PATTERN_LIBRARY;\r\n};\r\n\r\nexport default {\r\n  createNewTeamFromPattern,\r\n  applyPatternToExistingTeam,\r\n  createOrModifyTeam,\r\n  validateTeamConfig,\r\n  getRecommendedPattern,\r\n  getAvailablePatterns,\r\n};\r\n","/**\r\n * Pattern Runtime - Main Orchestrator\r\n *\r\n * Converts pattern selection to actual team runtime configuration.\r\n * This is the core module that bridges visual patterns with AutoGen execution.\r\n *\r\n * Updated to use team-factory for complete configuration generation.\r\n */\r\n\r\nimport { Component, TeamConfig, AgentConfig } from \"../../../../types/datamodel\";\r\nimport { PatternDefinition, getPatternById, PATTERN_LIBRARY } from \"../agentflow/patterns/pattern-schema\";\r\nimport { configureSwarm, SwarmConfigOptions } from \"./swarm-config\";\r\nimport { configureSelector, SelectorConfigOptions } from \"./selector-config\";\r\nimport { configureRoundRobin, RoundRobinConfigOptions } from \"./roundrobin-config\";\r\nimport {\r\n  createOrModifyTeam,\r\n  validateTeamConfig,\r\n  TeamFactoryOptions,\r\n  TeamFactoryResult,\r\n} from \"./team-factory\";\r\nimport { DEFAULT_MODEL_CLIENT } from \"../agentflow/patterns/pattern-templates\";\r\n\r\n/**\r\n * Options for applying a pattern to a team\r\n */\r\nexport interface PatternApplyOptions {\r\n  swarm?: SwarmConfigOptions;\r\n  selector?: SelectorConfigOptions;\r\n  roundRobin?: RoundRobinConfigOptions;\r\n}\r\n\r\n/**\r\n * Result of applying a pattern\r\n */\r\nexport interface PatternApplyResult {\r\n  /** The modified team configuration */\r\n  teamConfig: Component<TeamConfig>;\r\n  /** Whether the pattern required provider change */\r\n  providerChanged: boolean;\r\n  /** Any warnings about the configuration */\r\n  warnings: string[];\r\n  /** The pattern that was applied */\r\n  appliedPattern: PatternDefinition | null;\r\n}\r\n\r\n/**\r\n * Apply a pattern to a team configuration\r\n *\r\n * This is the main function that transforms a team configuration\r\n * to match the selected pattern's requirements.\r\n *\r\n * @param teamConfig - The original team configuration\r\n * @param patternId - The ID of the pattern to apply\r\n * @param options - Configuration options for each pattern type\r\n * @returns The modified team configuration with metadata\r\n */\r\nexport const applyPatternToTeam = (\r\n  teamConfig: Component<TeamConfig>,\r\n  patternId: string,\r\n  options: PatternApplyOptions = {}\r\n): PatternApplyResult => {\r\n  const pattern = getPatternById(patternId);\r\n\r\n  if (!pattern) {\r\n    return {\r\n      teamConfig,\r\n      providerChanged: false,\r\n      warnings: [`Pattern '${patternId}' not found in library`],\r\n      appliedPattern: null,\r\n    };\r\n  }\r\n\r\n  // Deep clone the teamConfig\r\n  const modifiedConfig = JSON.parse(\r\n    JSON.stringify(teamConfig)\r\n  ) as Component<TeamConfig>;\r\n\r\n  // Track original provider for comparison\r\n  const originalProvider = modifiedConfig.provider;\r\n  const warnings: string[] = [];\r\n\r\n  // Update the provider from pattern schema\r\n  modifiedConfig.provider = pattern.autogenProviderFull;\r\n\r\n  const config = modifiedConfig.config as any;\r\n  const participants = (config?.participants || []) as Component<AgentConfig>[];\r\n\r\n  // Apply pattern-specific configuration based on provider type\r\n  switch (pattern.autogenProvider) {\r\n    case \"Swarm\":\r\n      configureSwarm(config, participants, options.swarm || {});\r\n      break;\r\n\r\n    case \"SelectorGroupChat\":\r\n      const selectorResult = configureSelector(\r\n        config,\r\n        pattern,\r\n        options.selector || {}\r\n      );\r\n      warnings.push(...selectorResult.warnings);\r\n      break;\r\n\r\n    case \"RoundRobinGroupChat\":\r\n      configureRoundRobin(config, options.roundRobin || {});\r\n      break;\r\n\r\n    default:\r\n      warnings.push(`Unknown provider: ${pattern.autogenProvider}`);\r\n  }\r\n\r\n  return {\r\n    teamConfig: modifiedConfig,\r\n    providerChanged: originalProvider !== pattern.autogenProviderFull,\r\n    warnings,\r\n    appliedPattern: pattern,\r\n  };\r\n};\r\n\r\n/**\r\n * Get compatible patterns for a given team provider\r\n *\r\n * Returns patterns that can be applied to a team with minimal changes.\r\n *\r\n * @param provider - The team's current provider string\r\n * @returns Array of compatible pattern definitions\r\n */\r\nexport const getCompatiblePatterns = (\r\n  provider: string\r\n): PatternDefinition[] => {\r\n  // Map provider to its pattern family\r\n  const providerToFamily: Record<string, string[]> = {\r\n    RoundRobinGroupChat: [\"sequential\", \"reflection\"],\r\n    SelectorGroupChat: [\"selector\", \"parallel\", \"debate\", \"supervisor\"],\r\n    Swarm: [\"swarm\", \"hierarchical\"],\r\n  };\r\n\r\n  // Find which family this provider belongs to\r\n  for (const [key, patternIds] of Object.entries(providerToFamily)) {\r\n    if (provider.includes(key)) {\r\n      return patternIds\r\n        .map((id) => getPatternById(id))\r\n        .filter((p): p is PatternDefinition => p !== undefined);\r\n    }\r\n  }\r\n\r\n  // Default: return all patterns\r\n  return PATTERN_LIBRARY;\r\n};\r\n\r\n/**\r\n * Check if a pattern is compatible with a team's provider\r\n *\r\n * @param provider - The team's current provider string\r\n * @param patternId - The pattern to check\r\n * @returns true if the pattern is natively compatible\r\n */\r\nexport const isPatternCompatible = (\r\n  provider: string,\r\n  patternId: string\r\n): boolean => {\r\n  const pattern = getPatternById(patternId);\r\n  if (!pattern) return false;\r\n\r\n  return provider.includes(pattern.autogenProvider);\r\n};\r\n\r\n/**\r\n * Generate participant role descriptions for selector prompt\r\n *\r\n * @param participants - Array of participant configurations\r\n * @returns Formatted role descriptions string\r\n */\r\nexport const generateRoleDescriptions = (\r\n  participants: Component<AgentConfig>[]\r\n): string => {\r\n  return participants\r\n    .map((p) => {\r\n      const name = p.config?.name || p.label || \"Agent\";\r\n      const description = p.config?.description || p.description || \"No description\";\r\n      return `- ${name}: ${description}`;\r\n    })\r\n    .join(\"\\n\");\r\n};\r\n\r\n/**\r\n * Fill selector prompt placeholders with actual values\r\n *\r\n * @param prompt - The selector prompt template\r\n * @param participants - Array of participant configurations\r\n * @param history - Optional conversation history\r\n * @returns The filled prompt string\r\n */\r\nexport const fillSelectorPrompt = (\r\n  prompt: string,\r\n  participants: Component<AgentConfig>[],\r\n  history?: string\r\n): string => {\r\n  const roles = generateRoleDescriptions(participants);\r\n  const names = participants\r\n    .map((p) => p.config?.name || p.label)\r\n    .filter(Boolean)\r\n    .join(\", \");\r\n\r\n  return prompt\r\n    .replace(\"{roles}\", roles)\r\n    .replace(\"{participants}\", names)\r\n    .replace(\"{history}\", history || \"[No history yet]\");\r\n};\r\n\r\n// ============================================\r\n// ENHANCED PATTERN APPLICATION (using team-factory)\r\n// ============================================\r\n\r\n/**\r\n * Apply pattern to team with complete configuration\r\n *\r\n * This is the recommended function for applying patterns.\r\n * It uses team-factory to ensure all required config is present.\r\n *\r\n * @param teamConfig - The original team configuration\r\n * @param patternId - The ID of the pattern to apply\r\n * @param options - Factory options for customization\r\n */\r\nexport const applyPatternComplete = (\r\n  teamConfig: Component<TeamConfig> | null,\r\n  patternId: string,\r\n  options: TeamFactoryOptions = {}\r\n): TeamFactoryResult => {\r\n  return createOrModifyTeam(teamConfig, patternId, options);\r\n};\r\n\r\n/**\r\n * Validate that a team is ready to run\r\n *\r\n * Checks for:\r\n * - Valid provider\r\n * - Participants with model_client\r\n * - Required pattern-specific config (e.g., selector_prompt)\r\n */\r\nexport const validateTeamForExecution = (\r\n  teamConfig: Component<TeamConfig>\r\n): { valid: boolean; errors: string[]; warnings: string[] } => {\r\n  const validation = validateTeamConfig(teamConfig);\r\n  const warnings: string[] = [];\r\n  const config = teamConfig.config as any;\r\n\r\n  // Additional checks\r\n  if (teamConfig.provider?.includes(\"SelectorGroupChat\")) {\r\n    if (!config?.selector_prompt) {\r\n      warnings.push(\"SelectorGroupChat without selector_prompt may use default behavior\");\r\n    }\r\n  }\r\n\r\n  if (!config?.termination_condition) {\r\n    warnings.push(\"No termination_condition set - task may run indefinitely\");\r\n  }\r\n\r\n  return {\r\n    valid: validation.valid,\r\n    errors: validation.errors,\r\n    warnings,\r\n  };\r\n};\r\n\r\n/**\r\n * Ensure team config is complete and ready to execute\r\n *\r\n * This is a convenience function that:\r\n * 1. Applies the pattern if needed\r\n * 2. Validates the configuration\r\n * 3. Returns a ready-to-run config or errors\r\n */\r\nexport const ensureTeamReady = (\r\n  teamConfig: Component<TeamConfig>,\r\n  patternId?: string\r\n): {\r\n  teamConfig: Component<TeamConfig>;\r\n  isReady: boolean;\r\n  errors: string[];\r\n  warnings: string[];\r\n} => {\r\n  let finalConfig = teamConfig;\r\n  const allWarnings: string[] = [];\r\n\r\n  // Apply pattern if specified\r\n  if (patternId) {\r\n    const result = applyPatternComplete(teamConfig, patternId);\r\n    finalConfig = result.teamConfig;\r\n    allWarnings.push(...result.warnings);\r\n  }\r\n\r\n  // Validate\r\n  const validation = validateTeamForExecution(finalConfig);\r\n\r\n  return {\r\n    teamConfig: finalConfig,\r\n    isReady: validation.valid,\r\n    errors: validation.errors,\r\n    warnings: [...allWarnings, ...validation.warnings],\r\n  };\r\n};\r\n\r\n// Re-export factory functions for convenience\r\nexport { createOrModifyTeam, validateTeamConfig } from \"./team-factory\";\r\nexport { DEFAULT_MODEL_CLIENT };\r\n\r\nexport default {\r\n  applyPatternToTeam,\r\n  applyPatternComplete,\r\n  validateTeamForExecution,\r\n  ensureTeamReady,\r\n  getCompatiblePatterns,\r\n  isPatternCompatible,\r\n  generateRoleDescriptions,\r\n  fillSelectorPrompt,\r\n};\r\n","import * as React from \"react\";\r\nimport { Button, message, Tooltip, Dropdown } from \"antd\";\r\nimport type { MenuProps } from \"antd\";\r\nimport { convertFilesToBase64, getServerUrl } from \"../../../utils/utils\";\r\nimport { IStatus } from \"../../../types/app\";\r\nimport {\r\n  Run,\r\n  Message,\r\n  WebSocketMessage,\r\n  TeamConfig,\r\n  AgentMessageConfig,\r\n  RunStatus,\r\n  TeamResult,\r\n  Session,\r\n  Component,\r\n  ModelClientStreamingChunkEvent,\r\n} from \"../../../types/datamodel\";\r\nimport { appContext } from \"../../../../hooks/provider\";\r\nimport ChatInput from \"./chatinput\";\r\nimport { teamAPI } from \"../../teambuilder/api\";\r\nimport { sessionAPI } from \"../api\";\r\nimport RunView from \"./runview\";\r\nimport { createTimeoutConfig } from \"./types\";\r\nimport {\r\n  ChevronRight,\r\n  MessagesSquare,\r\n  SplitSquareHorizontal,\r\n  X,\r\n  Network,\r\n  GitBranch,\r\n  Activity,\r\n  ArrowRight,\r\n  Circle,\r\n  Shuffle,\r\n  ChevronDown,\r\n} from \"lucide-react\";\r\nimport AgentFlow from \"./agentflow/agentflow\";\r\nimport SessionDropdown from \"./sessiondropdown\";\r\nimport { RcFile } from \"antd/es/upload\";\r\nimport { useSettingsStore } from \"../../settings/store\";\r\nimport { getPatternById, getPatternByProvider, getPatternSelectorPrompt, PATTERN_LIBRARY, PatternDefinition } from \"./agentflow/patterns/pattern-schema\";\r\nimport { applyPatternComplete, validateTeamForExecution } from \"./team-runtime\";\r\nconst logo = require(\"../../../../images/landing/welcome.svg\").default;\r\n\r\ninterface ChatViewProps {\r\n  session: Session | null;\r\n  isCompareMode?: boolean;\r\n  isSecondaryView?: boolean; // To know if this is the right panel\r\n  onCompareClick?: () => void;\r\n  onExitCompare?: () => void;\r\n  onSessionChange?: (session: Session) => void;\r\n  availableSessions?: Session[];\r\n  showCompareButton?: boolean;\r\n}\r\n\r\nexport default function ChatView({\r\n  session,\r\n  isCompareMode = false,\r\n  isSecondaryView = false,\r\n  onCompareClick,\r\n  onExitCompare,\r\n  onSessionChange,\r\n  availableSessions = [],\r\n  showCompareButton = true,\r\n}: ChatViewProps) {\r\n  const serverUrl = getServerUrl();\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState<IStatus | null>({\r\n    status: true,\r\n    message: \"All good\",\r\n  });\r\n\r\n  // Core state\r\n  const [existingRuns, setExistingRuns] = React.useState<Run[]>([]);\r\n  const [currentRun, setCurrentRun] = React.useState<Run | null>(null);\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n\r\n  const chatContainerRef = React.useRef<HTMLDivElement | null>(null);\r\n  const [streamingContent, setStreamingContent] = React.useState<{\r\n    runId: number;\r\n    content: string;\r\n    source: string;\r\n  } | null>(null);\r\n\r\n  // View mode: \"pattern\" shows team structure, \"execution\" shows actual message flow\r\n  const [viewMode, setViewMode] = React.useState<\"pattern\" | \"execution\">(\"pattern\");\r\n\r\n  // Pattern selection from schema (all 8 patterns available!)\r\n  const [selectedPatternId, setSelectedPatternId] = React.useState<string>(\"sequential\");\r\n\r\n  // Get current pattern definition from schema\r\n  const selectedPattern = React.useMemo(() =>\r\n    getPatternById(selectedPatternId) || PATTERN_LIBRARY[0],\r\n    [selectedPatternId]\r\n  );\r\n\r\n  // Pattern menu items generated from schema (not hardcoded!)\r\n  const patternMenuItems: MenuProps[\"items\"] = React.useMemo(() =>\r\n    PATTERN_LIBRARY.map((pattern: PatternDefinition) => ({\r\n      key: pattern.id,\r\n      icon: pattern.id === \"sequential\" ? <ArrowRight className=\"w-4 h-4\" /> :\r\n            pattern.id === \"selector\" ? <Circle className=\"w-4 h-4\" /> :\r\n            pattern.id === \"swarm\" ? <Shuffle className=\"w-4 h-4\" /> :\r\n            pattern.id === \"reflection\" ? <Activity className=\"w-4 h-4\" /> :\r\n            <Network className=\"w-4 h-4\" />,\r\n      label: pattern.name,\r\n    })),\r\n    []\r\n  );\r\n\r\n  // Context and config\r\n  const { user } = React.useContext(appContext);\r\n  // const { session, sessions } = useConfigStore();\r\n  const [activeSocket, setActiveSocket] = React.useState<WebSocket | null>(\r\n    null\r\n  );\r\n  const [teamConfig, setTeamConfig] =\r\n    React.useState<Component<TeamConfig> | null>(null);\r\n\r\n  // Get modified teamConfig based on selected pattern using modular team-runtime\r\n  // Updated to use applyPatternComplete for full configuration\r\n  const effectiveTeamConfig = React.useMemo((): Component<TeamConfig> | null => {\r\n    if (!selectedPatternId) return teamConfig;\r\n\r\n    // Use the enhanced applyPatternComplete function from team-runtime\r\n    // This ensures model_client and termination_condition are properly set\r\n    const result = applyPatternComplete(teamConfig, selectedPatternId);\r\n\r\n    // ===== DEBUGGING: Provider Change Log =====\r\n    console.log(\" PATTERN APPLIED:\", {\r\n      patternId: selectedPatternId,\r\n      originalProvider: teamConfig?.provider,\r\n      newProvider: result.teamConfig?.provider,\r\n      providerChanged: teamConfig?.provider !== result.teamConfig?.provider,\r\n      isNewTeam: result.isNewTeam,\r\n    });\r\n\r\n    // Log any warnings during development\r\n    if (result.warnings.length > 0) {\r\n      console.log(\"Pattern configuration warnings:\", result.warnings);\r\n    }\r\n\r\n    // Validate the resulting config\r\n    const validation = validateTeamForExecution(result.teamConfig);\r\n    if (!validation.valid) {\r\n      console.warn(\"Team validation errors:\", validation.errors);\r\n    }\r\n    if (validation.warnings.length > 0) {\r\n      console.log(\"Team validation warnings:\", validation.warnings);\r\n    }\r\n\r\n    return result.teamConfig;\r\n  }, [teamConfig, selectedPatternId]);\r\n\r\n  // Get settings for timeout configuration\r\n  const { uiSettings } = useSettingsStore();\r\n  const timeoutConfig = React.useMemo(\r\n    () => createTimeoutConfig(uiSettings.human_input_timeout_minutes || 3),\r\n    [uiSettings.human_input_timeout_minutes]\r\n  );\r\n\r\n  const inputTimeoutRef = React.useRef<NodeJS.Timeout | null>(null);\r\n  const activeSocketRef = React.useRef<WebSocket | null>(null);\r\n\r\n  // Create a Message object from AgentMessageConfig\r\n  const createMessage = (\r\n    config: AgentMessageConfig,\r\n    runId: number,\r\n    sessionId: number\r\n  ): Message => ({\r\n    created_at: new Date().toISOString(),\r\n    updated_at: new Date().toISOString(),\r\n    config,\r\n    session_id: sessionId,\r\n    run_id: runId,\r\n    user_id: user?.id || undefined,\r\n  });\r\n\r\n  // Load existing runs when session changes\r\n  const loadSessionRuns = async () => {\r\n    if (!session?.id || !user?.id) return;\r\n\r\n    try {\r\n      const response = await sessionAPI.getSessionRuns(session.id, user.id);\r\n      setExistingRuns(response.runs);\r\n    } catch (error) {\r\n      console.error(\"Error loading session runs:\", error);\r\n      messageApi.error(\"Failed to load chat history\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (session?.id) {\r\n      loadSessionRuns();\r\n      setCurrentRun(null);\r\n    } else {\r\n      setExistingRuns([]);\r\n      setCurrentRun(null);\r\n    }\r\n  }, [session?.id]);\r\n\r\n  // Load team config\r\n  React.useEffect(() => {\r\n    if (session?.team_id && user?.id) {\r\n      teamAPI\r\n        .getTeam(session.team_id, user.id)\r\n        .then((team) => {\r\n          setTeamConfig(team.component);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error loading team config:\", error);\r\n          // messageApi.error(\"Failed to load team config\");\r\n          setTeamConfig(null);\r\n        });\r\n    }\r\n  }, [session]);\r\n\r\n  // Sync selectedPatternId with loaded teamConfig's provider\r\n  // This ensures the UI pattern matches the actual team configuration\r\n  React.useEffect(() => {\r\n    if (teamConfig?.provider) {\r\n      const detectedPattern = getPatternByProvider(teamConfig.provider);\r\n      if (detectedPattern) {\r\n        setSelectedPatternId(detectedPattern.id);\r\n      }\r\n    }\r\n  }, [teamConfig]);\r\n\r\n  React.useEffect(() => {\r\n    setTimeout(() => {\r\n      if (chatContainerRef.current && existingRuns.length > 0) {\r\n        // Scroll to bottom to show latest run\r\n        chatContainerRef.current.scrollTo({\r\n          top: chatContainerRef.current.scrollHeight,\r\n          behavior: \"auto\", // Use 'auto' instead of 'smooth' for initial load\r\n        });\r\n      }\r\n    }, 450);\r\n  }, [existingRuns.length, currentRun?.messages]);\r\n\r\n  // Cleanup socket on unmount\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (inputTimeoutRef.current) {\r\n        clearTimeout(inputTimeoutRef.current);\r\n      }\r\n      activeSocket?.close();\r\n    };\r\n  }, [activeSocket]);\r\n\r\n  const createRun = async (sessionId: number): Promise<number> => {\r\n    return await sessionAPI.createRun(sessionId, user?.id || \"\");\r\n  };\r\n\r\n  const handleWebSocketMessage = (message: WebSocketMessage) => {\r\n    setCurrentRun((current) => {\r\n      if (!current || !session?.id) return null;\r\n      // console.log(\"WebSocket message:\", message);\r\n\r\n      switch (message.type) {\r\n        case \"error\":\r\n          if (inputTimeoutRef.current) {\r\n            clearTimeout(inputTimeoutRef.current);\r\n            inputTimeoutRef.current = null;\r\n          }\r\n          if (activeSocket) {\r\n            activeSocket.close();\r\n            setActiveSocket(null);\r\n            activeSocketRef.current = null;\r\n          }\r\n          console.log(\"Error: \", message.error);\r\n\r\n          const updatedErrorRun = {\r\n            ...current,\r\n            status: \"error\" as RunStatus,\r\n            error_message: message.error || \"An error occurred\",\r\n          };\r\n\r\n          // Add to existing runs\r\n          setExistingRuns((prev) => [...prev, updatedErrorRun]);\r\n          return null; // Clear current run\r\n\r\n        case \"message_chunk\":\r\n          if (!message.data) return current;\r\n\r\n          // Update streaming content\r\n          try {\r\n            const chunk = message.data as ModelClientStreamingChunkEvent;\r\n            setStreamingContent((prev) => ({\r\n              runId: current.id,\r\n              content: (prev?.content || \"\") + (chunk.content || \"\"),\r\n              source: chunk.source || \"assistant\",\r\n            }));\r\n          } catch (error) {\r\n            console.error(\"Error parsing message chunk:\", error);\r\n          }\r\n\r\n          return current; // Keep current run unchanged\r\n\r\n        case \"message\":\r\n          setStreamingContent(null);\r\n          if (!message.data) return current;\r\n\r\n          // Create new Message object from websocket data\r\n          const newMessage = createMessage(\r\n            message.data as AgentMessageConfig,\r\n            current.id,\r\n            session.id\r\n          );\r\n\r\n          return {\r\n            ...current,\r\n            messages: [...current.messages, newMessage],\r\n          };\r\n\r\n        case \"input_request\":\r\n          if (inputTimeoutRef.current) {\r\n            clearTimeout(inputTimeoutRef.current);\r\n          }\r\n\r\n          inputTimeoutRef.current = setTimeout(() => {\r\n            const socket = activeSocketRef.current;\r\n            console.log(\"Input timeout\", socket);\r\n\r\n            if (socket?.readyState === WebSocket.OPEN) {\r\n              socket.send(\r\n                JSON.stringify({\r\n                  type: \"stop\",\r\n                  reason: timeoutConfig.DEFAULT_MESSAGE,\r\n                  code: timeoutConfig.WEBSOCKET_CODE,\r\n                })\r\n              );\r\n              setCurrentRun((prev) =>\r\n                prev\r\n                  ? {\r\n                      ...prev,\r\n                      status: \"stopped\",\r\n                      error_message: timeoutConfig.DEFAULT_MESSAGE,\r\n                    }\r\n                  : null\r\n              );\r\n            }\r\n          }, timeoutConfig.DURATION_MS);\r\n\r\n          return {\r\n            ...current,\r\n            status: \"awaiting_input\",\r\n          };\r\n        case \"result\":\r\n        case \"completion\":\r\n          // When run completes, move it to existingRuns\r\n          const status: RunStatus =\r\n            message.status === \"complete\"\r\n              ? \"complete\"\r\n              : message.status === \"error\"\r\n              ? \"error\"\r\n              : \"stopped\";\r\n\r\n          const isTeamResult = (data: any): data is TeamResult => {\r\n            return (\r\n              data &&\r\n              \"task_result\" in data &&\r\n              \"usage\" in data &&\r\n              \"duration\" in data\r\n            );\r\n          };\r\n\r\n          const updatedRun = {\r\n            ...current,\r\n            status,\r\n            team_result:\r\n              message.data && isTeamResult(message.data) ? message.data : null,\r\n          };\r\n\r\n          // Add to existing runs if complete\r\n          if (status === \"complete\") {\r\n            if (inputTimeoutRef.current) {\r\n              clearTimeout(inputTimeoutRef.current);\r\n              inputTimeoutRef.current = null;\r\n            }\r\n            if (activeSocket) {\r\n              activeSocket.close();\r\n              setActiveSocket(null);\r\n              activeSocketRef.current = null;\r\n            }\r\n            setExistingRuns((prev) => [...prev, updatedRun]);\r\n            return null;\r\n          }\r\n\r\n          return updatedRun;\r\n\r\n        default:\r\n          return current;\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleError = (error: any) => {\r\n    console.error(\"Error:\", error);\r\n    message.error(\"Error during request processing\");\r\n\r\n    setCurrentRun((current) => {\r\n      if (!current) return null;\r\n\r\n      const errorRun = {\r\n        ...current,\r\n        status: \"error\" as const,\r\n        error_message:\r\n          error instanceof Error ? error.message : \"Unknown error occurred\",\r\n      };\r\n\r\n      // Add failed run to existing runs\r\n      setExistingRuns((prev) => [...prev, errorRun]);\r\n      return null; // Clear current run\r\n    });\r\n\r\n    setError({\r\n      status: false,\r\n      message:\r\n        error instanceof Error ? error.message : \"Unknown error occurred\",\r\n    });\r\n  };\r\n\r\n  const handleInputResponse = async (response: string) => {\r\n    if (!activeSocketRef.current || !currentRun) return;\r\n\r\n    if (activeSocketRef.current.readyState !== WebSocket.OPEN) {\r\n      console.error(\r\n        \"Socket not in OPEN state:\",\r\n        activeSocketRef.current.readyState\r\n      );\r\n      handleError(new Error(\"WebSocket connection not available\"));\r\n      return;\r\n    }\r\n\r\n    // Clear timeout when response received\r\n    if (inputTimeoutRef.current) {\r\n      clearTimeout(inputTimeoutRef.current);\r\n      inputTimeoutRef.current = null;\r\n    }\r\n\r\n    try {\r\n      activeSocketRef.current.send(\r\n        JSON.stringify({\r\n          type: \"input_response\",\r\n          response: response,\r\n        })\r\n      );\r\n\r\n      setCurrentRun((current) => {\r\n        if (!current) return null;\r\n        return {\r\n          ...current,\r\n          status: \"active\",\r\n        };\r\n      });\r\n    } catch (error) {\r\n      handleError(error);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async () => {\r\n    if (!activeSocketRef.current || !currentRun) return;\r\n\r\n    // Clear timeout when manually cancelled\r\n    if (inputTimeoutRef.current) {\r\n      clearTimeout(inputTimeoutRef.current);\r\n      inputTimeoutRef.current = null;\r\n    }\r\n    try {\r\n      activeSocketRef.current.send(\r\n        JSON.stringify({\r\n          type: \"stop\",\r\n          reason: \"Cancelled by user\",\r\n        })\r\n      );\r\n\r\n      setCurrentRun((current) => {\r\n        if (!current) return null;\r\n        return {\r\n          ...current,\r\n          status: \"stopped\",\r\n        };\r\n      });\r\n    } catch (error) {\r\n      handleError(error);\r\n    }\r\n  };\r\n\r\n  const runTask = async (query: string, files: RcFile[] = []) => {\r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    // Add explicit cleanup\r\n    if (activeSocket) {\r\n      activeSocket.close();\r\n      setActiveSocket(null);\r\n      activeSocketRef.current = null;\r\n    }\r\n\r\n    if (inputTimeoutRef.current) {\r\n      clearTimeout(inputTimeoutRef.current);\r\n      inputTimeoutRef.current = null;\r\n    }\r\n\r\n    if (!session?.id || !effectiveTeamConfig) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const runId = await createRun(session.id);\r\n\r\n      // Process files using the extracted function\r\n      const processedFiles = await convertFilesToBase64(files);\r\n\r\n      // Initialize run state BEFORE websocket connection\r\n      setCurrentRun({\r\n        id: runId,\r\n        created_at: new Date().toISOString(),\r\n        status: \"created\", // Start with created status\r\n        messages: [],\r\n        task: [\r\n          {\r\n            content: query,\r\n            source: \"user\",\r\n          },\r\n        ],\r\n        team_result: null,\r\n        error_message: undefined,\r\n      });\r\n\r\n      // Setup WebSocket with files\r\n      const socket = setupWebSocket(runId, query, processedFiles);\r\n      setActiveSocket(socket);\r\n      activeSocketRef.current = socket;\r\n    } catch (error) {\r\n      handleError(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const setupWebSocket = (\r\n    runId: number,\r\n    query: string,\r\n    files: { name: string; type: string; content: string }[]\r\n  ): WebSocket => {\r\n    if (!session || !session.id) {\r\n      throw new Error(\"Invalid session configuration\");\r\n    }\r\n    // Close existing socket if any\r\n    if (activeSocket?.readyState === WebSocket.OPEN) {\r\n      activeSocket.close();\r\n    }\r\n\r\n    const baseUrl = getBaseUrl(serverUrl);\r\n    const wsProtocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\r\n    const auth_token = localStorage.getItem(\"auth_token\");\r\n    const wsUrl = `${wsProtocol}//${baseUrl}/api/ws/runs/${runId}?token=${auth_token}`;\r\n\r\n    const socket = new WebSocket(wsUrl);\r\n\r\n    // Initialize current run\r\n    setCurrentRun({\r\n      id: runId,\r\n      created_at: new Date().toISOString(),\r\n      status: \"active\",\r\n\r\n      task: [\r\n        createMessage(\r\n          { content: query, source: \"user\" },\r\n          runId,\r\n          session.id || 0\r\n        ).config,\r\n      ],\r\n      team_result: null,\r\n      messages: [],\r\n      error_message: undefined,\r\n    });\r\n\r\n    socket.onopen = () => {\r\n      // Send start message with effectiveTeamConfig (modified based on selected pattern)\r\n      socket.send(\r\n        JSON.stringify({\r\n          type: \"start\",\r\n          task: query,\r\n          files: files,\r\n          team_config: effectiveTeamConfig,\r\n        })\r\n      );\r\n    };\r\n\r\n    socket.onmessage = (event) => {\r\n      try {\r\n        const message = JSON.parse(event.data);\r\n        handleWebSocketMessage(message);\r\n      } catch (error) {\r\n        console.error(\"WebSocket message parsing error:\", error);\r\n      }\r\n    };\r\n\r\n    socket.onclose = () => {\r\n      activeSocketRef.current = null;\r\n      setActiveSocket(null);\r\n    };\r\n\r\n    socket.onerror = (error) => {\r\n      handleError(error);\r\n    };\r\n\r\n    return socket;\r\n  };\r\n\r\n  // Helper for WebSocket URL\r\n  const getBaseUrl = (url: string): string => {\r\n    try {\r\n      let baseUrl = url.replace(/(^\\w+:|^)\\/\\//, \"\");\r\n      if (baseUrl.startsWith(\"localhost\")) {\r\n        baseUrl = baseUrl.replace(\"/api\", \"\");\r\n      } else if (baseUrl === \"/api\") {\r\n        baseUrl = window.location.host;\r\n      } else {\r\n        baseUrl = baseUrl.replace(\"/api\", \"\").replace(/\\/$/, \"\");\r\n      }\r\n      return baseUrl;\r\n    } catch (error) {\r\n      console.error(\"Error processing server URL:\", error);\r\n      throw new Error(\"Invalid server URL configuration\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-primary h-[calc(100vh-165px)] bg-primary relative rounded flex-1 scroll\">\r\n      {contextHolder}\r\n      <div className=\"flex pt-2 items-center justify-between text-sm h-10\">\r\n        <div className=\"flex items-center gap-2 min-w-0 overflow-hidden flex-1 pr-4\">\r\n          {isCompareMode ? (\r\n            <SessionDropdown\r\n              session={session}\r\n              availableSessions={availableSessions}\r\n              onSessionChange={onSessionChange || (() => {})}\r\n              className=\"w-full\"\r\n            />\r\n          ) : (\r\n            <>\r\n              <span className=\"text-primary font-medium whitespace-nowrap flex-shrink-0\">\r\n                Sessions\r\n              </span>\r\n              {session && (\r\n                <>\r\n                  <ChevronRight className=\"w-4 h-4 text-secondary flex-shrink-0\" />\r\n                  <Tooltip title={session.name}>\r\n                    <span className=\"text-secondary truncate overflow-hidden\">\r\n                      {session.name}\r\n                    </span>\r\n                  </Tooltip>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 flex-shrink-0 whitespace-nowrap\">\r\n          {/* Pattern Selector Dropdown - All patterns from schema */}\r\n          {teamConfig && (\r\n            <Dropdown\r\n              menu={{\r\n                items: patternMenuItems,\r\n                onClick: ({ key }) => setSelectedPatternId(key),\r\n                selectedKeys: [selectedPatternId],\r\n              }}\r\n              trigger={[\"click\"]}\r\n            >\r\n              <Tooltip title={selectedPattern?.description || \"Select collaboration pattern\"}>\r\n                <button className=\"flex items-center gap-1 px-2 py-1.5 rounded-md text-xs bg-secondary hover:bg-tertiary transition-colors border border-secondary\">\r\n                  {selectedPatternId === \"sequential\" && <ArrowRight className=\"w-3.5 h-3.5\" />}\r\n                  {selectedPatternId === \"selector\" && <Circle className=\"w-3.5 h-3.5\" />}\r\n                  {selectedPatternId === \"swarm\" && <Shuffle className=\"w-3.5 h-3.5\" />}\r\n                  {![\"sequential\", \"selector\", \"swarm\"].includes(selectedPatternId) && <Network className=\"w-3.5 h-3.5\" />}\r\n                  <span className=\"hidden sm:inline\">\r\n                    {selectedPattern?.name?.split(\" \")[0] || \"Pattern\"}\r\n                  </span>\r\n                  <ChevronDown className=\"w-3 h-3\" />\r\n                </button>\r\n              </Tooltip>\r\n            </Dropdown>\r\n          )}\r\n\r\n          {/* View Mode Toggle Button */}\r\n          {teamConfig && (\r\n            <div className=\"flex items-center bg-secondary rounded-md p-0.5\">\r\n              <Tooltip title=\"Pattern View - Shows team collaboration structure\">\r\n                <button\r\n                  onClick={() => setViewMode(\"pattern\")}\r\n                  className={`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${\r\n                    viewMode === \"pattern\"\r\n                      ? \"bg-accent text-white\"\r\n                      : \"text-secondary hover:text-primary\"\r\n                  }`}\r\n                >\r\n                  <GitBranch className=\"w-3.5 h-3.5\" />\r\n                  Pattern\r\n                </button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Execution View - Shows actual message flow\">\r\n                <button\r\n                  onClick={() => setViewMode(\"execution\")}\r\n                  className={`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${\r\n                    viewMode === \"execution\"\r\n                      ? \"bg-accent text-white\"\r\n                      : \"text-secondary hover:text-primary\"\r\n                  }`}\r\n                >\r\n                  <Activity className=\"w-3.5 h-3.5\" />\r\n                  Execution\r\n                </button>\r\n              </Tooltip>\r\n            </div>\r\n          )}\r\n          {!isCompareMode && !isSecondaryView && showCompareButton && (\r\n            <Button\r\n              type=\"text\"\r\n              onClick={onCompareClick}\r\n              icon={<SplitSquareHorizontal className=\"w-4 h-4\" />}\r\n            >\r\n              Compare\r\n            </Button>\r\n          )}\r\n          {isCompareMode && isSecondaryView && (\r\n            <Button\r\n              type=\"text\"\r\n              onClick={onExitCompare}\r\n              icon={<X className=\"w-4 h-4\" />}\r\n            >\r\n              Exit Compare\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col h-full\">\r\n        <div\r\n          ref={chatContainerRef}\r\n          className=\"flex-1 overflow-y-auto scroll mt-2 min-h-0 relative\"\r\n        >\r\n          <div id=\"scroll-gradient\" className=\"scroll-gradient h-8 top-0\">\r\n            {\" \"}\r\n            <span className=\"  inline-block h-6\"></span>{\" \"}\r\n          </div>\r\n          <>\r\n            {teamConfig && (\r\n              <>\r\n                {/* Existing Runs - use effectiveTeamConfig to show selected pattern visualization */}\r\n                {existingRuns.map((run, index) => (\r\n                  <RunView\r\n                    teamConfig={effectiveTeamConfig || teamConfig}\r\n                    key={run.id + \"-review-\" + index + \"-\" + selectedPatternId}\r\n                    run={run}\r\n                    isFirstRun={index === 0}\r\n                    viewMode={viewMode}\r\n                    selectedPatternId={selectedPatternId}\r\n                  />\r\n                ))}\r\n\r\n                {/* Current Run - use effectiveTeamConfig (being executed with selected pattern) */}\r\n                {currentRun && effectiveTeamConfig && (\r\n                  <RunView\r\n                    run={currentRun}\r\n                    teamConfig={effectiveTeamConfig}\r\n                    onInputResponse={handleInputResponse}\r\n                    onCancel={handleCancel}\r\n                    isFirstRun={existingRuns.length === 0}\r\n                    streamingContent={streamingContent}\r\n                    viewMode={viewMode}\r\n                    selectedPatternId={selectedPatternId}\r\n                  />\r\n                )}\r\n\r\n                {/* No existing runs - Show team pattern preview */}\r\n\r\n                {!currentRun && existingRuns.length === 0 && effectiveTeamConfig && (\r\n                  <div className=\"flex flex-col items-center justify-center h-[80%]\">\r\n                    <div className=\"text-center mb-4\">\r\n                      <Network\r\n                        strokeWidth={1}\r\n                        className=\"w-12 h-12 mb-2 inline-block text-secondary\"\r\n                      />\r\n                      <div className=\"font-medium mb-1\">\r\n                        {selectedPattern?.name || \"Pattern\"}\r\n                      </div>\r\n                      <div className=\"text-secondary text-sm\">\r\n                        Enter a task to start the conversation\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Team Pattern Preview */}\r\n                    <div className=\"w-full max-w-2xl h-[350px] bg-tertiary rounded-lg border border-secondary\">\r\n                      <AgentFlow\r\n                        teamConfig={effectiveTeamConfig}\r\n                        run={{\r\n                          id: 0,\r\n                          created_at: new Date().toISOString(),\r\n                          status: \"created\",\r\n                          messages: [],\r\n                          task: [],\r\n                          team_result: null,\r\n                          error_message: undefined,\r\n                        }}\r\n                        viewMode=\"pattern\"\r\n                        selectedPatternId={selectedPatternId}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* No team config */}\r\n            {!teamConfig && (\r\n              <div className=\"flex items-center justify-center h-[80%]\">\r\n                <div className=\"text-center  \">\r\n                  <MessagesSquare\r\n                    strokeWidth={1}\r\n                    className=\"w-64 h-64 mb-4 inline-block\"\r\n                  />\r\n                  <div className=\"  font-medium mb-2\">\r\n                    No team configuration found for this session (may have been\r\n                    deleted).{\" \"}\r\n                  </div>\r\n                  <div className=\"text-secondary text-sm\">\r\n                    Add a team to the session to get started.\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        </div>\r\n\r\n        {session && effectiveTeamConfig && (\r\n          <div className=\"flex-shrink-0\">\r\n            <ChatInput\r\n              onSubmit={runTask}\r\n              loading={loading}\r\n              error={error}\r\n              disabled={\r\n                currentRun?.status === \"awaiting_input\" ||\r\n                currentRun?.status === \"active\"\r\n              }\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","module.exports = barycenter;\n\nfunction barycenter(g, movable = []) {\n  return movable.map(v => {\n    let inV = g.inEdges(v);\n    if (!inV.length) {\n      return { v: v };\n    } else {\n      let result = inV.reduce((acc, e) => {\n        let edge = g.edge(e),\n          nodeU = g.node(e.v);\n        return {\n          sum: acc.sum + (edge.weight * nodeU.order),\n          weight: acc.weight + edge.weight\n        };\n      }, { sum: 0, weight: 0 });\n\n      return {\n        v: v,\n        barycenter: result.sum / result.weight,\n        weight: result.weight\n      };\n    }\n  });\n}\n\n","var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n","import { Session, SessionRuns } from \"../../types/datamodel\";\r\nimport { BaseAPI } from \"../../utils/baseapi\";\r\n\r\nexport class SessionAPI extends BaseAPI {\r\n  async listSessions(userId: string): Promise<Session[]> {\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/?user_id=${userId}`,\r\n      {\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to fetch sessions\");\r\n    return data.data;\r\n  }\r\n\r\n  async getSession(sessionId: number, userId: string): Promise<Session> {\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/${sessionId}?user_id=${userId}`,\r\n      {\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to fetch session\");\r\n    return data.data;\r\n  }\r\n\r\n  async createSession(\r\n    sessionData: Partial<Session>,\r\n    userId: string\r\n  ): Promise<Session> {\r\n    const session = {\r\n      ...sessionData,\r\n      user_id: userId, // Ensure user_id is included\r\n    };\r\n\r\n    const response = await fetch(`${this.getBaseUrl()}/sessions/`, {\r\n      method: \"POST\",\r\n      headers: this.getHeaders(),\r\n      body: JSON.stringify(session),\r\n    });\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to create session\");\r\n    return data.data;\r\n  }\r\n\r\n  async updateSession(\r\n    sessionId: number,\r\n    sessionData: Partial<Session>,\r\n    userId: string\r\n  ): Promise<Session> {\r\n    const session = {\r\n      ...sessionData,\r\n      id: sessionId,\r\n      user_id: userId, // Ensure user_id is included\r\n    };\r\n\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/${sessionId}?user_id=${userId}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(session),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to update session\");\r\n    return data.data;\r\n  }\r\n\r\n  // session runs with messages\r\n  async getSessionRuns(\r\n    sessionId: number,\r\n    userId: string\r\n  ): Promise<SessionRuns> {\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/${sessionId}/runs?user_id=${userId}`,\r\n      {\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to fetch session runs\");\r\n    return data.data; // Returns { runs: RunMessage[] }\r\n  }\r\n\r\n  async deleteSession(sessionId: number, userId: string): Promise<void> {\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/${sessionId}?user_id=${userId}`,\r\n      {\r\n        method: \"DELETE\",\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to delete session\");\r\n  }\r\n\r\n  // Adding messages endpoint\r\n  async listSessionMessages(sessionId: number, userId: string): Promise<any[]> {\r\n    // Replace 'any' with proper message type\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/sessions/${sessionId}/messages?user_id=${userId}`,\r\n      {\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to fetch messages\");\r\n    return data.data;\r\n  }\r\n\r\n  // New method to create a run\r\n  async createRun(sessionId: number, userId: string): Promise<number> {\r\n    const payload = { session_id: sessionId, user_id: userId };\r\n    const response = await fetch(`${this.getBaseUrl()}/runs/`, {\r\n      method: \"POST\",\r\n      headers: this.getHeaders(),\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await response.json();\r\n    if (!data.status) throw new Error(data.message || \"Failed to create run\");\r\n    return data.data.run_id;\r\n  }\r\n}\r\n\r\nexport const sessionAPI = new SessionAPI();\r\n","import { Settings } from \"../../types/datamodel\";\r\nimport { BaseAPI } from \"../../utils/baseapi\";\r\n\r\nexport class SettingsAPI extends BaseAPI {\r\n  async getSettings(userId: string): Promise<Settings> {\r\n    const response = await fetch(\r\n      `${this.getBaseUrl()}/settings/?user_id=${userId}`,\r\n      {\r\n        headers: this.getHeaders(),\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to fetch settings\");\r\n    return data.data;\r\n  }\r\n\r\n  async updateSettings(settings: Settings, userId: string): Promise<Settings> {\r\n    const settingsData = {\r\n      ...settings,\r\n      user_id: settings.user_id || userId,\r\n    };\r\n\r\n    console.log(\"settingsData\", settingsData);\r\n\r\n    const response = await fetch(`${this.getBaseUrl()}/settings/`, {\r\n      method: \"PUT\",\r\n      headers: this.getHeaders(),\r\n      body: JSON.stringify(settingsData),\r\n    });\r\n    const data = await response.json();\r\n    if (!data.status)\r\n      throw new Error(data.message || \"Failed to update settings\");\r\n    return data.data;\r\n  }\r\n}\r\n\r\nexport const settingsAPI = new SettingsAPI();\r\n","let barycenter = require(\"./barycenter\");\nlet resolveConflicts = require(\"./resolve-conflicts\");\nlet sort = require(\"./sort\");\n\nmodule.exports = sortSubgraph;\n\nfunction sortSubgraph(g, v, cg, biasRight) {\n  let movable = g.children(v);\n  let node = g.node(v);\n  let bl = node ? node.borderLeft : undefined;\n  let br = node ? node.borderRight: undefined;\n  let subgraphs = {};\n\n  if (bl) {\n    movable = movable.filter(w => w !== bl && w !== br);\n  }\n\n  let barycenters = barycenter(g, movable);\n  barycenters.forEach(entry => {\n    if (g.children(entry.v).length) {\n      let subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\n      subgraphs[entry.v] = subgraphResult;\n      if (Object.hasOwn(subgraphResult, \"barycenter\")) {\n        mergeBarycenters(entry, subgraphResult);\n      }\n    }\n  });\n\n  let entries = resolveConflicts(barycenters, cg);\n  expandSubgraphs(entries, subgraphs);\n\n  let result = sort(entries, biasRight);\n\n  if (bl) {\n    result.vs = [bl, result.vs, br].flat(true);\n    if (g.predecessors(bl).length) {\n      let blPred = g.node(g.predecessors(bl)[0]),\n        brPred = g.node(g.predecessors(br)[0]);\n      if (!Object.hasOwn(result, \"barycenter\")) {\n        result.barycenter = 0;\n        result.weight = 0;\n      }\n      result.barycenter = (result.barycenter * result.weight +\n                           blPred.order + brPred.order) / (result.weight + 2);\n      result.weight += 2;\n    }\n  }\n\n  return result;\n}\n\nfunction expandSubgraphs(entries, subgraphs) {\n  entries.forEach(entry => {\n    entry.vs = entry.vs.flatMap(v => {\n      if (subgraphs[v]) {\n        return subgraphs[v].vs;\n      }\n      return v;\n    });\n  });\n}\n\nfunction mergeBarycenters(target, other) {\n  if (target.barycenter !== undefined) {\n    target.barycenter = (target.barycenter * target.weight +\n                         other.barycenter * other.weight) /\n                        (target.weight + other.weight);\n    target.weight += other.weight;\n  } else {\n    target.barycenter = other.barycenter;\n    target.weight = other.weight;\n  }\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"RefreshCcw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","module.exports = \"1.1.4\";\n","var Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  g.nodes().forEach(function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (Object.hasOwn(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"Map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","module.exports = '2.2.4';\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst History = createLucideIcon(\"History\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M12 7v5l4 2\", key: \"1fdv2h\" }]\n]);\n\nexport { History as default };\n//# sourceMappingURL=history.js.map\n","\"use strict\";\n\nlet util = require(\"./util\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\n/*\n * Breaks any long edges in the graph into short segments that span 1 layer\n * each. This operation is undoable with the denormalize function.\n *\n * Pre-conditions:\n *\n *    1. The input graph is a DAG.\n *    2. Each node in the graph has a \"rank\" property.\n *\n * Post-condition:\n *\n *    1. All edges in the graph have a length of 1.\n *    2. Dummy nodes are added where edges have been split into segments.\n *    3. The graph is augmented with a \"dummyChains\" attribute which contains\n *       the first dummy in each chain of dummy nodes produced.\n */\nfunction run(g) {\n  g.graph().dummyChains = [];\n  g.edges().forEach(edge => normalizeEdge(g, edge));\n}\n\nfunction normalizeEdge(g, e) {\n  let v = e.v;\n  let vRank = g.node(v).rank;\n  let w = e.w;\n  let wRank = g.node(w).rank;\n  let name = e.name;\n  let edgeLabel = g.edge(e);\n  let labelRank = edgeLabel.labelRank;\n\n  if (wRank === vRank + 1) return;\n\n  g.removeEdge(e);\n\n  let dummy, attrs, i;\n  for (i = 0, ++vRank; vRank < wRank; ++i, ++vRank) {\n    edgeLabel.points = [];\n    attrs = {\n      width: 0, height: 0,\n      edgeLabel: edgeLabel, edgeObj: e,\n      rank: vRank\n    };\n    dummy = util.addDummyNode(g, \"edge\", attrs, \"_d\");\n    if (vRank === labelRank) {\n      attrs.width = edgeLabel.width;\n      attrs.height = edgeLabel.height;\n      attrs.dummy = \"edge-label\";\n      attrs.labelpos = edgeLabel.labelpos;\n    }\n    g.setEdge(v, dummy, { weight: edgeLabel.weight }, name);\n    if (i === 0) {\n      g.graph().dummyChains.push(dummy);\n    }\n    v = dummy;\n  }\n\n  g.setEdge(v, w, { weight: edgeLabel.weight }, name);\n}\n\nfunction undo(g) {\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let origLabel = node.edgeLabel;\n    let w;\n    g.setEdge(node.edgeObj, origLabel);\n    while (node.dummy) {\n      w = g.successors(v)[0];\n      g.removeNode(v);\n      origLabel.points.push({ x: node.x, y: node.y });\n      if (node.dummy === \"edge-label\") {\n        origLabel.x = node.x;\n        origLabel.y = node.y;\n        origLabel.width = node.width;\n        origLabel.height = node.height;\n      }\n      v = w;\n      node = g.node(v);\n    }\n  });\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Grid3x3 = createLucideIcon(\"Grid3x3\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M3 9h18\", key: \"1pudct\" }],\n  [\"path\", { d: \"M3 15h18\", key: \"5xshup\" }],\n  [\"path\", { d: \"M9 3v18\", key: \"fh3hqa\" }],\n  [\"path\", { d: \"M15 3v18\", key: \"14nvp0\" }]\n]);\n\nexport { Grid3x3 as default };\n//# sourceMappingURL=grid-3x3.js.map\n","import * as React from \"react\";\nfunction ExclamationTriangleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ExclamationTriangleIcon);\nexport default ForwardRef;","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/*\nCopyright (c) 2012-2014 Chris Pettitt\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\nmodule.exports = {\n  graphlib: require(\"@dagrejs/graphlib\"),\n\n  layout: require(\"./lib/layout\"),\n  debug: require(\"./lib/debug\"),\n  util: {\n    time: require(\"./lib/util\").time,\n    notime: require(\"./lib/util\").notime\n  },\n  version: require(\"./lib/version\")\n};\n","export default __webpack_public_path__ + \"static/welcome-eb6c9c3c9d3b4710ff4a6026a37c39ce.svg\";","let util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  debugOrdering: debugOrdering\n};\n\n/* istanbul ignore next */\nfunction debugOrdering(g) {\n  let layerMatrix = util.buildLayerMatrix(g);\n\n  let h = new Graph({ compound: true, multigraph: true }).setGraph({});\n\n  g.nodes().forEach(v => {\n    h.setNode(v, { label: v });\n    h.setParent(v, \"layer\" + g.node(v).rank);\n  });\n\n  g.edges().forEach(e => h.setEdge(e.v, e.w, {}, e.name));\n\n  layerMatrix.forEach((layer, i) => {\n    let layerV = \"layer\" + i;\n    h.setNode(layerV, { rank: \"same\" });\n    layer.reduce((u, v) => {\n      h.setEdge(u, v, { style: \"invis\" });\n      return v;\n    });\n  });\n\n  return h;\n}\n","var Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\n/**\n * Creates a JSON representation of the graph that can be serialized to a string with\n * JSON.stringify. The graph can later be restored using json.read.\n */\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n\n  if (g.graph() !== undefined) {\n    json.value = structuredClone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return g.nodes().map(function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (nodeValue !== undefined) {\n      node.value = nodeValue;\n    }\n    if (parent !== undefined) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return g.edges().map(function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (e.name !== undefined) {\n      edge.name = e.name;\n    }\n    if (edgeValue !== undefined) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\n/**\n * Takes JSON as input and returns the graph representation.\n *\n * @example\n * var g2 = graphlib.json.read(JSON.parse(str));\n * g2.nodes();\n * // ['a', 'b']\n * g2.edges()\n * // [ { v: 'a', w: 'b' } ]\n */\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  json.nodes.forEach(function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  json.edges.forEach(function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n","module.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!Object.hasOwn(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!Object.hasOwn(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n","var PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n","\"use strict\";\n\nlet initOrder = require(\"./init-order\");\nlet crossCount = require(\"./cross-count\");\nlet sortSubgraph = require(\"./sort-subgraph\");\nlet buildLayerGraph = require(\"./build-layer-graph\");\nlet addSubgraphConstraints = require(\"./add-subgraph-constraints\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = order;\n\n/*\n * Applies heuristics to minimize edge crossings in the graph and sets the best\n * order solution as an order attribute on each node.\n *\n * Pre-conditions:\n *\n *    1. Graph must be DAG\n *    2. Graph nodes must be objects with a \"rank\" attribute\n *    3. Graph edges must have the \"weight\" attribute\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have an \"order\" attribute based on the results of the\n *       algorithm.\n */\nfunction order(g, opts) {\n  if (opts && typeof opts.customOrder === 'function') {\n    opts.customOrder(g, order);\n    return;\n  }\n\n  let maxRank = util.maxRank(g),\n    downLayerGraphs = buildLayerGraphs(g, util.range(1, maxRank + 1), \"inEdges\"),\n    upLayerGraphs = buildLayerGraphs(g, util.range(maxRank - 1, -1, -1), \"outEdges\");\n\n  let layering = initOrder(g);\n  assignOrder(g, layering);\n\n  if (opts && opts.disableOptimalOrderHeuristic) {\n    return;\n  }\n\n  let bestCC = Number.POSITIVE_INFINITY,\n    best;\n\n  for (let i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n    sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2);\n\n    layering = util.buildLayerMatrix(g);\n    let cc = crossCount(g, layering);\n    if (cc < bestCC) {\n      lastBest = 0;\n      best = Object.assign({}, layering);\n      bestCC = cc;\n    }\n  }\n\n  assignOrder(g, best);\n}\n\nfunction buildLayerGraphs(g, ranks, relationship) {\n  return ranks.map(function(rank) {\n    return buildLayerGraph(g, rank, relationship);\n  });\n}\n\nfunction sweepLayerGraphs(layerGraphs, biasRight) {\n  let cg = new Graph();\n  layerGraphs.forEach(function(lg) {\n    let root = lg.graph().root;\n    let sorted = sortSubgraph(lg, root, cg, biasRight);\n    sorted.vs.forEach((v, i) => lg.node(v).order = i);\n    addSubgraphConstraints(lg, cg, sorted.vs);\n  });\n}\n\nfunction assignOrder(g, layering) {\n  Object.values(layering).forEach(layer => layer.forEach((v, i) => g.node(v).order = i));\n}\n","module.exports = parentDummyChains;\n\nfunction parentDummyChains(g) {\n  let postorderNums = postorder(g);\n\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let edgeObj = node.edgeObj;\n    let pathData = findPath(g, postorderNums, edgeObj.v, edgeObj.w);\n    let path = pathData.path;\n    let lca = pathData.lca;\n    let pathIdx = 0;\n    let pathV = path[pathIdx];\n    let ascending = true;\n\n    while (v !== edgeObj.w) {\n      node = g.node(v);\n\n      if (ascending) {\n        while ((pathV = path[pathIdx]) !== lca &&\n               g.node(pathV).maxRank < node.rank) {\n          pathIdx++;\n        }\n\n        if (pathV === lca) {\n          ascending = false;\n        }\n      }\n\n      if (!ascending) {\n        while (pathIdx < path.length - 1 &&\n               g.node(pathV = path[pathIdx + 1]).minRank <= node.rank) {\n          pathIdx++;\n        }\n        pathV = path[pathIdx];\n      }\n\n      g.setParent(v, pathV);\n      v = g.successors(v)[0];\n    }\n  });\n}\n\n// Find a path from v to w through the lowest common ancestor (LCA). Return the\n// full path and the LCA.\nfunction findPath(g, postorderNums, v, w) {\n  let vPath = [];\n  let wPath = [];\n  let low = Math.min(postorderNums[v].low, postorderNums[w].low);\n  let lim = Math.max(postorderNums[v].lim, postorderNums[w].lim);\n  let parent;\n  let lca;\n\n  // Traverse up from v to find the LCA\n  parent = v;\n  do {\n    parent = g.parent(parent);\n    vPath.push(parent);\n  } while (parent &&\n           (postorderNums[parent].low > low || lim > postorderNums[parent].lim));\n  lca = parent;\n\n  // Traverse from w to LCA\n  parent = w;\n  while ((parent = g.parent(parent)) !== lca) {\n    wPath.push(parent);\n  }\n\n  return { path: vPath.concat(wPath.reverse()), lca: lca };\n}\n\nfunction postorder(g) {\n  let result = {};\n  let lim = 0;\n\n  function dfs(v) {\n    let low = lim;\n    g.children(v).forEach(dfs);\n    result[v] = { low: low, lim: lim++ };\n  }\n  g.children().forEach(dfs);\n\n  return result;\n}\n","/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nclass PriorityQueue {\n  _arr = [];\n  _keyIndices = {};\n\n  /**\n   * Returns the number of elements in the queue. Takes `O(1)` time.\n   */\n  size() {\n    return this._arr.length;\n  }\n\n  /**\n   * Returns the keys that are in the queue. Takes `O(n)` time.\n   */\n  keys() {\n    return this._arr.map(function(x) { return x.key; });\n  }\n\n  /**\n   * Returns `true` if **key** is in the queue and `false` if not.\n   */\n  has(key) {\n    return Object.hasOwn(this._keyIndices, key);\n  }\n\n  /**\n   * Returns the priority for **key**. If **key** is not present in the queue\n   * then this function returns `undefined`. Takes `O(1)` time.\n   *\n   * @param {Object} key\n   */\n  priority(key) {\n    var index = this._keyIndices[key];\n    if (index !== undefined) {\n      return this._arr[index].priority;\n    }\n  }\n\n  /**\n   * Returns the key for the minimum element in this queue. If the queue is\n   * empty this function throws an Error. Takes `O(1)` time.\n   */\n  min() {\n    if (this.size() === 0) {\n      throw new Error(\"Queue underflow\");\n    }\n    return this._arr[0].key;\n  }\n\n  /**\n   * Inserts a new key into the priority queue. If the key already exists in\n   * the queue this function returns `false`; otherwise it will return `true`.\n   * Takes `O(n)` time.\n   *\n   * @param {Object} key the key to add\n   * @param {Number} priority the initial priority for the key\n   */\n  add(key, priority) {\n    var keyIndices = this._keyIndices;\n    key = String(key);\n    if (!Object.hasOwn(keyIndices, key)) {\n      var arr = this._arr;\n      var index = arr.length;\n      keyIndices[key] = index;\n      arr.push({key: key, priority: priority});\n      this._decrease(index);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n   */\n  removeMin() {\n    this._swap(0, this._arr.length - 1);\n    var min = this._arr.pop();\n    delete this._keyIndices[min.key];\n    this._heapify(0);\n    return min.key;\n  }\n\n  /**\n   * Decreases the priority for **key** to **priority**. If the new priority is\n   * greater than the previous priority, this function will throw an Error.\n   *\n   * @param {Object} key the key for which to raise priority\n   * @param {Number} priority the new priority for the key\n   */\n  decrease(key, priority) {\n    var index = this._keyIndices[key];\n    if (priority > this._arr[index].priority) {\n      throw new Error(\"New priority is greater than current priority. \" +\n          \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n    }\n    this._arr[index].priority = priority;\n    this._decrease(index);\n  }\n\n  _heapify(i) {\n    var arr = this._arr;\n    var l = 2 * i;\n    var r = l + 1;\n    var largest = i;\n    if (l < arr.length) {\n      largest = arr[l].priority < arr[largest].priority ? l : largest;\n      if (r < arr.length) {\n        largest = arr[r].priority < arr[largest].priority ? r : largest;\n      }\n      if (largest !== i) {\n        this._swap(i, largest);\n        this._heapify(largest);\n      }\n    }\n  }\n\n  _decrease(index) {\n    var arr = this._arr;\n    var priority = arr[index].priority;\n    var parent;\n    while (index !== 0) {\n      parent = index >> 1;\n      if (arr[parent].priority < priority) {\n        break;\n      }\n      this._swap(index, parent);\n      index = parent;\n    }\n  }\n\n  _swap(i, j) {\n    var arr = this._arr;\n    var keyIndices = this._keyIndices;\n    var origArrI = arr[i];\n    var origArrJ = arr[j];\n    arr[i] = origArrJ;\n    arr[j] = origArrI;\n    keyIndices[origArrJ.key] = i;\n    keyIndices[origArrI.key] = j;\n  }\n}\n\nmodule.exports = PriorityQueue;\n","let util = require(\"./util\");\n\nmodule.exports = {\n  run,\n  cleanup,\n};\n\n/*\n * A nesting graph creates dummy nodes for the tops and bottoms of subgraphs,\n * adds appropriate edges to ensure that all cluster nodes are placed between\n * these boundaries, and ensures that the graph is connected.\n *\n * In addition we ensure, through the use of the minlen property, that nodes\n * and subgraph border nodes to not end up on the same rank.\n *\n * Preconditions:\n *\n *    1. Input graph is a DAG\n *    2. Nodes in the input graph has a minlen attribute\n *\n * Postconditions:\n *\n *    1. Input graph is connected.\n *    2. Dummy nodes are added for the tops and bottoms of subgraphs.\n *    3. The minlen attribute for nodes is adjusted to ensure nodes do not\n *       get placed on the same rank as subgraph border nodes.\n *\n * The nesting graph idea comes from Sander, \"Layout of Compound Directed\n * Graphs.\"\n */\nfunction run(g) {\n  let root = util.addDummyNode(g, \"root\", {}, \"_root\");\n  let depths = treeDepths(g);\n  let depthsArr = Object.values(depths);\n  let height = util.applyWithChunking(Math.max, depthsArr) - 1; // Note: depths is an Object not an array\n  let nodeSep = 2 * height + 1;\n\n  g.graph().nestingRoot = root;\n\n  // Multiply minlen by nodeSep to align nodes on non-border ranks.\n  g.edges().forEach(e => g.edge(e).minlen *= nodeSep);\n\n  // Calculate a weight that is sufficient to keep subgraphs vertically compact\n  let weight = sumWeights(g) + 1;\n\n  // Create border nodes and link them up\n  g.children().forEach(child => dfs(g, root, nodeSep, weight, height, depths, child));\n\n  // Save the multiplier for node layers for later removal of empty border\n  // layers.\n  g.graph().nodeRankFactor = nodeSep;\n}\n\nfunction dfs(g, root, nodeSep, weight, height, depths, v) {\n  let children = g.children(v);\n  if (!children.length) {\n    if (v !== root) {\n      g.setEdge(root, v, { weight: 0, minlen: nodeSep });\n    }\n    return;\n  }\n\n  let top = util.addBorderNode(g, \"_bt\");\n  let bottom = util.addBorderNode(g, \"_bb\");\n  let label = g.node(v);\n\n  g.setParent(top, v);\n  label.borderTop = top;\n  g.setParent(bottom, v);\n  label.borderBottom = bottom;\n\n  children.forEach(child => {\n    dfs(g, root, nodeSep, weight, height, depths, child);\n\n    let childNode = g.node(child);\n    let childTop = childNode.borderTop ? childNode.borderTop : child;\n    let childBottom = childNode.borderBottom ? childNode.borderBottom : child;\n    let thisWeight = childNode.borderTop ? weight : 2 * weight;\n    let minlen = childTop !== childBottom ? 1 : height - depths[v] + 1;\n\n    g.setEdge(top, childTop, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n\n    g.setEdge(childBottom, bottom, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n  });\n\n  if (!g.parent(v)) {\n    g.setEdge(root, top, { weight: 0, minlen: height + depths[v] });\n  }\n}\n\nfunction treeDepths(g) {\n  var depths = {};\n  function dfs(v, depth) {\n    var children = g.children(v);\n    if (children && children.length) {\n      children.forEach(child => dfs(child, depth + 1));\n    }\n    depths[v] = depth;\n  }\n  g.children().forEach(v => dfs(v, 1));\n  return depths;\n}\n\nfunction sumWeights(g) {\n  return g.edges().reduce((acc, e) => acc + g.edge(e).weight, 0);\n}\n\nfunction cleanup(g) {\n  var graphLabel = g.graph();\n  g.removeNode(graphLabel.nestingRoot);\n  delete graphLabel.nestingRoot;\n  g.edges().forEach(e => {\n    var edge = g.edge(e);\n    if (edge.nestingEdge) {\n      g.removeEdge(e);\n    }\n  });\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TextSearch = createLucideIcon(\"TextSearch\", [\n  [\"path\", { d: \"M21 6H3\", key: \"1jwq7v\" }],\n  [\"path\", { d: \"M10 12H3\", key: \"1ulcyk\" }],\n  [\"path\", { d: \"M10 18H3\", key: \"13769t\" }],\n  [\"circle\", { cx: \"17\", cy: \"15\", r: \"3\", key: \"1upz2a\" }],\n  [\"path\", { d: \"m21 19-1.9-1.9\", key: \"dwi7p8\" }]\n]);\n\nexport { TextSearch as default };\n//# sourceMappingURL=text-search.js.map\n","let util = require(\"../util\");\n\nmodule.exports = sort;\n\nfunction sort(entries, biasRight) {\n  let parts = util.partition(entries, entry => {\n    return Object.hasOwn(entry, \"barycenter\");\n  });\n  let sortable = parts.lhs,\n    unsortable = parts.rhs.sort((a, b) => b.i - a.i),\n    vs = [],\n    sum = 0,\n    weight = 0,\n    vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  sortable.forEach(entry => {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  let result = { vs: vs.flat(true) };\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  let last;\n  while (unsortable.length && (last = unsortable[unsortable.length - 1]).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return (entryV, entryW) => {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\nlet positionX = require(\"./bk\").positionX;\n\nmodule.exports = position;\n\nfunction position(g) {\n  g = util.asNonCompoundGraph(g);\n\n  positionY(g);\n  Object.entries(positionX(g)).forEach(([v, x]) => g.node(v).x = x);\n}\n\nfunction positionY(g) {\n  let layering = util.buildLayerMatrix(g);\n  let rankSep = g.graph().ranksep;\n  let prevY = 0;\n  layering.forEach(layer => {\n    const maxHeight = layer.reduce((acc, v) => {\n      const height = g.node(v).height;\n      if (acc > height) {\n        return acc;\n      } else {\n        return height;\n      }\n    }, 0);\n    layer.forEach(v => g.node(v).y = prevY + maxHeight / 2);\n    prevY += maxHeight + rankSep;\n  });\n}\n\n","\"use strict\";\n\nlet zipObject = require(\"../util\").zipObject;\n\nmodule.exports = crossCount;\n\n/*\n * A function that takes a layering (an array of layers, each with an array of\n * ordererd nodes) and a graph and returns a weighted crossing count.\n *\n * Pre-conditions:\n *\n *    1. Input graph must be simple (not a multigraph), directed, and include\n *       only simple edges.\n *    2. Edges in the input graph must have assigned weights.\n *\n * Post-conditions:\n *\n *    1. The graph and layering matrix are left unchanged.\n *\n * This algorithm is derived from Barth, et al., \"Bilayer Cross Counting.\"\n */\nfunction crossCount(g, layering) {\n  let cc = 0;\n  for (let i = 1; i < layering.length; ++i) {\n    cc += twoLayerCrossCount(g, layering[i-1], layering[i]);\n  }\n  return cc;\n}\n\nfunction twoLayerCrossCount(g, northLayer, southLayer) {\n  // Sort all of the edges between the north and south layers by their position\n  // in the north layer and then the south. Map these edges to the position of\n  // their head in the south layer.\n  let southPos = zipObject(southLayer, southLayer.map((v, i) => i));\n  let southEntries = northLayer.flatMap(v => {\n    return g.outEdges(v).map(e => {\n      return { pos: southPos[e.w], weight: g.edge(e).weight };\n    }).sort((a, b) => a.pos - b.pos);\n  });\n\n  // Build the accumulator tree\n  let firstIndex = 1;\n  while (firstIndex < southLayer.length) firstIndex <<= 1;\n  let treeSize = 2 * firstIndex - 1;\n  firstIndex -= 1;\n  let tree = new Array(treeSize).fill(0);\n\n  // Calculate the weighted crossings\n  let cc = 0;\n  southEntries.forEach(entry => {\n    let index = entry.pos + firstIndex;\n    tree[index] += entry.weight;\n    let weightSum = 0;\n    while (index > 0) {\n      if (index % 2) {\n        weightSum += tree[index + 1];\n      }\n      index = (index - 1) >> 1;\n      tree[index] += entry.weight;\n    }\n    cc += entry.weight * weightSum;\n  });\n\n  return cc;\n}\n","var dijkstra = require(\"./dijkstra\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return g.nodes().reduce(function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n    return acc;\n  }, {});\n}\n","let util = require(\"./util\");\n\nmodule.exports = addBorderSegments;\n\nfunction addBorderSegments(g) {\n  function dfs(v) {\n    let children = g.children(v);\n    let node = g.node(v);\n    if (children.length) {\n      children.forEach(dfs);\n    }\n\n    if (Object.hasOwn(node, \"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n      for (let rank = node.minRank, maxRank = node.maxRank + 1;\n        rank < maxRank;\n        ++rank) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  }\n\n  g.children().forEach(dfs);\n}\n\nfunction addBorderNode(g, prop, prefix, sg, sgNode, rank) {\n  let label = { width: 0, height: 0, rank: rank, borderType: prop };\n  let prev = sgNode[prop][rank - 1];\n  let curr = util.addDummyNode(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n  if (prev) {\n    g.setEdge(prev, curr, { weight: 1 });\n  }\n}\n","\"use strict\";\n\nvar feasibleTree = require(\"./feasible-tree\");\nvar slack = require(\"./util\").slack;\nvar initRank = require(\"./util\").longestPath;\nvar preorder = require(\"@dagrejs/graphlib\").alg.preorder;\nvar postorder = require(\"@dagrejs/graphlib\").alg.postorder;\nvar simplify = require(\"../util\").simplify;\n\nmodule.exports = networkSimplex;\n\n// Expose some internals for testing purposes\nnetworkSimplex.initLowLimValues = initLowLimValues;\nnetworkSimplex.initCutValues = initCutValues;\nnetworkSimplex.calcCutValue = calcCutValue;\nnetworkSimplex.leaveEdge = leaveEdge;\nnetworkSimplex.enterEdge = enterEdge;\nnetworkSimplex.exchangeEdges = exchangeEdges;\n\n/*\n * The network simplex algorithm assigns ranks to each node in the input graph\n * and iteratively improves the ranking to reduce the length of edges.\n *\n * Preconditions:\n *\n *    1. The input graph must be a DAG.\n *    2. All nodes in the graph must have an object value.\n *    3. All edges in the graph must have \"minlen\" and \"weight\" attributes.\n *\n * Postconditions:\n *\n *    1. All nodes in the graph will have an assigned \"rank\" attribute that has\n *       been optimized by the network simplex algorithm. Ranks start at 0.\n *\n *\n * A rough sketch of the algorithm is as follows:\n *\n *    1. Assign initial ranks to each node. We use the longest path algorithm,\n *       which assigns ranks to the lowest position possible. In general this\n *       leads to very wide bottom ranks and unnecessarily long edges.\n *    2. Construct a feasible tight tree. A tight tree is one such that all\n *       edges in the tree have no slack (difference between length of edge\n *       and minlen for the edge). This by itself greatly improves the assigned\n *       rankings by shorting edges.\n *    3. Iteratively find edges that have negative cut values. Generally a\n *       negative cut value indicates that the edge could be removed and a new\n *       tree edge could be added to produce a more compact graph.\n *\n * Much of the algorithms here are derived from Gansner, et al., \"A Technique\n * for Drawing Directed Graphs.\" The structure of the file roughly follows the\n * structure of the overall algorithm.\n */\nfunction networkSimplex(g) {\n  g = simplify(g);\n  initRank(g);\n  var t = feasibleTree(g);\n  initLowLimValues(t);\n  initCutValues(t, g);\n\n  var e, f;\n  while ((e = leaveEdge(t))) {\n    f = enterEdge(t, g, e);\n    exchangeEdges(t, g, e, f);\n  }\n}\n\n/*\n * Initializes cut values for all edges in the tree.\n */\nfunction initCutValues(t, g) {\n  var vs = postorder(t, t.nodes());\n  vs = vs.slice(0, vs.length - 1);\n  vs.forEach(v => assignCutValue(t, g, v));\n}\n\nfunction assignCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  t.edge(child, parent).cutvalue = calcCutValue(t, g, child);\n}\n\n/*\n * Given the tight tree, its graph, and a child in the graph calculate and\n * return the cut value for the edge between the child and its parent.\n */\nfunction calcCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  // True if the child is on the tail end of the edge in the directed graph\n  var childIsTail = true;\n  // The graph's view of the tree edge we're inspecting\n  var graphEdge = g.edge(child, parent);\n  // The accumulated cut value for the edge between this node and its parent\n  var cutValue = 0;\n\n  if (!graphEdge) {\n    childIsTail = false;\n    graphEdge = g.edge(parent, child);\n  }\n\n  cutValue = graphEdge.weight;\n\n  g.nodeEdges(child).forEach(e => {\n    var isOutEdge = e.v === child,\n      other = isOutEdge ? e.w : e.v;\n\n    if (other !== parent) {\n      var pointsToHead = isOutEdge === childIsTail,\n        otherWeight = g.edge(e).weight;\n\n      cutValue += pointsToHead ? otherWeight : -otherWeight;\n      if (isTreeEdge(t, child, other)) {\n        var otherCutValue = t.edge(child, other).cutvalue;\n        cutValue += pointsToHead ? -otherCutValue : otherCutValue;\n      }\n    }\n  });\n\n  return cutValue;\n}\n\nfunction initLowLimValues(tree, root) {\n  if (arguments.length < 2) {\n    root = tree.nodes()[0];\n  }\n  dfsAssignLowLim(tree, {}, 1, root);\n}\n\nfunction dfsAssignLowLim(tree, visited, nextLim, v, parent) {\n  var low = nextLim;\n  var label = tree.node(v);\n\n  visited[v] = true;\n  tree.neighbors(v).forEach(w => {\n    if (!Object.hasOwn(visited, w)) {\n      nextLim = dfsAssignLowLim(tree, visited, nextLim, w, v);\n    }\n  });\n\n  label.low = low;\n  label.lim = nextLim++;\n  if (parent) {\n    label.parent = parent;\n  } else {\n    // TODO should be able to remove this when we incrementally update low lim\n    delete label.parent;\n  }\n\n  return nextLim;\n}\n\nfunction leaveEdge(tree) {\n  return tree.edges().find(e => tree.edge(e).cutvalue < 0);\n}\n\nfunction enterEdge(t, g, edge) {\n  var v = edge.v;\n  var w = edge.w;\n\n  // For the rest of this function we assume that v is the tail and w is the\n  // head, so if we don't have this edge in the graph we should flip it to\n  // match the correct orientation.\n  if (!g.hasEdge(v, w)) {\n    v = edge.w;\n    w = edge.v;\n  }\n\n  var vLabel = t.node(v);\n  var wLabel = t.node(w);\n  var tailLabel = vLabel;\n  var flip = false;\n\n  // If the root is in the tail of the edge then we need to flip the logic that\n  // checks for the head and tail nodes in the candidates function below.\n  if (vLabel.lim > wLabel.lim) {\n    tailLabel = wLabel;\n    flip = true;\n  }\n\n  var candidates = g.edges().filter(edge => {\n    return flip === isDescendant(t, t.node(edge.v), tailLabel) &&\n           flip !== isDescendant(t, t.node(edge.w), tailLabel);\n  });\n\n  return candidates.reduce((acc, edge) => {\n    if (slack(g, edge) < slack(g, acc)) {\n      return edge;\n    }\n\n    return acc;\n  });\n}\n\nfunction exchangeEdges(t, g, e, f) {\n  var v = e.v;\n  var w = e.w;\n  t.removeEdge(v, w);\n  t.setEdge(f.v, f.w, {});\n  initLowLimValues(t);\n  initCutValues(t, g);\n  updateRanks(t, g);\n}\n\nfunction updateRanks(t, g) {\n  var root = t.nodes().find(v => !g.node(v).parent);\n  var vs = preorder(t, root);\n  vs = vs.slice(1);\n  vs.forEach(v => {\n    var parent = t.node(v).parent,\n      edge = g.edge(v, parent),\n      flipped = false;\n\n    if (!edge) {\n      edge = g.edge(parent, v);\n      flipped = true;\n    }\n\n    g.node(v).rank = g.node(parent).rank + (flipped ? edge.minlen : -edge.minlen);\n  });\n}\n\n/*\n * Returns true if the edge is in the tree.\n */\nfunction isTreeEdge(tree, u, v) {\n  return tree.hasEdge(u, v);\n}\n\n/*\n * Returns true if the specified node is descendant of the root node per the\n * assigned low and lim attributes in the tree.\n */\nfunction isDescendant(tree, vLabel, rootLabel) {\n  return rootLabel.low <= vLabel.lim && vLabel.lim <= rootLabel.lim;\n}\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = buildLayerGraph;\n\n/*\n * Constructs a graph that can be used to sort a layer of nodes. The graph will\n * contain all base and subgraph nodes from the request layer in their original\n * hierarchy and any edges that are incident on these nodes and are of the type\n * requested by the \"relationship\" parameter.\n *\n * Nodes from the requested rank that do not have parents are assigned a root\n * node in the output graph, which is set in the root graph attribute. This\n * makes it easy to walk the hierarchy of movable nodes during ordering.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG\n *    2. Base nodes in the input graph have a rank attribute\n *    3. Subgraph nodes in the input graph has minRank and maxRank attributes\n *    4. Edges have an assigned weight\n *\n * Post-conditions:\n *\n *    1. Output graph has all nodes in the movable rank with preserved\n *       hierarchy.\n *    2. Root nodes in the movable layer are made children of the node\n *       indicated by the root attribute of the graph.\n *    3. Non-movable nodes incident on movable nodes, selected by the\n *       relationship parameter, are included in the graph (without hierarchy).\n *    4. Edges incident on movable nodes, selected by the relationship\n *       parameter, are added to the output graph.\n *    5. The weights for copied edges are aggregated as need, since the output\n *       graph is not a multi-graph.\n */\nfunction buildLayerGraph(g, rank, relationship) {\n  let root = createRootNode(g),\n    result = new Graph({ compound: true }).setGraph({ root: root })\n      .setDefaultNodeLabel(v => g.node(v));\n\n  g.nodes().forEach(v => {\n    let node = g.node(v),\n      parent = g.parent(v);\n\n    if (node.rank === rank || node.minRank <= rank && rank <= node.maxRank) {\n      result.setNode(v);\n      result.setParent(v, parent || root);\n\n      // This assumes we have only short edges!\n      g[relationship](v).forEach(e => {\n        let u = e.v === v ? e.w : e.v,\n          edge = result.edge(u, v),\n          weight = edge !== undefined ? edge.weight : 0;\n        result.setEdge(u, v, { weight: g.edge(e).weight + weight });\n      });\n\n      if (Object.hasOwn(node, \"minRank\")) {\n        result.setNode(v, {\n          borderLeft: node.borderLeft[rank],\n          borderRight: node.borderRight[rank]\n        });\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction createRootNode(g) {\n  var v;\n  while (g.hasNode((v = util.uniqueId(\"_root\"))));\n  return v;\n}\n","module.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    g.successors(v).forEach(dfs);\n    g.predecessors(v).forEach(dfs);\n  }\n\n  g.nodes().forEach(function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n","\"use strict\";\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nclass Graph {\n  _isDirected = true;\n  _isMultigraph = false;\n  _isCompound = false;\n\n  // Label for the graph itself\n  _label;\n\n  // Defaults to be set when creating a new node\n  _defaultNodeLabelFn = () => undefined;\n\n  // Defaults to be set when creating a new edge\n  _defaultEdgeLabelFn = () => undefined;\n\n  // v -> label\n  _nodes = {};\n\n  // v -> edgeObj\n  _in = {};\n\n  // u -> v -> Number\n  _preds = {};\n\n  // v -> edgeObj\n  _out = {};\n\n  // v -> w -> Number\n  _sucs = {};\n\n  // e -> edgeObj\n  _edgeObjs = {};\n\n  // e -> label\n  _edgeLabels = {};\n\n  /* Number of nodes in the graph. Should only be changed by the implementation. */\n  _nodeCount = 0;\n\n  /* Number of edges in the graph. Should only be changed by the implementation. */\n  _edgeCount = 0;\n\n  _parent;\n\n  _children;\n\n  constructor(opts) {\n    if (opts) {\n      this._isDirected = Object.hasOwn(opts, \"directed\") ? opts.directed : true;\n      this._isMultigraph = Object.hasOwn(opts, \"multigraph\") ? opts.multigraph : false;\n      this._isCompound = Object.hasOwn(opts, \"compound\") ? opts.compound : false;\n    }\n\n    if (this._isCompound) {\n      // v -> parent\n      this._parent = {};\n\n      // v -> children\n      this._children = {};\n      this._children[GRAPH_NODE] = {};\n    }\n  }\n\n  /* === Graph functions ========= */\n\n  /**\n   * Whether graph was created with 'directed' flag set to true or not.\n   */\n  isDirected() {\n    return this._isDirected;\n  }\n\n  /**\n   * Whether graph was created with 'multigraph' flag set to true or not.\n   */\n  isMultigraph() {\n    return this._isMultigraph;\n  }\n\n  /**\n   * Whether graph was created with 'compound' flag set to true or not.\n   */\n  isCompound() {\n    return this._isCompound;\n  }\n\n  /**\n   * Sets the label of the graph.\n   */\n  setGraph(label) {\n    this._label = label;\n    return this;\n  }\n\n  /**\n   * Gets the graph label.\n   */\n  graph() {\n    return this._label;\n  }\n\n\n  /* === Node functions ========== */\n\n  /**\n   * Sets the default node label. If newDefault is a function, it will be\n   * invoked ach time when setting a label for a node. Otherwise, this label\n   * will be assigned as default label in case if no label was specified while\n   * setting a node.\n   * Complexity: O(1).\n   */\n  setDefaultNodeLabel(newDefault) {\n    this._defaultNodeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultNodeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of nodes in the graph.\n   * Complexity: O(1).\n   */\n  nodeCount() {\n    return this._nodeCount;\n  }\n\n  /**\n   * Gets all nodes of the graph. Note, the in case of compound graph subnodes are\n   * not included in list.\n   * Complexity: O(1).\n   */\n  nodes() {\n    return Object.keys(this._nodes);\n  }\n\n  /**\n   * Gets list of nodes without in-edges.\n   * Complexity: O(|V|).\n   */\n  sources() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._in[v]).length === 0);\n  }\n\n  /**\n   * Gets list of nodes without out-edges.\n   * Complexity: O(|V|).\n   */\n  sinks() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._out[v]).length === 0);\n  }\n\n  /**\n   * Invokes setNode method for each node in names list.\n   * Complexity: O(|names|).\n   */\n  setNodes(vs, value) {\n    var args = arguments;\n    var self = this;\n    vs.forEach(function(v) {\n      if (args.length > 1) {\n        self.setNode(v, value);\n      } else {\n        self.setNode(v);\n      }\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the value for the node v in the graph. If label is supplied\n   * it is set as the value for the node. If label is not supplied and the node was\n   * created by this call then the default node label will be assigned.\n   * Complexity: O(1).\n   */\n  setNode(v, value) {\n    if (Object.hasOwn(this._nodes, v)) {\n      if (arguments.length > 1) {\n        this._nodes[v] = value;\n      }\n      return this;\n    }\n\n    this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n    if (this._isCompound) {\n      this._parent[v] = GRAPH_NODE;\n      this._children[v] = {};\n      this._children[GRAPH_NODE][v] = true;\n    }\n    this._in[v] = {};\n    this._preds[v] = {};\n    this._out[v] = {};\n    this._sucs[v] = {};\n    ++this._nodeCount;\n    return this;\n  }\n\n  /**\n   * Gets the label of node with specified name.\n   * Complexity: O(|V|).\n   */\n  node(v) {\n    return this._nodes[v];\n  }\n\n  /**\n   * Detects whether graph has a node with specified name or not.\n   */\n  hasNode(v) {\n    return Object.hasOwn(this._nodes, v);\n  }\n\n  /**\n   * Remove the node with the name from the graph or do nothing if the node is not in\n   * the graph. If the node was removed this function also removes any incident\n   * edges.\n   * Complexity: O(1).\n   */\n  removeNode(v) {\n    var self = this;\n    if (Object.hasOwn(this._nodes, v)) {\n      var removeEdge = e => self.removeEdge(self._edgeObjs[e]);\n      delete this._nodes[v];\n      if (this._isCompound) {\n        this._removeFromParentsChildList(v);\n        delete this._parent[v];\n        this.children(v).forEach(function(child) {\n          self.setParent(child);\n        });\n        delete this._children[v];\n      }\n      Object.keys(this._in[v]).forEach(removeEdge);\n      delete this._in[v];\n      delete this._preds[v];\n      Object.keys(this._out[v]).forEach(removeEdge);\n      delete this._out[v];\n      delete this._sucs[v];\n      --this._nodeCount;\n    }\n    return this;\n  }\n\n  /**\n   * Sets node p as a parent for node v if it is defined, or removes the\n   * parent for v if p is undefined. Method throws an exception in case of\n   * invoking it in context of noncompound graph.\n   * Average-case complexity: O(1).\n   */\n  setParent(v, parent) {\n    if (!this._isCompound) {\n      throw new Error(\"Cannot set parent in a non-compound graph\");\n    }\n\n    if (parent === undefined) {\n      parent = GRAPH_NODE;\n    } else {\n      // Coerce parent to string\n      parent += \"\";\n      for (var ancestor = parent; ancestor !== undefined; ancestor = this.parent(ancestor)) {\n        if (ancestor === v) {\n          throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n              \" would create a cycle\");\n        }\n      }\n\n      this.setNode(parent);\n    }\n\n    this.setNode(v);\n    this._removeFromParentsChildList(v);\n    this._parent[v] = parent;\n    this._children[parent][v] = true;\n    return this;\n  }\n\n  _removeFromParentsChildList(v) {\n    delete this._children[this._parent[v]][v];\n  }\n\n  /**\n   * Gets parent node for node v.\n   * Complexity: O(1).\n   */\n  parent(v) {\n    if (this._isCompound) {\n      var parent = this._parent[v];\n      if (parent !== GRAPH_NODE) {\n        return parent;\n      }\n    }\n  }\n\n  /**\n   * Gets list of direct children of node v.\n   * Complexity: O(1).\n   */\n  children(v = GRAPH_NODE) {\n    if (this._isCompound) {\n      var children = this._children[v];\n      if (children) {\n        return Object.keys(children);\n      }\n    } else if (v === GRAPH_NODE) {\n      return this.nodes();\n    } else if (this.hasNode(v)) {\n      return [];\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  predecessors(v) {\n    var predsV = this._preds[v];\n    if (predsV) {\n      return Object.keys(predsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are successors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  successors(v) {\n    var sucsV = this._sucs[v];\n    if (sucsV) {\n      return Object.keys(sucsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors or successors of the specified node or undefined if\n   * node v is not in the graph.\n   * Complexity: O(|V|).\n   */\n  neighbors(v) {\n    var preds = this.predecessors(v);\n    if (preds) {\n      const union = new Set(preds);\n      for (var succ of this.successors(v)) {\n        union.add(succ);\n      }\n\n      return Array.from(union.values());\n    }\n  }\n\n  isLeaf(v) {\n    var neighbors;\n    if (this.isDirected()) {\n      neighbors = this.successors(v);\n    } else {\n      neighbors = this.neighbors(v);\n    }\n    return neighbors.length === 0;\n  }\n\n  /**\n   * Creates new graph with nodes filtered via filter. Edges incident to rejected node\n   * are also removed. In case of compound graph, if parent is rejected by filter,\n   * than all its children are rejected too.\n   * Average-case complexity: O(|E|+|V|).\n   */\n  filterNodes(filter) {\n    var copy = new this.constructor({\n      directed: this._isDirected,\n      multigraph: this._isMultigraph,\n      compound: this._isCompound\n    });\n\n    copy.setGraph(this.graph());\n\n    var self = this;\n    Object.entries(this._nodes).forEach(function([v, value]) {\n      if (filter(v)) {\n        copy.setNode(v, value);\n      }\n    });\n\n    Object.values(this._edgeObjs).forEach(function(e) {\n      if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n        copy.setEdge(e, self.edge(e));\n      }\n    });\n\n    var parents = {};\n    function findParent(v) {\n      var parent = self.parent(v);\n      if (parent === undefined || copy.hasNode(parent)) {\n        parents[v] = parent;\n        return parent;\n      } else if (parent in parents) {\n        return parents[parent];\n      } else {\n        return findParent(parent);\n      }\n    }\n\n    if (this._isCompound) {\n      copy.nodes().forEach(v => copy.setParent(v, findParent(v)));\n    }\n\n    return copy;\n  }\n\n  /* === Edge functions ========== */\n\n  /**\n   * Sets the default edge label or factory function. This label will be\n   * assigned as default label in case if no label was specified while setting\n   * an edge or this function will be invoked each time when setting an edge\n   * with no label specified and returned value * will be used as a label for edge.\n   * Complexity: O(1).\n   */\n  setDefaultEdgeLabel(newDefault) {\n    this._defaultEdgeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultEdgeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of edges in the graph.\n   * Complexity: O(1).\n   */\n  edgeCount() {\n    return this._edgeCount;\n  }\n\n  /**\n   * Gets edges of the graph. In case of compound graph subgraphs are not considered.\n   * Complexity: O(|E|).\n   */\n  edges() {\n    return Object.values(this._edgeObjs);\n  }\n\n  /**\n   * Establish an edges path over the nodes in nodes list. If some edge is already\n   * exists, it will update its label, otherwise it will create an edge between pair\n   * of nodes with label provided or default label if no label provided.\n   * Complexity: O(|nodes|).\n   */\n  setPath(vs, value) {\n    var self = this;\n    var args = arguments;\n    vs.reduce(function(v, w) {\n      if (args.length > 1) {\n        self.setEdge(v, w, value);\n      } else {\n        self.setEdge(v, w);\n      }\n      return w;\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the label for the edge (v, w) with the optionally supplied\n   * name. If label is supplied it is set as the value for the edge. If label is not\n   * supplied and the edge was created by this call then the default edge label will\n   * be assigned. The name parameter is only useful with multigraphs.\n   */\n  setEdge() {\n    var v, w, name, value;\n    var valueSpecified = false;\n    var arg0 = arguments[0];\n\n    if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n      v = arg0.v;\n      w = arg0.w;\n      name = arg0.name;\n      if (arguments.length === 2) {\n        value = arguments[1];\n        valueSpecified = true;\n      }\n    } else {\n      v = arg0;\n      w = arguments[1];\n      name = arguments[3];\n      if (arguments.length > 2) {\n        value = arguments[2];\n        valueSpecified = true;\n      }\n    }\n\n    v = \"\" + v;\n    w = \"\" + w;\n    if (name !== undefined) {\n      name = \"\" + name;\n    }\n\n    var e = edgeArgsToId(this._isDirected, v, w, name);\n    if (Object.hasOwn(this._edgeLabels, e)) {\n      if (valueSpecified) {\n        this._edgeLabels[e] = value;\n      }\n      return this;\n    }\n\n    if (name !== undefined && !this._isMultigraph) {\n      throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n    }\n\n    // It didn't exist, so we need to create it.\n    // First ensure the nodes exist.\n    this.setNode(v);\n    this.setNode(w);\n\n    this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n    var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n    // Ensure we add undirected edges in a consistent way.\n    v = edgeObj.v;\n    w = edgeObj.w;\n\n    Object.freeze(edgeObj);\n    this._edgeObjs[e] = edgeObj;\n    incrementOrInitEntry(this._preds[w], v);\n    incrementOrInitEntry(this._sucs[v], w);\n    this._in[w][e] = edgeObj;\n    this._out[v][e] = edgeObj;\n    this._edgeCount++;\n    return this;\n  }\n\n  /**\n   * Gets the label for the specified edge.\n   * Complexity: O(1).\n   */\n  edge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return this._edgeLabels[e];\n  }\n\n  /**\n   * Gets the label for the specified edge and converts it to an object.\n   * Complexity: O(1)\n   */\n  edgeAsObj() {\n    const edge = this.edge(...arguments);\n    if (typeof edge !== \"object\") {\n      return {label: edge};\n    }\n\n    return edge;\n  }\n\n  /**\n   * Detects whether the graph contains specified edge or not. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  hasEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return Object.hasOwn(this._edgeLabels, e);\n  }\n\n  /**\n   * Removes the specified edge from the graph. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  removeEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    var edge = this._edgeObjs[e];\n    if (edge) {\n      v = edge.v;\n      w = edge.w;\n      delete this._edgeLabels[e];\n      delete this._edgeObjs[e];\n      decrementOrRemoveEntry(this._preds[w], v);\n      decrementOrRemoveEntry(this._sucs[v], w);\n      delete this._in[w][e];\n      delete this._out[v][e];\n      this._edgeCount--;\n    }\n    return this;\n  }\n\n  /**\n   * Return all edges that point to the node v. Optionally filters those edges down to just those\n   * coming from node u. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  inEdges(v, u) {\n    var inV = this._in[v];\n    if (inV) {\n      var edges = Object.values(inV);\n      if (!u) {\n        return edges;\n      }\n      return edges.filter(edge => edge.v === u);\n    }\n  }\n\n  /**\n   * Return all edges that are pointed at by node v. Optionally filters those edges down to just\n   * those point to w. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  outEdges(v, w) {\n    var outV = this._out[v];\n    if (outV) {\n      var edges = Object.values(outV);\n      if (!w) {\n        return edges;\n      }\n      return edges.filter(edge => edge.w === w);\n    }\n  }\n\n  /**\n   * Returns all edges to or from node v regardless of direction. Optionally filters those edges\n   * down to just those between nodes v and w regardless of direction.\n   * Complexity: O(|E|).\n   */\n  nodeEdges(v, w) {\n    var inEdges = this.inEdges(v, w);\n    if (inEdges) {\n      return inEdges.concat(this.outEdges(v, w));\n    }\n  }\n}\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (name === undefined ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n\nmodule.exports = Graph;\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = initOrder;\n\n/*\n * Assigns an initial order value for each node by performing a DFS search\n * starting from nodes in the first rank. Nodes are assigned an order in their\n * rank as they are first visited.\n *\n * This approach comes from Gansner, et al., \"A Technique for Drawing Directed\n * Graphs.\"\n *\n * Returns a layering matrix with an array per layer and each layer sorted by\n * the order of its nodes.\n */\nfunction initOrder(g) {\n  let visited = {};\n  let simpleNodes = g.nodes().filter(v => !g.children(v).length);\n  let simpleNodesRanks = simpleNodes.map(v => g.node(v).rank);\n  let maxRank = util.applyWithChunking(Math.max, simpleNodesRanks);\n  let layers = util.range(maxRank + 1).map(() => []);\n\n  function dfs(v) {\n    if (visited[v]) return;\n    visited[v] = true;\n    let node = g.node(v);\n    layers[node.rank].push(v);\n    g.successors(v).forEach(dfs);\n  }\n\n  let orderedVs = simpleNodes.sort((a, b) => g.node(a).rank - g.node(b).rank);\n  orderedVs.forEach(dfs);\n\n  return layers;\n}\n","\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\n/*\n * This module provides coordinate assignment based on Brandes and Kpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\n\nmodule.exports = {\n  positionX: positionX,\n  findType1Conflicts: findType1Conflicts,\n  findType2Conflicts: findType2Conflicts,\n  addConflict: addConflict,\n  hasConflict: hasConflict,\n  verticalAlignment: verticalAlignment,\n  horizontalCompaction: horizontalCompaction,\n  alignCoordinates: alignCoordinates,\n  findSmallestWidthAlignment: findSmallestWidthAlignment,\n  balance: balance\n};\n\n/*\n * Marks all edges in the graph with a type-1 conflict with the \"type1Conflict\"\n * property. A type-1 conflict is one where a non-inner segment crosses an\n * inner segment. An inner segment is an edge with both incident nodes marked\n * with the \"dummy\" property.\n *\n * This algorithm scans layer by layer, starting with the second, for type-1\n * conflicts between the current layer and the previous layer. For each layer\n * it scans the nodes from left to right until it reaches one that is incident\n * on an inner segment. It then scans predecessors to determine if they have\n * edges that cross that inner segment. At the end a final scan is done for all\n * nodes on the current rank to see if they cross the last visited inner\n * segment.\n *\n * This algorithm (safely) assumes that a dummy node will only be incident on a\n * single node in the layers being scanned.\n */\nfunction findType1Conflicts(g, layering) {\n  let conflicts = {};\n\n  function visitLayer(prevLayer, layer) {\n    let\n      // last visited node in the previous layer that is incident on an inner\n      // segment.\n      k0 = 0,\n      // Tracks the last node in this layer scanned for crossings with a type-1\n      // segment.\n      scanPos = 0,\n      prevLayerLength = prevLayer.length,\n      lastNode = layer[layer.length - 1];\n\n    layer.forEach((v, i) => {\n      let w = findOtherInnerSegmentNode(g, v),\n        k1 = w ? g.node(w).order : prevLayerLength;\n\n      if (w || v === lastNode) {\n        layer.slice(scanPos, i+1).forEach(scanNode => {\n          g.predecessors(scanNode).forEach(u => {\n            let uLabel = g.node(u),\n              uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) &&\n                !(uLabel.dummy && g.node(scanNode).dummy)) {\n              addConflict(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n\n    return layer;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findType2Conflicts(g, layering) {\n  let conflicts = {};\n\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    let v;\n    util.range(southPos, southEnd).forEach(i => {\n      v = south[i];\n      if (g.node(v).dummy) {\n        g.predecessors(v).forEach(u => {\n          let uNode = g.node(u);\n          if (uNode.dummy &&\n              (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            addConflict(conflicts, u, v);\n          }\n        });\n      }\n    });\n  }\n\n\n  function visitLayer(north, south) {\n    let prevNorthPos = -1,\n      nextNorthPos,\n      southPos = 0;\n\n    south.forEach((v, southLookahead) => {\n      if (g.node(v).dummy === \"border\") {\n        let predecessors = g.predecessors(v);\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scan(south, southPos, southLookahead, prevNorthPos, nextNorthPos);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scan(south, southPos, south.length, nextNorthPos, north.length);\n    });\n\n    return south;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findOtherInnerSegmentNode(g, v) {\n  if (g.node(v).dummy) {\n    return g.predecessors(v).find(u => g.node(u).dummy);\n  }\n}\n\nfunction addConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n\n  let conflictsV = conflicts[v];\n  if (!conflictsV) {\n    conflicts[v] = conflictsV = {};\n  }\n  conflictsV[w] = true;\n}\n\nfunction hasConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return !!conflicts[v] && Object.hasOwn(conflicts[v], w);\n}\n\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nfunction verticalAlignment(g, layering, conflicts, neighborFn) {\n  let root = {},\n    align = {},\n    pos = {};\n\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  layering.forEach(layer => {\n    layer.forEach((v, order) => {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n\n  layering.forEach(layer => {\n    let prevIdx = -1;\n    layer.forEach(v => {\n      let ws = neighborFn(v);\n      if (ws.length) {\n        ws = ws.sort((a, b) => pos[a] - pos[b]);\n        let mp = (ws.length - 1) / 2;\n        for (let i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          let w = ws[i];\n          if (align[v] === v &&\n              prevIdx < pos[w] &&\n              !hasConflict(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n\n  return { root: root, align: align };\n}\n\nfunction horizontalCompaction(g, layering, root, align, reverseSep) {\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  let xs = {},\n    blockG = buildBlockGraph(g, layering, root, reverseSep),\n    borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n\n  function iterate(setXsFunc, nextNodesFunc) {\n    let stack = blockG.nodes();\n    let elem = stack.pop();\n    let visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n\n      elem = stack.pop();\n    }\n  }\n\n  // First pass, assign smallest coordinates\n  function pass1(elem) {\n    xs[elem] = blockG.inEdges(elem).reduce((acc, e) => {\n      return Math.max(acc, xs[e.v] + blockG.edge(e));\n    }, 0);\n  }\n\n  // Second pass, assign greatest coordinates\n  function pass2(elem) {\n    let min = blockG.outEdges(elem).reduce((acc, e) => {\n      return Math.min(acc, xs[e.w] - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n\n    let node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  }\n\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n\n  // Assign x coordinates to all nodes\n  Object.keys(align).forEach(v => xs[v] = xs[root[v]]);\n\n  return xs;\n}\n\n\nfunction buildBlockGraph(g, layering, root, reverseSep) {\n  let blockGraph = new Graph(),\n    graphLabel = g.graph(),\n    sepFn = sep(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n\n  layering.forEach(layer => {\n    let u;\n    layer.forEach(v => {\n      let vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u],\n          prevMax = blockGraph.edge(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n\n  return blockGraph;\n}\n\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nfunction findSmallestWidthAlignment(g, xss) {\n  return Object.values(xss).reduce((currentMinAndXs, xs) => {\n    let max = Number.NEGATIVE_INFINITY;\n    let min = Number.POSITIVE_INFINITY;\n\n    Object.entries(xs).forEach(([v, x]) => {\n      let halfWidth = width(g, v) / 2;\n\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n\n    const newMin = max - min;\n    if (newMin < currentMinAndXs[0]) {\n      currentMinAndXs = [newMin, xs];\n    }\n    return currentMinAndXs;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  let alignToVals = Object.values(alignTo),\n    alignToMin = util.applyWithChunking(Math.min, alignToVals),\n    alignToMax = util.applyWithChunking(Math.max, alignToVals);\n\n  [\"u\", \"d\"].forEach(vert => {\n    [\"l\", \"r\"].forEach(horiz => {\n      let alignment = vert + horiz,\n        xs = xss[alignment];\n\n      if (xs === alignTo) return;\n\n      let xsVals = Object.values(xs);\n      let delta = alignToMin - util.applyWithChunking(Math.min, xsVals);\n      if (horiz !== \"l\") {\n        delta = alignToMax - util.applyWithChunking(Math.max,xsVals);\n      }\n\n      if (delta) {\n        xss[alignment] = util.mapValues(xs, x => x + delta);\n      }\n    });\n  });\n}\n\nfunction balance(xss, align) {\n  return util.mapValues(xss.ul, (num, v) => {\n    if (align) {\n      return xss[align.toLowerCase()][v];\n    } else {\n      let xs = Object.values(xss).map(xs => xs[v]).sort((a, b) => a - b);\n      return (xs[1] + xs[2]) / 2;\n    }\n  });\n}\n\nfunction positionX(g) {\n  let layering = util.buildLayerMatrix(g);\n  let conflicts = Object.assign(\n    findType1Conflicts(g, layering),\n    findType2Conflicts(g, layering));\n\n  let xss = {};\n  let adjustedLayering;\n  [\"u\", \"d\"].forEach(vert => {\n    adjustedLayering = vert === \"u\" ? layering : Object.values(layering).reverse();\n    [\"l\", \"r\"].forEach(horiz => {\n      if (horiz === \"r\") {\n        adjustedLayering = adjustedLayering.map(inner => {\n          return Object.values(inner).reverse();\n        });\n      }\n\n      let neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      let align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n      let xs = horizontalCompaction(g, adjustedLayering,\n        align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        xs = util.mapValues(xs, x => -x);\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n\n\n  let smallestWidth = findSmallestWidthAlignment(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return balance(xss, g.graph().align);\n}\n\nfunction sep(nodeSep, edgeSep, reverseSep) {\n  return (g, v, w) => {\n    let vLabel = g.node(v);\n    let wLabel = g.node(w);\n    let sum = 0;\n    let delta;\n\n    sum += vLabel.width / 2;\n    if (Object.hasOwn(vLabel, \"labelpos\")) {\n      switch (vLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = -vLabel.width / 2; break;\n      case \"r\": delta = vLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n\n    sum += wLabel.width / 2;\n    if (Object.hasOwn(wLabel, \"labelpos\")) {\n      switch (wLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = wLabel.width / 2; break;\n      case \"r\": delta = -wLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    return sum;\n  };\n}\n\nfunction width(g, v) {\n  return g.node(v).width;\n}\n","var tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return tarjan(g).filter(function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n","module.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * If the order is not \"post\", it will be treated as \"pre\".\n */\nfunction dfs(g, vs, order) {\n  if (!Array.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = g.isDirected() ? v => g.successors(v) : v => g.neighbors(v);\n  var orderFunc = order === \"post\" ? postOrderDfs : preOrderDfs;\n\n  var acc = [];\n  var visited = {};\n  vs.forEach(v => {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    orderFunc(v, navigation, visited, acc);\n  });\n\n  return acc;\n}\n\nfunction postOrderDfs(v, navigation, visited, acc) {\n  var stack = [[v, false]];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (curr[1]) {\n      acc.push(curr[0]);\n    } else {\n      if (!Object.hasOwn(visited, curr[0])) {\n        visited[curr[0]] = true;\n        stack.push([curr[0], true]);\n        forEachRight(navigation(curr[0]), w => stack.push([w, false]));\n      }\n    }\n  }\n}\n\nfunction preOrderDfs(v, navigation, visited, acc) {\n  var stack = [v];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (!Object.hasOwn(visited, curr)) {\n      visited[curr] = true;\n      acc.push(curr);\n      forEachRight(navigation(curr), w => stack.push(w));\n    }\n  }\n}\n\nfunction forEachRight(array, iteratee) {\n  var length = array.length;\n  while (length--) {\n    iteratee(array[length], length, array);\n  }\n\n  return array;\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ellipsis = createLucideIcon(\"Ellipsis\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"19\", cy: \"12\", r: \"1\", key: \"1wjl8i\" }],\n  [\"circle\", { cx: \"5\", cy: \"12\", r: \"1\", key: \"1pcz8c\" }]\n]);\n\nexport { Ellipsis as default };\n//# sourceMappingURL=ellipsis.js.map\n","/*\n * Simple doubly linked list implementation derived from Cormen, et al.,\n * \"Introduction to Algorithms\".\n */\n\nclass List {\n  constructor() {\n    let sentinel = {};\n    sentinel._next = sentinel._prev = sentinel;\n    this._sentinel = sentinel;\n  }\n\n  dequeue() {\n    let sentinel = this._sentinel;\n    let entry = sentinel._prev;\n    if (entry !== sentinel) {\n      unlink(entry);\n      return entry;\n    }\n  }\n\n  enqueue(entry) {\n    let sentinel = this._sentinel;\n    if (entry._prev && entry._next) {\n      unlink(entry);\n    }\n    entry._next = sentinel._next;\n    sentinel._next._prev = entry;\n    sentinel._next = entry;\n    entry._prev = sentinel;\n  }\n\n  toString() {\n    let strs = [];\n    let sentinel = this._sentinel;\n    let curr = sentinel._prev;\n    while (curr !== sentinel) {\n      strs.push(JSON.stringify(curr, filterOutLinks));\n      curr = curr._prev;\n    }\n    return \"[\" + strs.join(\", \") + \"]\";\n  }\n}\n\nfunction unlink(entry) {\n  entry._prev._next = entry._next;\n  entry._next._prev = entry._prev;\n  delete entry._next;\n  delete entry._prev;\n}\n\nfunction filterOutLinks(k, v) {\n  if (k !== \"_next\" && k !== \"_prev\") {\n    return v;\n  }\n}\n\nmodule.exports = List;\n","module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n","var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n","// store.tsx\r\nimport { create } from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\nimport { settingsAPI } from \"./api\";\r\nimport { Settings, UISettings } from \"../../types/datamodel\";\r\n\r\n// Default UI settings that match the backend defaults\r\nconst DEFAULT_UI_SETTINGS: UISettings = {\r\n  show_llm_call_events: false,\r\n  expanded_messages_by_default: false,\r\n  show_agent_flow_by_default: false,\r\n  human_input_timeout_minutes: 3,\r\n};\r\n\r\ninterface SettingsState {\r\n  // Server-synced settings\r\n  serverSettings: Settings | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n\r\n  // UI settings - these will be synced with server but kept in local state for performance\r\n  uiSettings: UISettings;\r\n\r\n  // Actions\r\n  initializeSettings: (userId: string) => Promise<void>;\r\n  updateUISettings: (settings: Partial<UISettings>) => void; // Simplified to avoid async issues\r\n  resetUISettings: () => Promise<void>;\r\n}\r\n\r\n// Helper function to safely access nested properties\r\nconst getUISettings = (settings: Settings | null): UISettings => {\r\n  if (!settings || !settings.config || !settings.config.ui) {\r\n    return DEFAULT_UI_SETTINGS;\r\n  }\r\n  return settings.config.ui;\r\n};\r\n\r\nexport const useSettingsStore = create<SettingsState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Initial state\r\n      serverSettings: null,\r\n      isLoading: false,\r\n      error: null,\r\n      uiSettings: DEFAULT_UI_SETTINGS,\r\n\r\n      // Load settings from server\r\n      initializeSettings: async (userId: string) => {\r\n        // Skip if already loading\r\n        if (get().isLoading) return;\r\n\r\n        try {\r\n          set({ isLoading: true, error: null });\r\n          const settings = await settingsAPI.getSettings(userId);\r\n\r\n          // Extract UI settings from server response\r\n          const uiSettings = getUISettings(settings);\r\n\r\n          set({\r\n            serverSettings: settings,\r\n            uiSettings,\r\n            isLoading: false,\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Failed to load settings:\", error);\r\n          set({\r\n            error: \"Failed to load settings\",\r\n            isLoading: false,\r\n            // Use defaults if server fails\r\n            uiSettings: DEFAULT_UI_SETTINGS,\r\n          });\r\n        }\r\n      },\r\n\r\n      // Update UI settings locally only\r\n      // The UISettingsPanel component will handle server syncing\r\n      updateUISettings: (partialSettings: Partial<UISettings>) => {\r\n        const { uiSettings } = get();\r\n        const newUISettings = { ...uiSettings, ...partialSettings };\r\n        set({ uiSettings: newUISettings });\r\n      },\r\n\r\n      // Reset UI settings to defaults - now just resets local state\r\n      // The UISettingsPanel component will handle actual server resets\r\n      resetUISettings: async () => {\r\n        set({ uiSettings: DEFAULT_UI_SETTINGS });\r\n        return Promise.resolve();\r\n      },\r\n    }),\r\n    {\r\n      name: \"ags-app-settings-0\",\r\n      partialize: (state) => ({\r\n        // Only persist UI settings locally for performance\r\n        uiSettings: state.uiSettings,\r\n      }),\r\n    }\r\n  )\r\n);\r\n","\"use strict\";\n\nvar Graph = require(\"@dagrejs/graphlib\").Graph;\nvar slack = require(\"./util\").slack;\n\nmodule.exports = feasibleTree;\n\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nfunction feasibleTree(g) {\n  var t = new Graph({ directed: false });\n\n  // Choose arbitrary node from which to start our tree\n  var start = g.nodes()[0];\n  var size = g.nodeCount();\n  t.setNode(start, {});\n\n  var edge, delta;\n  while (tightTree(t, g) < size) {\n    edge = findMinSlackEdge(t, g);\n    delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n    shiftRanks(t, g, delta);\n  }\n\n  return t;\n}\n\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nfunction tightTree(t, g) {\n  function dfs(v) {\n    g.nodeEdges(v).forEach(e => {\n      var edgeV = e.v,\n        w = (v === edgeV) ? e.w : edgeV;\n      if (!t.hasNode(w) && !slack(g, e)) {\n        t.setNode(w, {});\n        t.setEdge(v, w, {});\n        dfs(w);\n      }\n    });\n  }\n\n  t.nodes().forEach(dfs);\n  return t.nodeCount();\n}\n\n/*\n * Finds the edge with the smallest slack that is incident on tree and returns\n * it.\n */\nfunction findMinSlackEdge(t, g) {\n  const edges = g.edges();\n\n  return edges.reduce((acc, edge) => {\n    let edgeSlack = Number.POSITIVE_INFINITY;\n    if (t.hasNode(edge.v) !== t.hasNode(edge.w)) {\n      edgeSlack = slack(g, edge);\n    }\n\n    if (edgeSlack < acc[0]) {\n      return [edgeSlack, edge];\n    }\n\n    return acc;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\nfunction shiftRanks(t, g, delta) {\n  t.nodes().forEach(v => g.node(v).rank += delta);\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = resolveConflicts;\n\n/*\n * Given a list of entries of the form {v, barycenter, weight} and a\n * constraint graph this function will resolve any conflicts between the\n * constraint graph and the barycenters for the entries. If the barycenters for\n * an entry would violate a constraint in the constraint graph then we coalesce\n * the nodes in the conflict into a new node that respects the contraint and\n * aggregates barycenter and weight information.\n *\n * This implementation is based on the description in Forster, \"A Fast and\n * Simple Hueristic for Constrained Two-Level Crossing Reduction,\" thought it\n * differs in some specific details.\n *\n * Pre-conditions:\n *\n *    1. Each entry has the form {v, barycenter, weight}, or if the node has\n *       no barycenter, then {v}.\n *\n * Returns:\n *\n *    A new list of entries of the form {vs, i, barycenter, weight}. The list\n *    `vs` may either be a singleton or it may be an aggregation of nodes\n *    ordered such that they do not violate constraints from the constraint\n *    graph. The property `i` is the lowest original index of any of the\n *    elements in `vs`.\n */\nfunction resolveConflicts(entries, cg) {\n  let mappedEntries = {};\n  entries.forEach((entry, i) => {\n    let tmp = mappedEntries[entry.v] = {\n      indegree: 0,\n      \"in\": [],\n      out: [],\n      vs: [entry.v],\n      i: i\n    };\n    if (entry.barycenter !== undefined) {\n      tmp.barycenter = entry.barycenter;\n      tmp.weight = entry.weight;\n    }\n  });\n\n  cg.edges().forEach(e => {\n    let entryV = mappedEntries[e.v];\n    let entryW = mappedEntries[e.w];\n    if (entryV !== undefined && entryW !== undefined) {\n      entryW.indegree++;\n      entryV.out.push(mappedEntries[e.w]);\n    }\n  });\n\n  let sourceSet = Object.values(mappedEntries).filter(entry => !entry.indegree);\n\n  return doResolveConflicts(sourceSet);\n}\n\nfunction doResolveConflicts(sourceSet) {\n  let entries = [];\n\n  function handleIn(vEntry) {\n    return uEntry => {\n      if (uEntry.merged) {\n        return;\n      }\n      if (uEntry.barycenter === undefined ||\n          vEntry.barycenter === undefined ||\n          uEntry.barycenter >= vEntry.barycenter) {\n        mergeEntries(vEntry, uEntry);\n      }\n    };\n  }\n\n  function handleOut(vEntry) {\n    return wEntry => {\n      wEntry[\"in\"].push(vEntry);\n      if (--wEntry.indegree === 0) {\n        sourceSet.push(wEntry);\n      }\n    };\n  }\n\n  while (sourceSet.length) {\n    let entry = sourceSet.pop();\n    entries.push(entry);\n    entry[\"in\"].reverse().forEach(handleIn(entry));\n    entry.out.forEach(handleOut(entry));\n  }\n\n  return entries.filter(entry => !entry.merged).map(entry => {\n    return util.pick(entry, [\"vs\", \"i\", \"barycenter\", \"weight\"]);\n  });\n}\n\nfunction mergeEntries(target, source) {\n  let sum = 0;\n  let weight = 0;\n\n  if (target.weight) {\n    sum += target.barycenter * target.weight;\n    weight += target.weight;\n  }\n\n  if (source.weight) {\n    sum += source.barycenter * source.weight;\n    weight += source.weight;\n  }\n\n  target.vs = source.vs.concat(target.vs);\n  target.barycenter = sum / weight;\n  target.weight = weight;\n  target.i = Math.min(source.i, target.i);\n  source.merged = true;\n}\n","\"use strict\";\n\nmodule.exports = {\n  adjust: adjust,\n  undo: undo\n};\n\nfunction adjust(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapWidthHeight(g);\n  }\n}\n\nfunction undo(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"bt\" || rankDir === \"rl\") {\n    reverseY(g);\n  }\n\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapXY(g);\n    swapWidthHeight(g);\n  }\n}\n\nfunction swapWidthHeight(g) {\n  g.nodes().forEach(v => swapWidthHeightOne(g.node(v)));\n  g.edges().forEach(e => swapWidthHeightOne(g.edge(e)));\n}\n\nfunction swapWidthHeightOne(attrs) {\n  let w = attrs.width;\n  attrs.width = attrs.height;\n  attrs.height = w;\n}\n\nfunction reverseY(g) {\n  g.nodes().forEach(v => reverseYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(reverseYOne);\n    if (Object.hasOwn(edge, \"y\")) {\n      reverseYOne(edge);\n    }\n  });\n}\n\nfunction reverseYOne(attrs) {\n  attrs.y = -attrs.y;\n}\n\nfunction swapXY(g) {\n  g.nodes().forEach(v => swapXYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(swapXYOne);\n    if (Object.hasOwn(edge, \"x\")) {\n      swapXYOne(edge);\n    }\n  });\n}\n\nfunction swapXYOne(attrs) {\n  let x = attrs.x;\n  attrs.x = attrs.y;\n  attrs.y = x;\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n","\"use strict\";\n\nlet acyclic = require(\"./acyclic\");\nlet normalize = require(\"./normalize\");\nlet rank = require(\"./rank\");\nlet normalizeRanks = require(\"./util\").normalizeRanks;\nlet parentDummyChains = require(\"./parent-dummy-chains\");\nlet removeEmptyRanks = require(\"./util\").removeEmptyRanks;\nlet nestingGraph = require(\"./nesting-graph\");\nlet addBorderSegments = require(\"./add-border-segments\");\nlet coordinateSystem = require(\"./coordinate-system\");\nlet order = require(\"./order\");\nlet position = require(\"./position\");\nlet util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = layout;\n\nfunction layout(g, opts) {\n  let time = opts && opts.debugTiming ? util.time : util.notime;\n  time(\"layout\", () => {\n    let layoutGraph =\n      time(\"  buildLayoutGraph\", () => buildLayoutGraph(g));\n    time(\"  runLayout\",        () => runLayout(layoutGraph, time, opts));\n    time(\"  updateInputGraph\", () => updateInputGraph(g, layoutGraph));\n  });\n}\n\nfunction runLayout(g, time, opts) {\n  time(\"    makeSpaceForEdgeLabels\", () => makeSpaceForEdgeLabels(g));\n  time(\"    removeSelfEdges\",        () => removeSelfEdges(g));\n  time(\"    acyclic\",                () => acyclic.run(g));\n  time(\"    nestingGraph.run\",       () => nestingGraph.run(g));\n  time(\"    rank\",                   () => rank(util.asNonCompoundGraph(g)));\n  time(\"    injectEdgeLabelProxies\", () => injectEdgeLabelProxies(g));\n  time(\"    removeEmptyRanks\",       () => removeEmptyRanks(g));\n  time(\"    nestingGraph.cleanup\",   () => nestingGraph.cleanup(g));\n  time(\"    normalizeRanks\",         () => normalizeRanks(g));\n  time(\"    assignRankMinMax\",       () => assignRankMinMax(g));\n  time(\"    removeEdgeLabelProxies\", () => removeEdgeLabelProxies(g));\n  time(\"    normalize.run\",          () => normalize.run(g));\n  time(\"    parentDummyChains\",      () => parentDummyChains(g));\n  time(\"    addBorderSegments\",      () => addBorderSegments(g));\n  time(\"    order\",                  () => order(g, opts));\n  time(\"    insertSelfEdges\",        () => insertSelfEdges(g));\n  time(\"    adjustCoordinateSystem\", () => coordinateSystem.adjust(g));\n  time(\"    position\",               () => position(g));\n  time(\"    positionSelfEdges\",      () => positionSelfEdges(g));\n  time(\"    removeBorderNodes\",      () => removeBorderNodes(g));\n  time(\"    normalize.undo\",         () => normalize.undo(g));\n  time(\"    fixupEdgeLabelCoords\",   () => fixupEdgeLabelCoords(g));\n  time(\"    undoCoordinateSystem\",   () => coordinateSystem.undo(g));\n  time(\"    translateGraph\",         () => translateGraph(g));\n  time(\"    assignNodeIntersects\",   () => assignNodeIntersects(g));\n  time(\"    reversePoints\",          () => reversePointsForReversedEdges(g));\n  time(\"    acyclic.undo\",           () => acyclic.undo(g));\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  inputGraph.nodes().forEach(v => {\n    let inputLabel = inputGraph.node(v);\n    let layoutLabel = layoutGraph.node(v);\n\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n      inputLabel.rank = layoutLabel.rank;\n\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n\n  inputGraph.edges().forEach(e => {\n    let inputLabel = inputGraph.edge(e);\n    let layoutLabel = layoutGraph.edge(e);\n\n    inputLabel.points = layoutLabel.points;\n    if (Object.hasOwn(layoutLabel, \"x\")) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\n\nlet graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nlet graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: \"tb\" };\nlet graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nlet nodeNumAttrs = [\"width\", \"height\"];\nlet nodeDefaults = { width: 0, height: 0 };\nlet edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nlet edgeDefaults = {\n  minlen: 1, weight: 1, width: 0, height: 0,\n  labeloffset: 10, labelpos: \"r\"\n};\nlet edgeAttrs = [\"labelpos\"];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  let g = new Graph({ multigraph: true, compound: true });\n  let graph = canonicalize(inputGraph.graph());\n\n  g.setGraph(Object.assign({},\n    graphDefaults,\n    selectNumberAttrs(graph, graphNumAttrs),\n    util.pick(graph, graphAttrs)));\n\n  inputGraph.nodes().forEach(v => {\n    let node = canonicalize(inputGraph.node(v));\n    const newNode = selectNumberAttrs(node, nodeNumAttrs);\n    Object.keys(nodeDefaults).forEach(k => {\n      if (newNode[k] === undefined) {\n        newNode[k] = nodeDefaults[k];\n      }\n    });\n\n    g.setNode(v, newNode);\n    g.setParent(v, inputGraph.parent(v));\n  });\n\n  inputGraph.edges().forEach(e => {\n    let edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(e, Object.assign({},\n      edgeDefaults,\n      selectNumberAttrs(edge, edgeNumAttrs),\n      util.pick(edge, edgeAttrs)));\n  });\n\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  let graph = g.graph();\n  graph.ranksep /= 2;\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== \"c\") {\n      if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.width && edge.height) {\n      let v = g.node(e.v);\n      let w = g.node(e.w);\n      let label = { rank: (w.rank - v.rank) / 2 + v.rank, e: e };\n      util.addDummyNode(g, \"edge-proxy\", label, \"_ep\");\n    }\n  });\n}\n\nfunction assignRankMinMax(g) {\n  let maxRank = 0;\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      maxRank = Math.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\n\nfunction removeEdgeLabelProxies(g) {\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.dummy === \"edge-proxy\") {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction translateGraph(g) {\n  let minX = Number.POSITIVE_INFINITY;\n  let maxX = 0;\n  let minY = Number.POSITIVE_INFINITY;\n  let maxY = 0;\n  let graphLabel = g.graph();\n  let marginX = graphLabel.marginx || 0;\n  let marginY = graphLabel.marginy || 0;\n\n  function getExtremes(attrs) {\n    let x = attrs.x;\n    let y = attrs.y;\n    let w = attrs.width;\n    let h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n\n  g.nodes().forEach(v => getExtremes(g.node(v)));\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      getExtremes(edge);\n    }\n  });\n\n  minX -= marginX;\n  minY -= marginY;\n\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(p => {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (Object.hasOwn(edge, \"x\")) { edge.x -= minX; }\n    if (Object.hasOwn(edge, \"y\")) { edge.y -= minY; }\n  });\n\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\n\nfunction assignNodeIntersects(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    let nodeV = g.node(e.v);\n    let nodeW = g.node(e.w);\n    let p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\n\nfunction fixupEdgeLabelCoords(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n      case \"l\": edge.x -= edge.width / 2 + edge.labeloffset; break;\n      case \"r\": edge.x += edge.width / 2 + edge.labeloffset; break;\n      }\n    }\n  });\n}\n\nfunction reversePointsForReversedEdges(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\n\nfunction removeBorderNodes(g) {\n  g.nodes().forEach(v => {\n    if (g.children(v).length) {\n      let node = g.node(v);\n      let t = g.node(node.borderTop);\n      let b = g.node(node.borderBottom);\n      let l = g.node(node.borderLeft[node.borderLeft.length - 1]);\n      let r = g.node(node.borderRight[node.borderRight.length - 1]);\n\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n\n  g.nodes().forEach(v => {\n    if (g.node(v).dummy === \"border\") {\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction removeSelfEdges(g) {\n  g.edges().forEach(e => {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({ e: e, label: g.edge(e) });\n      g.removeEdge(e);\n    }\n  });\n}\n\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  layers.forEach(layer => {\n    var orderShift = 0;\n    layer.forEach((v, i) => {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      (node.selfEdges || []).forEach(selfEdge => {\n        util.addDummyNode(g, \"selfedge\", {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + (++orderShift),\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, \"_se\");\n      });\n      delete node.selfEdges;\n    });\n  });\n}\n\nfunction positionSelfEdges(g) {\n  g.nodes().forEach(v => {\n    var node = g.node(v);\n    if (node.dummy === \"selfedge\") {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [\n        { x: x + 2 * dx / 3, y: y - dy },\n        { x: x + 5 * dx / 6, y: y - dy },\n        { x: x +     dx    , y: y },\n        { x: x + 5 * dx / 6, y: y + dy },\n        { x: x + 2 * dx / 3, y: y + dy }\n      ];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\n\nfunction selectNumberAttrs(obj, attrs) {\n  return util.mapValues(util.pick(obj, attrs), Number);\n}\n\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  if (attrs) {\n    Object.entries(attrs).forEach(([k, v]) => {\n      if (typeof k === \"string\") {\n        k = k.toLowerCase();\n      }\n\n      newAttrs[k] = v;\n    });\n  }\n  return newAttrs;\n}\n","module.exports = addSubgraphConstraints;\n\nfunction addSubgraphConstraints(g, cg, vs) {\n  let prev = {},\n    rootPrev;\n\n  vs.forEach(v => {\n    let child = g.parent(v),\n      parent,\n      prevChild;\n    while (child) {\n      parent = g.parent(child);\n      if (parent) {\n        prevChild = prev[parent];\n        prev[parent] = child;\n      } else {\n        prevChild = rootPrev;\n        rootPrev = child;\n      }\n      if (prevChild && prevChild !== child) {\n        cg.setEdge(prevChild, child);\n        return;\n      }\n      child = parent;\n    }\n  });\n\n  /*\n  function dfs(v) {\n    var children = v ? g.children(v) : g.children();\n    if (children.length) {\n      var min = Number.POSITIVE_INFINITY,\n          subgraphs = [];\n      children.forEach(function(child) {\n        var childMin = dfs(child);\n        if (g.children(child).length) {\n          subgraphs.push({ v: child, order: childMin });\n        }\n        min = Math.min(min, childMin);\n      });\n      _.sortBy(subgraphs, \"order\").reduce(function(prev, curr) {\n        cg.setEdge(prev.v, curr.v);\n        return curr;\n      });\n      return min;\n    }\n    return g.node(v).order;\n  }\n  dfs(undefined);\n  */\n}\n","module.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n","\"use strict\";\n\nconst { applyWithChunking } = require(\"../util\");\n\nmodule.exports = {\n  longestPath: longestPath,\n  slack: slack\n};\n\n/*\n * Initializes ranks for the input graph using the longest path algorithm. This\n * algorithm scales well and is fast in practice, it yields rather poor\n * solutions. Nodes are pushed to the lowest layer possible, leaving the bottom\n * ranks wide and leaving edges longer than necessary. However, due to its\n * speed, this algorithm is good for getting an initial ranking that can be fed\n * into other algorithms.\n *\n * This algorithm does not normalize layers because it will be used by other\n * algorithms in most cases. If using this algorithm directly, be sure to\n * run normalize at the end.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG.\n *    2. Input graph node labels can be assigned properties.\n *\n * Post-conditions:\n *\n *    1. Each node will be assign an (unnormalized) \"rank\" property.\n */\nfunction longestPath(g) {\n  var visited = {};\n\n  function dfs(v) {\n    var label = g.node(v);\n    if (Object.hasOwn(visited, v)) {\n      return label.rank;\n    }\n    visited[v] = true;\n\n    let outEdgesMinLens = g.outEdges(v).map(e => {\n      if (e == null) {\n        return Number.POSITIVE_INFINITY;\n      }\n\n      return dfs(e.w) - g.edge(e).minlen;\n    });\n\n    var rank = applyWithChunking(Math.min, outEdgesMinLens);\n\n    if (rank === Number.POSITIVE_INFINITY) {\n      rank = 0;\n    }\n\n    return (label.rank = rank);\n  }\n\n  g.sources().forEach(dfs);\n}\n\n/*\n * Returns the amount of slack for the given edge. The slack is defined as the\n * difference between the length of the edge and its minimum length.\n */\nfunction slack(g, e) {\n  return g.node(e.w).rank - g.node(e.v).rank - g.edge(e).minlen;\n}\n","\"use strict\";\n\nvar rankUtil = require(\"./util\");\nvar longestPath = rankUtil.longestPath;\nvar feasibleTree = require(\"./feasible-tree\");\nvar networkSimplex = require(\"./network-simplex\");\n\nmodule.exports = rank;\n\n/*\n * Assigns a rank to each node in the input graph that respects the \"minlen\"\n * constraint specified on edges between nodes.\n *\n * This basic structure is derived from Gansner, et al., \"A Technique for\n * Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a connected DAG\n *    2. Graph nodes must be objects\n *    3. Graph edges must have \"weight\" and \"minlen\" attributes\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have a \"rank\" attribute based on the results of the\n *       algorithm. Ranks can start at any index (including negative), we'll\n *       fix them up later.\n */\nfunction rank(g) {\n  switch(g.graph().ranker) {\n  case \"network-simplex\": networkSimplexRanker(g); break;\n  case \"tight-tree\": tightTreeRanker(g); break;\n  case \"longest-path\": longestPathRanker(g); break;\n  default: networkSimplexRanker(g);\n  }\n}\n\n// A fast and simple ranker, but results are far from optimal.\nvar longestPathRanker = longestPath;\n\nfunction tightTreeRanker(g) {\n  longestPath(g);\n  feasibleTree(g);\n}\n\nfunction networkSimplexRanker(g) {\n  networkSimplex(g);\n}\n","/**\n * @license lucide-react v0.460.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Minimize2 = createLucideIcon(\"Minimize2\", [\n  [\"polyline\", { points: \"4 14 10 14 10 20\", key: \"11kfnr\" }],\n  [\"polyline\", { points: \"20 10 14 10 14 4\", key: \"rlmsce\" }],\n  [\"line\", { x1: \"14\", x2: \"21\", y1: \"10\", y2: \"3\", key: \"o5lafz\" }],\n  [\"line\", { x1: \"3\", x2: \"10\", y1: \"21\", y2: \"14\", key: \"1atl0r\" }]\n]);\n\nexport { Minimize2 as default };\n//# sourceMappingURL=minimize-2.js.map\n","var map = {\n\t\"./01_sequential.json\": 99762,\n\t\"./02_concurrent.json\": 31743,\n\t\"./03_selector.json\": 26470,\n\t\"./04_group_chat.json\": 1494,\n\t\"./05_handoff.json\": 48981,\n\t\"./06_magentic.json\": 8546,\n\t\"./07_debate.json\": 84442,\n\t\"./08_reflection.json\": 47069,\n\t\"./09_hierarchical.json\": 1660,\n\t\"./10_mixture_of_agents.json\": 83330,\n\t\"./11_code_execution.json\": 18046\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 91594;","/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n","// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n","function topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (Object.hasOwn(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!Object.hasOwn(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      g.predecessors(node).forEach(visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  g.sinks().forEach(visit);\n\n  if (Object.keys(visited).length !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nclass CycleException extends Error {\n  constructor() {\n    super(...arguments);\n  }\n}\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n"],"names":["greedyFAS","uniqueId","module","exports","run","g","graph","acyclicer","e","edge","weight","weightFn","fas","stack","visited","dfs","v","Object","hasOwn","outEdges","forEach","w","push","nodes","dfsFAS","label","removeEdge","forwardName","name","reversed","setEdge","undo","edges","Graph","List","nodeCount","state","fasGraph","maxIn","maxOut","setNode","out","prevWeight","edgeWeight","Math","max","node","buckets","limit","range","i","map","zeroIdx","assignBucket","buildState","DEFAULT_WEIGHT_FN","entry","results","sources","length","sinks","dequeue","removeNode","concat","doGreedyFAS","flatMap","collectPredecessors","undefined","inEdges","uEntry","wEntry","enqueue","addDummyNode","type","attrs","hasNode","dummy","addBorderNode","prefix","rank","order","width","height","arguments","applyWithChunking","asNonCompoundGraph","simplified","multigraph","isMultigraph","setGraph","children","buildLayerMatrix","layering","maxRank","intersectRect","rect","point","sx","sy","x","y","dx","dy","h","Error","abs","mapValues","obj","funcOrProp","func","val","entries","reduce","acc","k","normalizeRanks","nodeRanks","Number","MAX_VALUE","min","notime","fn","partition","collection","result","lhs","rhs","value","pick","source","keys","dest","key","predecessorWeights","weightMap","preds","zipObject","removeEmptyRanks","offset","layers","delta","nodeRankFactor","Array","from","vs","simplify","simpleLabel","minlen","successorWeights","sucs","time","start","Date","now","console","log","CHUNKING_THRESHOLD","argsArray","chunks","array","chunkSize","chunk","slice","splitToChunks","apply","MIN_VALUE","idCounter","id","toString","step","endCon","props","values","Cog6ToothIcon","title","titleId","svgRef","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d","PaperAirplaneIcon","token","componentCls","notificationMarginEdge","animationMaxHeight","noticeCls","rightFadeIn","transform","opacity","topFadeIn","top","bottomFadeIn","bottom","calc","mul","equal","leftFadeIn","marginInline","animationName","marginRight","_skip_check_","marginLeft","marginInlineEnd","marginInlineStart","NotificationPlacements","placementAlignProperty","topLeft","topRight","bottomLeft","bottomRight","genStackChildrenStyle","childrenStyle","notificationStackLayer","overflow","transition","motionDurationMid","color","pointerEvents","genStackedNoticeStyle","background","colorBgBlur","backdropFilter","motionDurationSlow","willChange","position","content","margin","insetInline","placement","startsWith","genPlacementStackStyle","cur","genNoticeStyle","iconCls","boxShadow","fontSizeLG","notificationMarginBottom","borderRadiusLG","colorSuccess","colorInfo","colorWarning","colorError","colorTextHeading","notificationBg","notificationPadding","notificationProgressBg","notificationProgressHeight","fontSize","lineHeight","notificationIconSize","colorText","marginBottom","borderRadius","padding","maxWidth","wordWrap","marginXS","lineHeightLG","paddingInlineEnd","paddingLG","marginSM","add","notificationPaddingVertical","insetInlineEnd","notificationPaddingHorizontal","colorIcon","outline","notificationCloseButtonSize","borderRadiusSM","display","alignItems","justifyContent","border","colorIconHover","backgroundColor","colorBgTextHover","colorBgTextActive","appearance","inlineSize","left","right","blockSize","float","marginTop","genNotificationStyle","motionEaseInOut","fadeOut","maxHeight","paddingTop","paddingBottom","zIndex","zIndexPopup","animationDuration","animationTimingFunction","animationFillMode","animationPlayState","direction","prepareComponentToken","zIndexPopupBase","prepareNotificationToken","paddingMD","colorBgElevated","controlHeightLG","paddingContentHorizontalLG","marginLG","colorPrimaryBorderHover","colorPrimary","notificationToken","__rest","s","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","InfoCircleFilled","CheckCircleFilled","CloseCircleFilled","ExclamationCircleFilled","LoadingOutlined","getCloseIcon","prefixCls","closeIcon","CloseOutlined","className","typeToIcon","success","info","error","warning","PureContent","icon","message","description","actions","role","iconNode","staticPrefixCls","btn","closable","notificationClassName","restProps","getPrefixCls","mergedActions","noticePrefixCls","rootCls","useCSSVarCls","wrapCSSVar","hashId","cssVarCls","eventKey","duration","Wrapper","classNames","list","renderNotifications","Holder","getContainer","staticGetContainer","maxCount","rtl","onAllRemoved","pauseOnHover","showProgress","getPopupContainer","notification","useContext","useToken","api","holder","style","getPlacementStyle","motion","motionName","getMotion","document","body","threshold","gap","useInternalNotification","notificationConfig","holderRef","wrapAPI","open","config","_a","current","originOpen","restConfig","realCloseIcon","getCloseIconConfig","clone","destroy","_b","close","act","callback","taskQueue","defaultGlobalConfig","getGlobalContext","mergedContainer","GlobalHolder","sync","appConfig","instance","method","args","GlobalHolderWrapper","_","setNotificationConfig","global","rootPrefixCls","getRootPrefixCls","rootIconPrefixCls","getIconPrefixCls","theme","getTheme","dom","iconPrefixCls","holderRender","flushNotice","holderFragment","createDocumentFragment","newNotification","fragment","reactRender","Promise","resolve","then","task","staticMethods","useNotification","_InternalPanelDoNotUseOrYouWillBeFired","MAX_FILE_SIZE","ALLOWED_FILE_TYPES","LARGE_TEXT_THRESHOLD","ChatInput","_ref","onSubmit","loading","disabled","textAreaRef","React","previousLoading","setPreviousLoading","text","setText","fileList","setFileList","dragOver","setDragOver","notificationApi","notificationContextHolder","isInputDisabled","scrollHeight","resetInput","handlePaste","_e$clipboardData","clipboardData","items","hasImageItem","item","file","getAsFile","size","preventDefault","fileName","getTime","namedFile","File","uploadFile","uid","status","originFileObj","prev","_toConsumableArray","getAsString","setTimeout","currentValue","selectionStart","selectionEnd","newValue","substring","blob","Blob","addEventListener","removeEventListener","handleSubmit","_textAreaRef$current","_textAreaRef$current2","query","files","filter","uploadProps","multiple","beforeUpload","Upload","LIST_IGNORE","includes","onRemove","showUploadList","customRequest","_ref2","onSuccess","ImageIcon","FileTextIcon","getFileIcon","truncateText","Button","onClick","f","XIcon","onDragOver","stopPropagation","onDragLeave","onDrop","dataTransfer","UploadIcon","onChange","event","target","onKeyDown","shiftKey","overflowY","minHeight","placeholder","Tooltip","trim","ExclamationTriangleIcon","CircleStop","createLucideIcon","cx","cy","r","rx","Pause","PanelRightOpen","PanelRightClose","CircleUser","Flag","x1","x2","y1","y2","data","isConnectable","handleClick","useCallback","styles","getNodeStyles","activeStyles","isActive","wrapper","borderColor","Handle","Position","Top","getHeaderIcon","UserCircle","Bot","getStatusIcon","CheckCircle","AlertTriangle","StopCircle","charAt","toUpperCase","reason","agentType","Bottom","ArrowDown","MessageSquareOff","AgentFlowToolbar","isFullscreen","onToggleFullscreen","onResetView","agentFlow","settings","setAgentFlowSettings","useConfigStore","toggleSetting","setting","menuItems","Grid","Hash","MapIcon","RotateCcw","Minimize2","Maximize2","ArrowRight","showLabels","MessageSquareIcon","MessageSquareOffIcon","Dropdown","menu","trigger","triggerNode","parentNode","overlayStyle","MoreHorizontal","DraftingCompass","Bug","formatTokens","tokens","toFixed","FullLogView","_event$response","_event$response$choic","onClose","X","Terminal","agent_id","split","response","model","usage","total_tokens","messages","msg","idx","isArray","index","TruncatableText","showFullscreen","choices","textThreshold","prompt_tokens","completion_tokens","_messages$","showFullLog","setShowFullLog","useState","parsedContent","useMemo","JSON","parse","totalTokens","shortAgentId","RenderMultiModal","_texts$current","_images$current","thumbnail","texts","images","maxLen","setCurrent","currentText","currentImage","ClickableImage","src","url","alt","showPrev","c","showNext","RenderToolCall","_ref3","expandedItems","setExpandedItems","Set","isExpanded","has","toggleExpansion","callId","newSet","delete","ChevronDown","stringify","isJson","RenderToolResult","_ref4","call_id","messageUtils","isToolCallContent","every","isNestedMessageContent","isMultiModalContent","isFunctionExecutionResult","isUser","isMessageArray","RenderNestedMessages","_ref5","RenderMessage","_ref6","isLast","isLLMEventMessage","User","models_usage","LLMLogRenderer","String","Search","Input","EdgeMessageModal","_edge$data2","_edge$data4","searchTerm","setSearchTerm","_edge$data","_msg$models_usage","_msg$models_usage2","filteredMessages","_edge$data3","toLowerCase","Modal","toLocaleString","onCancel","footer","allowClear","NODE_DIMENSIONS","default","end","createAgentNode","isProcessing","draggable","createUserNode","createEndNode","error_message","createEdge","options","animated","routingType","strokeDasharray","generateSequentialLayout","teamConfig","participatedAgents","_teamConfig$config","participants","isComplete","_p$config","agentName","xPos","_participants$","_participants$$config","firstAgentName","_participants$i","_participants$i$confi","_participants","_participants$config","sourceName","targetName","_participants2","_participants2$config","_participants$2","_participants$2$confi","lastAgentName","_participants3","_participants3$config","endX","CENTER_X","CENTER_Y","generateSelectorLayout","startAngle","PI","angleStep","angle","cos","sin","isAgentActive","lastActiveAgent","a","pop","generateHandoffLayout","_triageAgent$config","triageIndex","findIndex","_p$config$name","actualTriageIndex","triageAgent","triageName","otherAgents","_p$config2","endAngle","p1","p2","j","_p1$config","_p2$config","agent1","agent2","_README","providers","providersJson","PROVIDERS","extractProviderShort","provider","parts","patternContext","require","PATTERN_JSON_FILES","sort","getRequiredConfig","json","_json$autogen_impleme2","model_client","allow_repeated_speaker","autogen_implementation","requiredConfig","getPrompts","_json$autogen_impleme3","selectorPrompt","team_config","selector_prompt","selector","LOADED_PATTERN_LIBRARY","_providerConfig$requi","_override$bidirection","_override$showCrossCo","_json$autogen_impleme","providerFull","providerShort","providerConfig","shortName","getProvider","baseCategory","category","baseLayout","layout","baseIcon","baseColors","colors","primary","secondary","baseCommunicationStyle","communicationStyle","baseConnections","connections","to","requiresModelClient","override","visual_override","visual","centerNodeType","edgeStyle","bidirectional","showCrossConnections","primaryColor","secondaryColor","minAgents","agentRoles","en","useCases","when_to_use","structure","requiresCoordinator","coordinatorRole","SelectorGroupChat","Swarm","MagenticOneGroupChat","maxAgents","communication","autogenProvider","autogenProviderFull","prompts","b","localeCompare","DEFAULT_MODEL_CLIENT","component_type","temperature","DEFAULT_TERMINATION","LOADED_PATTERN_TEMPLATES","_teamConfig$participa","ASSISTANT_AGENT_DEFAULTS","reflect_on_tool_use","tool_call_summary_format","model_client_stream","system_message","handoffs","termination_condition","_json$autogen_impleme4","_jsonRequiredConfig$a","jsonRequiredConfig","buildTeamTemplate","getLoadedPatternTemplate","MAX_MESSAGE_TERMINATION","max_messages","COMBINED_TERMINATION","conditions","createAgentConfig","systemMessage","modelClient","cloneTemplate","template","getPatternById","PATTERN_LIBRARY","find","getPatternByProvider","CANVAS","createHubNode","typeInfo","supervisor","aggregator","triage","isHub","hubType","generateChainLayout","prevId","_participants$0$confi","_lastAgent$config","lastAgent","generateLayoutFromPattern","pattern","layoutGenerators","chain","hub-spoke","generateHubSpokeLayout","hubId","mesh","generateMeshLayout","_p$config3","lastActive","fork-join","generateForkJoinLayout","centerX","rightX","leftX","startY","_p$config4","tree","generateTreeLayout","_leader$config","leader","leaderName","workers","startX","_p$config5","ring","generateRingLayout","_p$config6","firstAgent","_p1$config2","_p2$config2","bothActive","generator","getPatternType","some","n","names","_p$config2$name","getPatternGenerator","patternType","createNode","agentConfig","nodeTypes","agentNode","AgentNode","edgeTypes","custom","_data$messages","sourceX","sourceY","targetX","targetY","markerEnd","isSelfLoop","baseStrokeWidth","messageCount","finalStrokeWidth","edgePath","labelX","labelY","getSmoothStepPath","labelPosition","getLabelPosition","horizontalOffset","EdgeLabelRenderer","whiteSpace","AgentFlow","viewMode","selectedPatternId","fitView","useReactFlow","setNodes","setEdges","shouldRefit","setShouldRefit","setIsFullscreen","modalOpen","setModalOpen","selectedEdge","setSelectedEdge","handleEdgeClick","onNodesChange","changes","nds","applyNodeChanges","flowWrapper","useRef","useEffect","timeoutId","clearTimeout","processMessages","nodeMap","Map","transitionCounts","bidirectionalPatterns","_messages$2","_messages$3","_messages$4","firstAgentConfig","set","currentMsg","nextMsg","transitionKey","_currentMsg$models_us3","_currentMsg$models_us4","get","count","_currentMsg$models_us","_currentMsg$models_us2","reverseKey","reverseTransition","patternKey","join","forward","reverse","newEdges","processedKeys","createEdgeLabel","showTokens","forwardKey","forwardEdgeId","reverseEdgeId","createBidirectionalEdge","isSecondary","edgeId","pairedEdgeId","showMessages","bidirectionalPair","lastMessage","edgeColor","complete","stopped","active","awaiting_input","timeout","created","handleToggleFullscreen","handleEscape","newNodes","showPatternLayout","m","_m$config","patternResult","generatePatternLayoutV2","overridePatternId","patternDef","sequential","handoff","debate","reflection","unknown","useCustomLayout","layoutedNodes","layoutedEdges","getLayoutedElements","Dagre","setDefaultEdgeLabel","rankdir","nodesep","ranksep","ranker","marginx","marginy","dimensions","bidirectionalPairs","pairKey","pairs","first","second","positionedNodes","nodePositions","sourcePos","targetPos","reactFlowProps","defaultViewport","zoom","minZoom","maxZoom","proOptions","hideAttribution","toolbarProps","ReactFlow","showGrid","Background","showMiniMap","MiniMap","WrappedAgentFlow","ReactFlowProvider","SendHorizontal","createTimeoutConfig","timeoutMinutes","DURATION_MS","DURATION_SEC","WEBSOCKET_CODE","DEFAULT_MESSAGE","WARNING_THRESHOLD_SEC","prompt","onTimeout","setResponse","isSubmitting","setIsSubmitting","uiSettings","useSettingsStore","timeoutConfig","human_input_timeout_minutes","timeLeft","setTimeLeft","hasInteracted","setHasInteracted","inputRef","timerRef","setInterval","clearInterval","focus","async","Clock","seconds","floor","padStart","Loader2","StreamingMessage","showCursor","setShowCursor","interval","isEmptyOrPlaceholderContent","trimmed","getAgentMessages","_uiSettings$show_agen","_displayRun$team_resu","_displayRun$team_resu2","_displayRun$team_resu3","_displayRun$team_resu4","onInputResponse","isFirstRun","streamingContent","setIsExpanded","threadContainerRef","isFlowVisible","setIsFlowVisible","show_agent_flow_by_default","isReplaying","setIsReplaying","replayMessageIndex","setReplayMessageIndex","originalRun","setOriginalRun","replayIntervalRef","replaySpeed","setReplaySpeed","displayRun","visibleMessages","show_llm_call_events","changeReplaySpeed","newSpeed","intervalTime","canReplay","scrollTo","behavior","Play","LoadingDots","MessageSquare","lastResultMessage","team_result","task_result","created_at","getRelativeTimeString","TriangleAlertIcon","startReplay","selectedKeys","pauseReplay","resetReplay","stop_reason","ChevronUp","total","_msg$config","calculateThreadTokens","runId","InputRequestView","Circle","Shuffle","GitBranch","SquareSplitHorizontal","session","availableSessions","onSessionChange","search","setSearch","filteredSessions","TextSearch","updated_at","selectedSession","ensureAgentModelClient","agent","defaultClient","_agent$provider","isAssistantAgent","needsModelClient","needsAssistantDefaults","createNewTeamFromPattern","patternId","createFallbackTeam","isNewTeam","warnings","modelClientModified","getPatternTemplate","updated","useCombinedTermination","combinedTerm","maxMessages","terminationCondition","applyPatternToExistingTeam","existingTeam","_existingTeam$config","_pattern$structure","existingParticipants","existingParticipantCount","patternMinAgents","existingAgents","existingAgentNames","preserveExistingModelClient","_pattern$requiredConf","_pattern$requiredConf2","agentNames","dynamicPrompt","generateDynamicSelectorPrompt","agents","agentList","promptTemplates","handoffTargets","updatedAgent","createOrModifyTeam","validateTeamConfig","_teamConfig$provider","errors","valid","applyPatternComplete","validateTeamForExecution","validation","ChatView","_selectedPattern$name","isCompareMode","isSecondaryView","onCompareClick","onExitCompare","showCompareButton","serverUrl","getServerUrl","setLoading","setError","existingRuns","setExistingRuns","currentRun","setCurrentRun","messageApi","contextHolder","useMessage","chatContainerRef","setStreamingContent","setViewMode","setSelectedPatternId","selectedPattern","patternMenuItems","Activity","Network","user","appContext","activeSocket","setActiveSocket","setTeamConfig","effectiveTeamConfig","_result$teamConfig","_result$teamConfig2","originalProvider","newProvider","providerChanged","warn","inputTimeoutRef","activeSocketRef","createMessage","sessionId","toISOString","session_id","run_id","user_id","sessionAPI","getSessionRuns","runs","loadSessionRuns","team_id","teamAPI","getTeam","team","component","catch","detectedPattern","handleError","errorRun","setupWebSocket","readyState","WebSocket","OPEN","baseUrl","getBaseUrl","wsProtocol","window","location","protocol","auth_token","localStorage","getItem","socket","onopen","send","onmessage","updatedErrorRun","newMessage","code","isTeamResult","updatedRun","handleWebSocketMessage","onclose","onerror","replace","host","SessionDropdown","ChevronRight","SplitSquareHorizontal","RunView","MessagesSquare","createRun","processedFiles","convertFilesToBase64","movable","inV","nodeU","sum","barycenter","topsort","CycleException","SessionAPI","_BaseAPI","_inheritsLoose","_proto","listSessions","userId","fetch","this","headers","getHeaders","getSession","createSession","sessionData","updateSession","deleteSession","listSessionMessages","payload","BaseAPI","SettingsAPI","getSettings","updateSettings","settingsData","settingsAPI","resolveConflicts","sortSubgraph","cg","biasRight","bl","borderLeft","br","borderRight","subgraphs","barycenters","subgraphResult","other","expandSubgraphs","flat","predecessors","blPred","brPred","RefreshCcw","PriorityQueue","weightFunc","parents","pq","updateNeighbors","pri","priority","decrease","POSITIVE_INFINITY","init","removeMin","nodeEdges","History","util","dummyChains","vRank","wRank","edgeLabel","labelRank","points","edgeObj","labelpos","normalizeEdge","origLabel","successors","Grid3x3","ForwardRef","graphlib","debug","version","debugOrdering","layerMatrix","compound","setParent","layer","layerV","u","writeNodes","nodeValue","parent","writeEdges","edgeValue","write","directed","isDirected","isCompound","structuredClone","read","onStack","lowlink","cmpt","edgeFn","vEntry","distance","predecessor","runDijkstra","DEFAULT_WEIGHT_FUNC","initOrder","crossCount","buildLayerGraph","addSubgraphConstraints","buildLayerGraphs","ranks","relationship","sweepLayerGraphs","layerGraphs","lg","root","sorted","assignOrder","opts","customOrder","downLayerGraphs","upLayerGraphs","disableOptimalOrderHeuristic","best","bestCC","lastBest","cc","postorderNums","lim","low","postorder","pathData","lca","vPath","wPath","path","findPath","pathIdx","pathV","ascending","minRank","_arr","_keyIndices","keyIndices","arr","_decrease","_swap","_heapify","l","largest","origArrI","origArrJ","nodeSep","depths","borderTop","borderBottom","child","childNode","childTop","childBottom","thisWeight","nestingEdge","depth","treeDepths","depthsArr","nestingRoot","sumWeights","cleanup","graphLabel","consumeUnsortable","unsortable","last","sortable","vsIndex","bias","entryV","entryW","positionX","rankSep","prevY","positionY","twoLayerCrossCount","northLayer","southLayer","southPos","southEntries","pos","firstIndex","treeSize","weightSum","dijkstra","edgeFunc","prop","sg","sgNode","borderType","curr","feasibleTree","slack","initRank","preorder","networkSimplex","initLowLimValues","initCutValues","leaveEdge","exchangeEdges","enterEdge","childLab","cutvalue","calcCutValue","assignCutValue","childIsTail","graphEdge","cutValue","isOutEdge","pointsToHead","otherWeight","hasEdge","otherCutValue","dfsAssignLowLim","nextLim","neighbors","vLabel","wLabel","tailLabel","flip","candidates","isDescendant","flipped","updateRanks","rootLabel","createRootNode","setDefaultNodeLabel","cmpts","GRAPH_NODE","incrementOrInitEntry","decrementOrRemoveEntry","edgeArgsToId","v_","w_","tmp","edgeObjToId","_isDirected","_isMultigraph","_isCompound","_label","_defaultNodeLabelFn","_defaultEdgeLabelFn","_nodes","_in","_preds","_out","_sucs","_edgeObjs","_edgeLabels","_nodeCount","_edgeCount","_parent","_children","constructor","newDefault","self","_removeFromParentsChildList","ancestor","predsV","sucsV","union","succ","isLeaf","filterNodes","copy","findParent","edgeCount","setPath","valueSpecified","arg0","edgeArgsToObj","freeze","edgeAsObj","outV","simpleNodes","simpleNodesRanks","findType1Conflicts","conflicts","prevLayer","k0","scanPos","prevLayerLength","lastNode","findOtherInnerSegmentNode","k1","scanNode","uLabel","uPos","addConflict","findType2Conflicts","scan","south","southEnd","prevNorthBorder","nextNorthBorder","uNode","north","nextNorthPos","prevNorthPos","southLookahead","conflictsV","hasConflict","verticalAlignment","neighborFn","align","prevIdx","ws","mp","il","ceil","horizontalCompaction","reverseSep","xs","blockG","blockGraph","sepFn","edgeSep","sep","edgesep","vRoot","uRoot","prevMax","buildBlockGraph","iterate","setXsFunc","nextNodesFunc","elem","bind","findSmallestWidthAlignment","xss","currentMinAndXs","NEGATIVE_INFINITY","halfWidth","newMin","alignCoordinates","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","alignment","xsVals","balance","ul","num","adjustedLayering","inner","smallestWidth","tarjan","postOrderDfs","navigation","forEachRight","preOrderDfs","iteratee","orderFunc","Ellipsis","unlink","_prev","_next","filterOutLinks","sentinel","_sentinel","strs","components","dijkstraAll","findCycles","floydWarshall","isAcyclic","prim","DEFAULT_UI_SETTINGS","expanded_messages_by_default","create","persist","serverSettings","isLoading","initializeSettings","ui","getUISettings","updateUISettings","partialSettings","newUISettings","resetUISettings","partialize","tightTree","edgeV","findMinSlackEdge","edgeSlack","shiftRanks","mappedEntries","indegree","sourceSet","handleIn","merged","mergeEntries","handleOut","doResolveConflicts","swapWidthHeight","swapWidthHeightOne","reverseYOne","swapXYOne","adjust","rankDir","reverseY","swapXY","acyclic","normalize","parentDummyChains","nestingGraph","addBorderSegments","coordinateSystem","debugTiming","layoutGraph","inputGraph","canonicalize","graphDefaults","selectNumberAttrs","graphNumAttrs","graphAttrs","newNode","nodeNumAttrs","nodeDefaults","edgeDefaults","edgeNumAttrs","edgeAttrs","buildLayoutGraph","labeloffset","makeSpaceForEdgeLabels","selfEdges","removeSelfEdges","injectEdgeLabelProxies","assignRankMinMax","removeEdgeLabelProxies","orderShift","selfEdge","insertSelfEdges","selfNode","positionSelfEdges","removeBorderNodes","fixupEdgeLabelCoords","minX","maxX","minY","maxY","marginX","marginY","getExtremes","translateGraph","nodeV","nodeW","unshift","assignNodeIntersects","reversePointsForReversedEdges","runLayout","inputLabel","layoutLabel","updateInputGraph","newAttrs","rootPrev","prevChild","rowK","rowI","ik","kj","ij","altDistance","runFloydWarshall","longestPath","outEdgesMinLens","networkSimplexRanker","tightTreeRanker","longestPathRanker","webpackContext","req","webpackContextResolve","__webpack_require__","o","lib","alg","visit","super"],"sourceRoot":""}